<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="generator" content="pdoc 15.0.1"/>
    <title>fst.view API documentation</title>

    <style>/*! * Bootstrap Reboot v5.0.0 (https://getbootstrap.com/) * Copyright 2011-2021 The Bootstrap Authors * Copyright 2011-2021 Twitter, Inc. * Licensed under MIT (https://github.com/twbs/bootstrap/blob/main/LICENSE) * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md) */*,::after,::before{box-sizing:border-box}@media (prefers-reduced-motion:no-preference){:root{scroll-behavior:smooth}}body{margin:0;font-family:system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial,"Noto Sans","Liberation Sans",sans-serif,"Apple Color Emoji","Segoe UI Emoji","Segoe UI Symbol","Noto Color Emoji";font-size:1rem;font-weight:400;line-height:1.5;color:#212529;background-color:#fff;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}hr{margin:1rem 0;color:inherit;background-color:currentColor;border:0;opacity:.25}hr:not([size]){height:1px}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem;font-weight:500;line-height:1.2}h1{font-size:calc(1.375rem + 1.5vw)}@media (min-width:1200px){h1{font-size:2.5rem}}h2{font-size:calc(1.325rem + .9vw)}@media (min-width:1200px){h2{font-size:2rem}}h3{font-size:calc(1.3rem + .6vw)}@media (min-width:1200px){h3{font-size:1.75rem}}h4{font-size:calc(1.275rem + .3vw)}@media (min-width:1200px){h4{font-size:1.5rem}}h5{font-size:1.25rem}h6{font-size:1rem}p{margin-top:0;margin-bottom:1rem}abbr[data-bs-original-title],abbr[title]{-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{margin-bottom:1rem;font-style:normal;line-height:inherit}ol,ul{padding-left:2rem}dl,ol,ul{margin-top:0;margin-bottom:1rem}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:.875em}mark{padding:.2em;background-color:#fcf8e3}sub,sup{position:relative;font-size:.75em;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#0d6efd;text-decoration:underline}a:hover{color:#0a58ca}a:not([href]):not([class]),a:not([href]):not([class]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,"Liberation Mono","Courier New",monospace;font-size:1em;direction:ltr;unicode-bidi:bidi-override}pre{display:block;margin-top:0;margin-bottom:1rem;overflow:auto;font-size:.875em}pre code{font-size:inherit;color:inherit;word-break:normal}code{font-size:.875em;color:#d63384;word-wrap:break-word}a>code{color:inherit}kbd{padding:.2rem .4rem;font-size:.875em;color:#fff;background-color:#212529;border-radius:.2rem}kbd kbd{padding:0;font-size:1em;font-weight:700}figure{margin:0 0 1rem}img,svg{vertical-align:middle}table{caption-side:bottom;border-collapse:collapse}caption{padding-top:.5rem;padding-bottom:.5rem;color:#6c757d;text-align:left}th{text-align:inherit;text-align:-webkit-match-parent}tbody,td,tfoot,th,thead,tr{border-color:inherit;border-style:solid;border-width:0}label{display:inline-block}button{border-radius:0}button:focus:not(:focus-visible){outline:0}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,select{text-transform:none}[role=button]{cursor:pointer}select{word-wrap:normal}select:disabled{opacity:1}[list]::-webkit-calendar-picker-indicator{display:none}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}::-moz-focus-inner{padding:0;border-style:none}textarea{resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{float:left;width:100%;padding:0;margin-bottom:.5rem;font-size:calc(1.275rem + .3vw);line-height:inherit}@media (min-width:1200px){legend{font-size:1.5rem}}legend+*{clear:left}::-webkit-datetime-edit-day-field,::-webkit-datetime-edit-fields-wrapper,::-webkit-datetime-edit-hour-field,::-webkit-datetime-edit-minute,::-webkit-datetime-edit-month-field,::-webkit-datetime-edit-text,::-webkit-datetime-edit-year-field{padding:0}::-webkit-inner-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:textfield}::-webkit-search-decoration{-webkit-appearance:none}::-webkit-color-swatch-wrapper{padding:0}::file-selector-button{font:inherit}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}iframe{border:0}summary{display:list-item;cursor:pointer}progress{vertical-align:baseline}[hidden]{display:none!important}</style>
    <style>/*! syntax-highlighting.css */pre{line-height:125%;}span.linenos{color:inherit; background-color:transparent; padding-left:5px; padding-right:20px;}.pdoc-code .hll{background-color:#ffffcc}.pdoc-code{background:#f8f8f8;}.pdoc-code .c{color:#3D7B7B; font-style:italic}.pdoc-code .err{border:1px solid #FF0000}.pdoc-code .k{color:#008000; font-weight:bold}.pdoc-code .o{color:#666666}.pdoc-code .ch{color:#3D7B7B; font-style:italic}.pdoc-code .cm{color:#3D7B7B; font-style:italic}.pdoc-code .cp{color:#9C6500}.pdoc-code .cpf{color:#3D7B7B; font-style:italic}.pdoc-code .c1{color:#3D7B7B; font-style:italic}.pdoc-code .cs{color:#3D7B7B; font-style:italic}.pdoc-code .gd{color:#A00000}.pdoc-code .ge{font-style:italic}.pdoc-code .gr{color:#E40000}.pdoc-code .gh{color:#000080; font-weight:bold}.pdoc-code .gi{color:#008400}.pdoc-code .go{color:#717171}.pdoc-code .gp{color:#000080; font-weight:bold}.pdoc-code .gs{font-weight:bold}.pdoc-code .gu{color:#800080; font-weight:bold}.pdoc-code .gt{color:#0044DD}.pdoc-code .kc{color:#008000; font-weight:bold}.pdoc-code .kd{color:#008000; font-weight:bold}.pdoc-code .kn{color:#008000; font-weight:bold}.pdoc-code .kp{color:#008000}.pdoc-code .kr{color:#008000; font-weight:bold}.pdoc-code .kt{color:#B00040}.pdoc-code .m{color:#666666}.pdoc-code .s{color:#BA2121}.pdoc-code .na{color:#687822}.pdoc-code .nb{color:#008000}.pdoc-code .nc{color:#0000FF; font-weight:bold}.pdoc-code .no{color:#880000}.pdoc-code .nd{color:#AA22FF}.pdoc-code .ni{color:#717171; font-weight:bold}.pdoc-code .ne{color:#CB3F38; font-weight:bold}.pdoc-code .nf{color:#0000FF}.pdoc-code .nl{color:#767600}.pdoc-code .nn{color:#0000FF; font-weight:bold}.pdoc-code .nt{color:#008000; font-weight:bold}.pdoc-code .nv{color:#19177C}.pdoc-code .ow{color:#AA22FF; font-weight:bold}.pdoc-code .w{color:#bbbbbb}.pdoc-code .mb{color:#666666}.pdoc-code .mf{color:#666666}.pdoc-code .mh{color:#666666}.pdoc-code .mi{color:#666666}.pdoc-code .mo{color:#666666}.pdoc-code .sa{color:#BA2121}.pdoc-code .sb{color:#BA2121}.pdoc-code .sc{color:#BA2121}.pdoc-code .dl{color:#BA2121}.pdoc-code .sd{color:#BA2121; font-style:italic}.pdoc-code .s2{color:#BA2121}.pdoc-code .se{color:#AA5D1F; font-weight:bold}.pdoc-code .sh{color:#BA2121}.pdoc-code .si{color:#A45A77; font-weight:bold}.pdoc-code .sx{color:#008000}.pdoc-code .sr{color:#A45A77}.pdoc-code .s1{color:#BA2121}.pdoc-code .ss{color:#19177C}.pdoc-code .bp{color:#008000}.pdoc-code .fm{color:#0000FF}.pdoc-code .vc{color:#19177C}.pdoc-code .vg{color:#19177C}.pdoc-code .vi{color:#19177C}.pdoc-code .vm{color:#19177C}.pdoc-code .il{color:#666666}</style>
    <style>/*! theme.css */:root{--pdoc-background:#fff;}.pdoc{--text:#212529;--muted:#6c757d;--link:#3660a5;--link-hover:#1659c5;--code:#f8f8f8;--active:#fff598;--accent:#eee;--accent2:#c1c1c1;--nav-hover:rgba(255, 255, 255, 0.5);--name:#0066BB;--def:#008800;--annotation:#007020;}</style>
    <style>/*! layout.css */html, body{width:100%;height:100%;}html, main{scroll-behavior:smooth;}body{background-color:var(--pdoc-background);}@media (max-width:769px){#navtoggle{cursor:pointer;position:absolute;width:50px;height:40px;top:1rem;right:1rem;border-color:var(--text);color:var(--text);display:flex;opacity:0.8;z-index:999;}#navtoggle:hover{opacity:1;}#togglestate + div{display:none;}#togglestate:checked + div{display:inherit;}main, header{padding:2rem 3vw;}header + main{margin-top:-3rem;}.git-button{display:none !important;}nav input[type="search"]{max-width:77%;}nav input[type="search"]:first-child{margin-top:-6px;}nav input[type="search"]:valid ~ *{display:none !important;}}@media (min-width:770px){:root{--sidebar-width:clamp(12.5rem, 28vw, 22rem);}nav{position:fixed;overflow:auto;height:100vh;width:var(--sidebar-width);}main, header{padding:3rem 2rem 3rem calc(var(--sidebar-width) + 3rem);width:calc(54rem + var(--sidebar-width));max-width:100%;}header + main{margin-top:-4rem;}#navtoggle{display:none;}}#togglestate{position:absolute;height:0;opacity:0;}nav.pdoc{--pad:clamp(0.5rem, 2vw, 1.75rem);--indent:1.5rem;background-color:var(--accent);border-right:1px solid var(--accent2);box-shadow:0 0 20px rgba(50, 50, 50, .2) inset;padding:0 0 0 var(--pad);overflow-wrap:anywhere;scrollbar-width:thin; scrollbar-color:var(--accent2) transparent; z-index:1}nav.pdoc::-webkit-scrollbar{width:.4rem; }nav.pdoc::-webkit-scrollbar-thumb{background-color:var(--accent2); }nav.pdoc > div{padding:var(--pad) 0;}nav.pdoc .module-list-button{display:inline-flex;align-items:center;color:var(--text);border-color:var(--muted);margin-bottom:1rem;}nav.pdoc .module-list-button:hover{border-color:var(--text);}nav.pdoc input[type=search]{display:block;outline-offset:0;width:calc(100% - var(--pad));}nav.pdoc .logo{max-width:calc(100% - var(--pad));max-height:35vh;display:block;margin:0 auto 1rem;transform:translate(calc(-.5 * var(--pad)), 0);}nav.pdoc ul{list-style:none;padding-left:0;}nav.pdoc > div > ul{margin-left:calc(0px - var(--pad));}nav.pdoc li a{padding:.2rem 0 .2rem calc(var(--pad) + var(--indent));}nav.pdoc > div > ul > li > a{padding-left:var(--pad);}nav.pdoc li{transition:all 100ms;}nav.pdoc li:hover{background-color:var(--nav-hover);}nav.pdoc a, nav.pdoc a:hover{color:var(--text);}nav.pdoc a{display:block;}nav.pdoc > h2:first-of-type{margin-top:1.5rem;}nav.pdoc .class:before{content:"class ";color:var(--muted);}nav.pdoc .function:after{content:"()";color:var(--muted);}nav.pdoc footer:before{content:"";display:block;width:calc(100% - var(--pad));border-top:solid var(--accent2) 1px;margin-top:1.5rem;padding-top:.5rem;}nav.pdoc footer{font-size:small;}</style>
    <style>/*! content.css */.pdoc{color:var(--text);box-sizing:border-box;line-height:1.5;background:none;}.pdoc .pdoc-button{cursor:pointer;display:inline-block;border:solid black 1px;border-radius:2px;font-size:.75rem;padding:calc(0.5em - 1px) 1em;transition:100ms all;}.pdoc .alert{padding:1rem 1rem 1rem calc(1.5rem + 24px);border:1px solid transparent;border-radius:.25rem;background-repeat:no-repeat;background-position:.75rem center;margin-bottom:1rem;}.pdoc .alert > em{display:none;}.pdoc .alert > *:last-child{margin-bottom:0;}.pdoc .alert.note {color:#084298;background-color:#cfe2ff;border-color:#b6d4fe;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23084298%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8%2016A8%208%200%201%200%208%200a8%208%200%200%200%200%2016zm.93-9.412-1%204.705c-.07.34.029.533.304.533.194%200%20.487-.07.686-.246l-.088.416c-.287.346-.92.598-1.465.598-.703%200-1.002-.422-.808-1.319l.738-3.468c.064-.293.006-.399-.287-.47l-.451-.081.082-.381%202.29-.287zM8%205.5a1%201%200%201%201%200-2%201%201%200%200%201%200%202z%22/%3E%3C/svg%3E");}.pdoc .alert.warning{color:#664d03;background-color:#fff3cd;border-color:#ffecb5;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23664d03%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M8.982%201.566a1.13%201.13%200%200%200-1.96%200L.165%2013.233c-.457.778.091%201.767.98%201.767h13.713c.889%200%201.438-.99.98-1.767L8.982%201.566zM8%205c.535%200%20.954.462.9.995l-.35%203.507a.552.552%200%200%201-1.1%200L7.1%205.995A.905.905%200%200%201%208%205zm.002%206a1%201%200%201%201%200%202%201%201%200%200%201%200-2z%22/%3E%3C/svg%3E");}.pdoc .alert.danger{color:#842029;background-color:#f8d7da;border-color:#f5c2c7;background-image:url("data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20width%3D%2224%22%20height%3D%2224%22%20fill%3D%22%23842029%22%20viewBox%3D%220%200%2016%2016%22%3E%3Cpath%20d%3D%22M5.52.359A.5.5%200%200%201%206%200h4a.5.5%200%200%201%20.474.658L8.694%206H12.5a.5.5%200%200%201%20.395.807l-7%209a.5.5%200%200%201-.873-.454L6.823%209.5H3.5a.5.5%200%200%201-.48-.641l2.5-8.5z%22/%3E%3C/svg%3E");}.pdoc .visually-hidden{position:absolute !important;width:1px !important;height:1px !important;padding:0 !important;margin:-1px !important;overflow:hidden !important;clip:rect(0, 0, 0, 0) !important;white-space:nowrap !important;border:0 !important;}.pdoc h1, .pdoc h2, .pdoc h3{font-weight:300;margin:.3em 0;padding:.2em 0;}.pdoc > section:not(.module-info) h1{font-size:1.5rem;font-weight:500;}.pdoc > section:not(.module-info) h2{font-size:1.4rem;font-weight:500;}.pdoc > section:not(.module-info) h3{font-size:1.3rem;font-weight:500;}.pdoc > section:not(.module-info) h4{font-size:1.2rem;}.pdoc > section:not(.module-info) h5{font-size:1.1rem;}.pdoc a{text-decoration:none;color:var(--link);}.pdoc a:hover{color:var(--link-hover);}.pdoc blockquote{margin-left:2rem;}.pdoc pre{border-top:1px solid var(--accent2);border-bottom:1px solid var(--accent2);margin-top:0;margin-bottom:1em;padding:.5rem 0 .5rem .5rem;overflow-x:auto;background-color:var(--code);}.pdoc code{color:var(--text);padding:.2em .4em;margin:0;font-size:85%;background-color:var(--accent);border-radius:6px;}.pdoc a > code{color:inherit;}.pdoc pre > code{display:inline-block;font-size:inherit;background:none;border:none;padding:0;}.pdoc > section:not(.module-info){margin-bottom:1.5rem;}.pdoc .modulename{margin-top:0;font-weight:bold;}.pdoc .modulename a{color:var(--link);transition:100ms all;}.pdoc .git-button{float:right;border:solid var(--link) 1px;}.pdoc .git-button:hover{background-color:var(--link);color:var(--pdoc-background);}.view-source-toggle-state,.view-source-toggle-state ~ .pdoc-code{display:none;}.view-source-toggle-state:checked ~ .pdoc-code{display:block;}.view-source-button{display:inline-block;float:right;font-size:.75rem;line-height:1.5rem;color:var(--muted);padding:0 .4rem 0 1.3rem;cursor:pointer;text-indent:-2px;}.view-source-button > span{visibility:hidden;}.module-info .view-source-button{float:none;display:flex;justify-content:flex-end;margin:-1.2rem .4rem -.2rem 0;}.view-source-button::before{position:absolute;content:"View Source";display:list-item;list-style-type:disclosure-closed;}.view-source-toggle-state:checked ~ .attr .view-source-button::before,.view-source-toggle-state:checked ~ .view-source-button::before{list-style-type:disclosure-open;}.pdoc .docstring{margin-bottom:1.5rem;}.pdoc section:not(.module-info) .docstring{margin-left:clamp(0rem, 5vw - 2rem, 1rem);}.pdoc .docstring .pdoc-code{margin-left:1em;margin-right:1em;}.pdoc h1:target,.pdoc h2:target,.pdoc h3:target,.pdoc h4:target,.pdoc h5:target,.pdoc h6:target,.pdoc .pdoc-code > pre > span:target{background-color:var(--active);box-shadow:-1rem 0 0 0 var(--active);}.pdoc .pdoc-code > pre > span:target{display:block;}.pdoc div:target > .attr,.pdoc section:target > .attr,.pdoc dd:target > a{background-color:var(--active);}.pdoc *{scroll-margin:2rem;}.pdoc .pdoc-code .linenos{user-select:none;}.pdoc .attr:hover{filter:contrast(0.95);}.pdoc section, .pdoc .classattr{position:relative;}.pdoc .headerlink{--width:clamp(1rem, 3vw, 2rem);position:absolute;top:0;left:calc(0rem - var(--width));transition:all 100ms ease-in-out;opacity:0;}.pdoc .headerlink::before{content:"#";display:block;text-align:center;width:var(--width);height:2.3rem;line-height:2.3rem;font-size:1.5rem;}.pdoc .attr:hover ~ .headerlink,.pdoc *:target > .headerlink,.pdoc .headerlink:hover{opacity:1;}.pdoc .attr{display:block;margin:.5rem 0 .5rem;padding:.4rem .4rem .4rem 1rem;background-color:var(--accent);overflow-x:auto;}.pdoc .classattr{margin-left:2rem;}.pdoc .decorator-deprecated{color:#842029;}.pdoc .decorator-deprecated ~ span{filter:grayscale(1) opacity(0.8);}.pdoc .name{color:var(--name);font-weight:bold;}.pdoc .def{color:var(--def);font-weight:bold;}.pdoc .signature{background-color:transparent;}.pdoc .param, .pdoc .return-annotation{white-space:pre;}.pdoc .signature.multiline .param{display:block;}.pdoc .signature.condensed .param{display:inline-block;}.pdoc .annotation{color:var(--annotation);}.pdoc .view-value-toggle-state,.pdoc .view-value-toggle-state ~ .default_value{display:none;}.pdoc .view-value-toggle-state:checked ~ .default_value{display:inherit;}.pdoc .view-value-button{font-size:.5rem;vertical-align:middle;border-style:dashed;margin-top:-0.1rem;}.pdoc .view-value-button:hover{background:white;}.pdoc .view-value-button::before{content:"show";text-align:center;width:2.2em;display:inline-block;}.pdoc .view-value-toggle-state:checked ~ .view-value-button::before{content:"hide";}.pdoc .inherited{margin-left:2rem;}.pdoc .inherited dt{font-weight:700;}.pdoc .inherited dt, .pdoc .inherited dd{display:inline;margin-left:0;margin-bottom:.5rem;}.pdoc .inherited dd:not(:last-child):after{content:", ";}.pdoc .inherited .class:before{content:"class ";}.pdoc .inherited .function a:after{content:"()";}.pdoc .search-result .docstring{overflow:auto;max-height:25vh;}.pdoc .search-result.focused > .attr{background-color:var(--active);}.pdoc .attribution{margin-top:2rem;display:block;opacity:0.5;transition:all 200ms;filter:grayscale(100%);}.pdoc .attribution:hover{opacity:1;filter:grayscale(0%);}.pdoc .attribution img{margin-left:5px;height:35px;vertical-align:middle;width:70px;transition:all 200ms;}.pdoc table{display:block;width:max-content;max-width:100%;overflow:auto;margin-bottom:1rem;}.pdoc table th{font-weight:600;}.pdoc table th, .pdoc table td{padding:6px 13px;border:1px solid var(--accent2);}</style>
    <style>/*! custom.css */</style></head>
<body>
    <nav class="pdoc">
        <label id="navtoggle" for="togglestate" class="pdoc-button"><svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'><path stroke-linecap='round' stroke="currentColor" stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/></svg></label>
        <input id="togglestate" type="checkbox" aria-hidden="true" tabindex="-1">
        <div>            <a class="pdoc-button module-list-button" href="../fst.html">
<svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-box-arrow-in-left" viewBox="0 0 16 16">
  <path fill-rule="evenodd" d="M10 3.5a.5.5 0 0 0-.5-.5h-8a.5.5 0 0 0-.5.5v9a.5.5 0 0 0 .5.5h8a.5.5 0 0 0 .5-.5v-2a.5.5 0 0 1 1 0v2A1.5 1.5 0 0 1 9.5 14h-8A1.5 1.5 0 0 1 0 12.5v-9A1.5 1.5 0 0 1 1.5 2h8A1.5 1.5 0 0 1 11 3.5v2a.5.5 0 0 1-1 0v-2z"/>
  <path fill-rule="evenodd" d="M4.146 8.354a.5.5 0 0 1 0-.708l3-3a.5.5 0 1 1 .708.708L5.707 7.5H14.5a.5.5 0 0 1 0 1H5.707l2.147 2.146a.5.5 0 0 1-.708.708l-3-3z"/>
</svg>                &nbsp;fst</a>


            <input type="search" placeholder="Search..." role="searchbox" aria-label="search"
                   pattern=".+" required>



            <h2>API Documentation</h2>
                <ul class="memberlist">
            <li>
                    <a class="class" href="#fstview">fstview</a>
                            <ul class="memberlist">
                        <li>
                                <a class="variable" href="#fstview.fst">fst</a>
                        </li>
                        <li>
                                <a class="variable" href="#fstview.field">field</a>
                        </li>
                        <li>
                                <a class="variable" href="#fstview.start">start</a>
                        </li>
                        <li>
                                <a class="variable" href="#fstview.stop">stop</a>
                        </li>
                        <li>
                                <a class="variable" href="#fstview.root">root</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.__getitem__">__getitem__</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.__setitem__">__setitem__</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.__delitem__">__delitem__</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.copy">copy</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.cut">cut</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.replace">replace</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.remove">remove</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.insert">insert</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.append">append</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.extend">extend</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.prepend">prepend</a>
                        </li>
                        <li>
                                <a class="function" href="#fstview.prextend">prextend</a>
                        </li>
                </ul>

            </li>
    </ul>



        <a class="attribution" title="pdoc: Python API documentation generator" href="https://pdoc.dev" target="_blank">
            built with <span class="visually-hidden">pdoc</span><img
                alt="pdoc logo"
                src="data:image/svg+xml,%3Csvg%20xmlns%3D%22http%3A//www.w3.org/2000/svg%22%20role%3D%22img%22%20aria-label%3D%22pdoc%20logo%22%20width%3D%22300%22%20height%3D%22150%22%20viewBox%3D%22-1%200%2060%2030%22%3E%3Ctitle%3Epdoc%3C/title%3E%3Cpath%20d%3D%22M29.621%2021.293c-.011-.273-.214-.475-.511-.481a.5.5%200%200%200-.489.503l-.044%201.393c-.097.551-.695%201.215-1.566%201.704-.577.428-1.306.486-2.193.182-1.426-.617-2.467-1.654-3.304-2.487l-.173-.172a3.43%203.43%200%200%200-.365-.306.49.49%200%200%200-.286-.196c-1.718-1.06-4.931-1.47-7.353.191l-.219.15c-1.707%201.187-3.413%202.131-4.328%201.03-.02-.027-.49-.685-.141-1.763.233-.721.546-2.408.772-4.076.042-.09.067-.187.046-.288.166-1.347.277-2.625.241-3.351%201.378-1.008%202.271-2.586%202.271-4.362%200-.976-.272-1.935-.788-2.774-.057-.094-.122-.18-.184-.268.033-.167.052-.339.052-.516%200-1.477-1.202-2.679-2.679-2.679-.791%200-1.496.352-1.987.9a6.3%206.3%200%200%200-1.001.029c-.492-.564-1.207-.929-2.012-.929-1.477%200-2.679%201.202-2.679%202.679A2.65%202.65%200%200%200%20.97%206.554c-.383.747-.595%201.572-.595%202.41%200%202.311%201.507%204.29%203.635%205.107-.037.699-.147%202.27-.423%203.294l-.137.461c-.622%202.042-2.515%208.257%201.727%2010.643%201.614.908%203.06%201.248%204.317%201.248%202.665%200%204.492-1.524%205.322-2.401%201.476-1.559%202.886-1.854%206.491.82%201.877%201.393%203.514%201.753%204.861%201.068%202.223-1.713%202.811-3.867%203.399-6.374.077-.846.056-1.469.054-1.537zm-4.835%204.313c-.054.305-.156.586-.242.629-.034-.007-.131-.022-.307-.157-.145-.111-.314-.478-.456-.908.221.121.432.25.675.355.115.039.219.051.33.081zm-2.251-1.238c-.05.33-.158.648-.252.694-.022.001-.125-.018-.307-.157-.217-.166-.488-.906-.639-1.573.358.344.754.693%201.198%201.036zm-3.887-2.337c-.006-.116-.018-.231-.041-.342.635.145%201.189.368%201.599.625.097.231.166.481.174.642-.03.049-.055.101-.067.158-.046.013-.128.026-.298.004-.278-.037-.901-.57-1.367-1.087zm-1.127-.497c.116.306.176.625.12.71-.019.014-.117.045-.345.016-.206-.027-.604-.332-.986-.695.41-.051.816-.056%201.211-.031zm-4.535%201.535c.209.22.379.47.358.598-.006.041-.088.138-.351.234-.144.055-.539-.063-.979-.259a11.66%2011.66%200%200%200%20.972-.573zm.983-.664c.359-.237.738-.418%201.126-.554.25.237.479.548.457.694-.006.042-.087.138-.351.235-.174.064-.694-.105-1.232-.375zm-3.381%201.794c-.022.145-.061.29-.149.401-.133.166-.358.248-.69.251h-.002c-.133%200-.306-.26-.45-.621.417.091.854.07%201.291-.031zm-2.066-8.077a4.78%204.78%200%200%201-.775-.584c.172-.115.505-.254.88-.378l-.105.962zm-.331%202.302a10.32%2010.32%200%200%201-.828-.502c.202-.143.576-.328.984-.49l-.156.992zm-.45%202.157l-.701-.403c.214-.115.536-.249.891-.376a11.57%2011.57%200%200%201-.19.779zm-.181%201.716c.064.398.194.702.298.893-.194-.051-.435-.162-.736-.398.061-.119.224-.3.438-.495zM8.87%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zm-.735-.389a1.15%201.15%200%200%200-.314.783%201.16%201.16%200%200%200%201.162%201.162c.457%200%20.842-.27%201.032-.653.026.117.042.238.042.362a1.68%201.68%200%200%201-1.679%201.679%201.68%201.68%200%200%201-1.679-1.679c0-.843.626-1.535%201.436-1.654zM5.059%205.406A1.68%201.68%200%200%201%203.38%207.085a1.68%201.68%200%200%201-1.679-1.679c0-.037.009-.072.011-.109.21.3.541.508.935.508a1.16%201.16%200%200%200%201.162-1.162%201.14%201.14%200%200%200-.474-.912c.015%200%20.03-.005.045-.005.926.001%201.679.754%201.679%201.68zM3.198%204.141c0%20.152-.123.276-.276.276s-.275-.124-.275-.276.123-.276.276-.276.275.124.275.276zM1.375%208.964c0-.52.103-1.035.288-1.52.466.394%201.06.64%201.717.64%201.144%200%202.116-.725%202.499-1.738.383%201.012%201.355%201.738%202.499%201.738.867%200%201.631-.421%202.121-1.062.307.605.478%201.267.478%201.942%200%202.486-2.153%204.51-4.801%204.51s-4.801-2.023-4.801-4.51zm24.342%2019.349c-.985.498-2.267.168-3.813-.979-3.073-2.281-5.453-3.199-7.813-.705-1.315%201.391-4.163%203.365-8.423.97-3.174-1.786-2.239-6.266-1.261-9.479l.146-.492c.276-1.02.395-2.457.444-3.268a6.11%206.11%200%200%200%201.18.115%206.01%206.01%200%200%200%202.536-.562l-.006.175c-.802.215-1.848.612-2.021%201.25-.079.295.021.601.274.837.219.203.415.364.598.501-.667.304-1.243.698-1.311%201.179-.02.144-.022.507.393.787.213.144.395.26.564.365-1.285.521-1.361.96-1.381%201.126-.018.142-.011.496.427.746l.854.489c-.473.389-.971.914-.999%201.429-.018.278.095.532.316.713.675.556%201.231.721%201.653.721.059%200%20.104-.014.158-.02.207.707.641%201.64%201.513%201.64h.013c.8-.008%201.236-.345%201.462-.626.173-.216.268-.457.325-.692.424.195.93.374%201.372.374.151%200%20.294-.021.423-.068.732-.27.944-.704.993-1.021.009-.061.003-.119.002-.179.266.086.538.147.789.147.15%200%20.294-.021.423-.069.542-.2.797-.489.914-.754.237.147.478.258.704.288.106.014.205.021.296.021.356%200%20.595-.101.767-.229.438.435%201.094.992%201.656%201.067.106.014.205.021.296.021a1.56%201.56%200%200%200%20.323-.035c.17.575.453%201.289.866%201.605.358.273.665.362.914.362a.99.99%200%200%200%20.421-.093%201.03%201.03%200%200%200%20.245-.164c.168.428.39.846.68%201.068.358.273.665.362.913.362a.99.99%200%200%200%20.421-.093c.317-.148.512-.448.639-.762.251.157.495.257.726.257.127%200%20.25-.024.37-.071.427-.17.706-.617.841-1.314.022-.015.047-.022.068-.038.067-.051.133-.104.196-.159-.443%201.486-1.107%202.761-2.086%203.257zM8.66%209.925a.5.5%200%201%200-1%200c0%20.653-.818%201.205-1.787%201.205s-1.787-.552-1.787-1.205a.5.5%200%201%200-1%200c0%201.216%201.25%202.205%202.787%202.205s2.787-.989%202.787-2.205zm4.4%2015.965l-.208.097c-2.661%201.258-4.708%201.436-6.086.527-1.542-1.017-1.88-3.19-1.844-4.198a.4.4%200%200%200-.385-.414c-.242-.029-.406.164-.414.385-.046%201.249.367%203.686%202.202%204.896.708.467%201.547.7%202.51.7%201.248%200%202.706-.392%204.362-1.174l.185-.086a.4.4%200%200%200%20.205-.527c-.089-.204-.326-.291-.527-.206zM9.547%202.292c.093.077.205.114.317.114a.5.5%200%200%200%20.318-.886L8.817.397a.5.5%200%200%200-.703.068.5.5%200%200%200%20.069.703l1.364%201.124zm-7.661-.065c.086%200%20.173-.022.253-.068l1.523-.893a.5.5%200%200%200-.506-.863l-1.523.892a.5.5%200%200%200-.179.685c.094.158.261.247.432.247z%22%20transform%3D%22matrix%28-1%200%200%201%2058%200%29%22%20fill%3D%22%233bb300%22/%3E%3Cpath%20d%3D%22M.3%2021.86V10.18q0-.46.02-.68.04-.22.18-.5.28-.54%201.34-.54%201.06%200%201.42.28.38.26.44.78.76-1.04%202.38-1.04%201.64%200%203.1%201.54%201.46%201.54%201.46%203.58%200%202.04-1.46%203.58-1.44%201.54-3.08%201.54-1.64%200-2.38-.92v4.04q0%20.46-.04.68-.02.22-.18.5-.14.3-.5.42-.36.12-.98.12-.62%200-1-.12-.36-.12-.52-.4-.14-.28-.18-.5-.02-.22-.02-.68zm3.96-9.42q-.46.54-.46%201.18%200%20.64.46%201.18.48.52%201.2.52.74%200%201.24-.52.52-.52.52-1.18%200-.66-.48-1.18-.48-.54-1.26-.54-.76%200-1.22.54zm14.741-8.36q.16-.3.54-.42.38-.12%201-.12.64%200%201.02.12.38.12.52.42.16.3.18.54.04.22.04.68v11.94q0%20.46-.04.7-.02.22-.18.5-.3.54-1.7.54-1.38%200-1.54-.98-.84.96-2.34.96-1.8%200-3.28-1.56-1.48-1.58-1.48-3.66%200-2.1%201.48-3.68%201.5-1.58%203.28-1.58%201.48%200%202.3%201v-4.2q0-.46.02-.68.04-.24.18-.52zm-3.24%2010.86q.52.54%201.26.54.74%200%201.22-.54.5-.54.5-1.18%200-.66-.48-1.22-.46-.56-1.26-.56-.8%200-1.28.56-.48.54-.48%201.2%200%20.66.52%201.2zm7.833-1.2q0-2.4%201.68-3.96%201.68-1.56%203.84-1.56%202.16%200%203.82%201.56%201.66%201.54%201.66%203.94%200%201.66-.86%202.96-.86%201.28-2.1%201.9-1.22.6-2.54.6-1.32%200-2.56-.64-1.24-.66-2.1-1.92-.84-1.28-.84-2.88zm4.18%201.44q.64.48%201.3.48.66%200%201.32-.5.66-.5.66-1.48%200-.98-.62-1.46-.62-.48-1.34-.48-.72%200-1.34.5-.62.5-.62%201.48%200%20.96.64%201.46zm11.412-1.44q0%20.84.56%201.32.56.46%201.18.46.64%200%201.18-.36.56-.38.9-.38.6%200%201.46%201.06.46.58.46%201.04%200%20.76-1.1%201.42-1.14.8-2.8.8-1.86%200-3.58-1.34-.82-.64-1.34-1.7-.52-1.08-.52-2.36%200-1.3.52-2.34.52-1.06%201.34-1.7%201.66-1.32%203.54-1.32.76%200%201.48.22.72.2%201.06.4l.32.2q.36.24.56.38.52.4.52.92%200%20.5-.42%201.14-.72%201.1-1.38%201.1-.38%200-1.08-.44-.36-.34-1.04-.34-.66%200-1.24.48-.58.48-.58%201.34z%22%20fill%3D%22green%22/%3E%3C/svg%3E"/>
        </a>
</div>
    </nav>
    <main class="pdoc">
            <section class="module-info">
                    <h1 class="modulename">
<a href="./../fst.html">fst</a><wbr>.view    </h1>

                
                        <input id="mod-view-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">

                        <label class="view-source-button" for="mod-view-view-source"><span>View Source</span></label>

                        <div class="pdoc-code codehilite"><pre><span></span><span id="L-1"><a href="#L-1"><span class="linenos">  1</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">__future__</span><span class="w"> </span><span class="kn">import</span> <span class="n">annotations</span>
</span><span id="L-2"><a href="#L-2"><span class="linenos">  2</span></a>
</span><span id="L-3"><a href="#L-3"><span class="linenos">  3</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">ast</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</span><span id="L-4"><a href="#L-4"><span class="linenos">  4</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">builtins</span><span class="w"> </span><span class="kn">import</span> <span class="nb">slice</span>
</span><span id="L-5"><a href="#L-5"><span class="linenos">  5</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">typing</span><span class="w"> </span><span class="kn">import</span> <span class="n">Any</span><span class="p">,</span> <span class="n">Literal</span>
</span><span id="L-6"><a href="#L-6"><span class="linenos">  6</span></a>
</span><span id="L-7"><a href="#L-7"><span class="linenos">  7</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.astutil</span><span class="w"> </span><span class="kn">import</span> <span class="o">*</span>
</span><span id="L-8"><a href="#L-8"><span class="linenos">  8</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.misc</span><span class="w"> </span><span class="kn">import</span> <span class="n">Code</span><span class="p">,</span> <span class="n">_fixup_one_index</span><span class="p">,</span> <span class="n">_fixup_slice_indices</span>
</span><span id="L-9"><a href="#L-9"><span class="linenos">  9</span></a>
</span><span id="L-10"><a href="#L-10"><span class="linenos"> 10</span></a>
</span><span id="L-11"><a href="#L-11"><span class="linenos"> 11</span></a><span class="k">class</span><span class="w"> </span><span class="nc">fstview</span><span class="p">:</span>
</span><span id="L-12"><a href="#L-12"><span class="linenos"> 12</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;View for a list of `AST` nodes in a body, or any other field which is a list of values (not necessarily `AST`</span>
</span><span id="L-13"><a href="#L-13"><span class="linenos"> 13</span></a><span class="sd">    nodes), of an `FST` node.</span>
</span><span id="L-14"><a href="#L-14"><span class="linenos"> 14</span></a>
</span><span id="L-15"><a href="#L-15"><span class="linenos"> 15</span></a><span class="sd">    This object acts as a list of corresponding `FST` nodes if applicable or otherwise strings (for example for a list</span>
</span><span id="L-16"><a href="#L-16"><span class="linenos"> 16</span></a><span class="sd">    of `Global.names`). It is only meant for short term convenience along the lines of `fst.body.append(...)`. Outside</span>
</span><span id="L-17"><a href="#L-17"><span class="linenos"> 17</span></a><span class="sd">    of this use, operations on the target `FST` node of the view which are not effectuated through the view may</span>
</span><span id="L-18"><a href="#L-18"><span class="linenos"> 18</span></a><span class="sd">    invalidate the `start`  and `stop` positions and even the `fst` stored in the view if they change the size of the</span>
</span><span id="L-19"><a href="#L-19"><span class="linenos"> 19</span></a><span class="sd">    list of nodes or reparse. Especially raw operations which reparse entire statements and can easily invalidate an</span>
</span><span id="L-20"><a href="#L-20"><span class="linenos"> 20</span></a><span class="sd">    `fstview` even if performed directly on it.</span>
</span><span id="L-21"><a href="#L-21"><span class="linenos"> 21</span></a>
</span><span id="L-22"><a href="#L-22"><span class="linenos"> 22</span></a><span class="sd">    Nodes can be gotten or put via indexing. Nodes which are accessed through indexing (normal or slice) are not</span>
</span><span id="L-23"><a href="#L-23"><span class="linenos"> 23</span></a><span class="sd">    automatically copied, if a copy is desired then do `fst.body[start:stop].copy()`. Slice assignments also work but</span>
</span><span id="L-24"><a href="#L-24"><span class="linenos"> 24</span></a><span class="sd">    will always assign a slice to the range. If you want to assign an individual item to this range or a subrange then</span>
</span><span id="L-25"><a href="#L-25"><span class="linenos"> 25</span></a><span class="sd">    use `fst.body[start:stop].replace(..., one=True)`.</span>
</span><span id="L-26"><a href="#L-26"><span class="linenos"> 26</span></a>
</span><span id="L-27"><a href="#L-27"><span class="linenos"> 27</span></a><span class="sd">    **WARNING!** Keep in mind that operations on NODES or even CHILD VIEWS instead of on THIS VIEW will not update this</span>
</span><span id="L-28"><a href="#L-28"><span class="linenos"> 28</span></a><span class="sd">    view. Do not hold on to views, use them and discard.</span>
</span><span id="L-29"><a href="#L-29"><span class="linenos"> 29</span></a>
</span><span id="L-30"><a href="#L-30"><span class="linenos"> 30</span></a><span class="sd">    ```py</span>
</span><span id="L-31"><a href="#L-31"><span class="linenos"> 31</span></a><span class="sd">    &gt;&gt;&gt; view = FST(&#39;[1, 2, 3]&#39;).elts</span>
</span><span id="L-32"><a href="#L-32"><span class="linenos"> 32</span></a>
</span><span id="L-33"><a href="#L-33"><span class="linenos"> 33</span></a><span class="sd">    &gt;&gt;&gt; view[1].remove()  # operation on node</span>
</span><span id="L-34"><a href="#L-34"><span class="linenos"> 34</span></a>
</span><span id="L-35"><a href="#L-35"><span class="linenos"> 35</span></a><span class="sd">    &gt;&gt;&gt; view  # notice the size of the view is 3 but there are only two elements</span>
</span><span id="L-36"><a href="#L-36"><span class="linenos"> 36</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,6&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;]&gt;</span>
</span><span id="L-37"><a href="#L-37"><span class="linenos"> 37</span></a>
</span><span id="L-38"><a href="#L-38"><span class="linenos"> 38</span></a><span class="sd">    &gt;&gt;&gt; view = FST(&#39;[1, 2, 3]&#39;).elts</span>
</span><span id="L-39"><a href="#L-39"><span class="linenos"> 39</span></a>
</span><span id="L-40"><a href="#L-40"><span class="linenos"> 40</span></a><span class="sd">    &gt;&gt;&gt; view[1:].cut()  # not an operation on this view but a child view</span>
</span><span id="L-41"><a href="#L-41"><span class="linenos"> 41</span></a><span class="sd">    &lt;List ROOT 0,0..0,6&gt;</span>
</span><span id="L-42"><a href="#L-42"><span class="linenos"> 42</span></a>
</span><span id="L-43"><a href="#L-43"><span class="linenos"> 43</span></a><span class="sd">    &gt;&gt;&gt; view  # WRONG again</span>
</span><span id="L-44"><a href="#L-44"><span class="linenos"> 44</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,3&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;]&gt;</span>
</span><span id="L-45"><a href="#L-45"><span class="linenos"> 45</span></a><span class="sd">    ```</span>
</span><span id="L-46"><a href="#L-46"><span class="linenos"> 46</span></a>
</span><span id="L-47"><a href="#L-47"><span class="linenos"> 47</span></a><span class="sd">    This object is meant to be, and is normally created automatically by accessing `AST` list fields on an `FST` node.</span>
</span><span id="L-48"><a href="#L-48"><span class="linenos"> 48</span></a>
</span><span id="L-49"><a href="#L-49"><span class="linenos"> 49</span></a><span class="sd">    **Examples:**</span>
</span><span id="L-50"><a href="#L-50"><span class="linenos"> 50</span></a><span class="sd">    ```py</span>
</span><span id="L-51"><a href="#L-51"><span class="linenos"> 51</span></a><span class="sd">    &gt;&gt;&gt; f = FST(&#39;[0, 1, 2, 3]&#39;)</span>
</span><span id="L-52"><a href="#L-52"><span class="linenos"> 52</span></a><span class="sd">    &gt;&gt;&gt; f</span>
</span><span id="L-53"><a href="#L-53"><span class="linenos"> 53</span></a><span class="sd">    &lt;List ROOT 0,0..0,12&gt;</span>
</span><span id="L-54"><a href="#L-54"><span class="linenos"> 54</span></a>
</span><span id="L-55"><a href="#L-55"><span class="linenos"> 55</span></a><span class="sd">    &gt;&gt;&gt; f.elts</span>
</span><span id="L-56"><a href="#L-56"><span class="linenos"> 56</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,12&gt;.elts[0:4] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;, &lt;Constant 0,10..0,11&gt;]&gt;</span>
</span><span id="L-57"><a href="#L-57"><span class="linenos"> 57</span></a>
</span><span id="L-58"><a href="#L-58"><span class="linenos"> 58</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1]</span>
</span><span id="L-59"><a href="#L-59"><span class="linenos"> 59</span></a><span class="sd">    &lt;Constant 0,4..0,5&gt;</span>
</span><span id="L-60"><a href="#L-60"><span class="linenos"> 60</span></a>
</span><span id="L-61"><a href="#L-61"><span class="linenos"> 61</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1].src</span>
</span><span id="L-62"><a href="#L-62"><span class="linenos"> 62</span></a><span class="sd">    &#39;1&#39;</span>
</span><span id="L-63"><a href="#L-63"><span class="linenos"> 63</span></a>
</span><span id="L-64"><a href="#L-64"><span class="linenos"> 64</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1:3]</span>
</span><span id="L-65"><a href="#L-65"><span class="linenos"> 65</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,12&gt;.elts[1:3] [&lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;]&gt;</span>
</span><span id="L-66"><a href="#L-66"><span class="linenos"> 66</span></a>
</span><span id="L-67"><a href="#L-67"><span class="linenos"> 67</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1:3].copy()</span>
</span><span id="L-68"><a href="#L-68"><span class="linenos"> 68</span></a><span class="sd">    &lt;List ROOT 0,0..0,6&gt;</span>
</span><span id="L-69"><a href="#L-69"><span class="linenos"> 69</span></a>
</span><span id="L-70"><a href="#L-70"><span class="linenos"> 70</span></a><span class="sd">    &gt;&gt;&gt; _.src</span>
</span><span id="L-71"><a href="#L-71"><span class="linenos"> 71</span></a><span class="sd">    &#39;[1, 2]&#39;</span>
</span><span id="L-72"><a href="#L-72"><span class="linenos"> 72</span></a>
</span><span id="L-73"><a href="#L-73"><span class="linenos"> 73</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1:3] = &#39;[4]&#39;</span>
</span><span id="L-74"><a href="#L-74"><span class="linenos"> 74</span></a><span class="sd">    &gt;&gt;&gt; f.src</span>
</span><span id="L-75"><a href="#L-75"><span class="linenos"> 75</span></a><span class="sd">    &#39;[0, 4, 3]&#39;</span>
</span><span id="L-76"><a href="#L-76"><span class="linenos"> 76</span></a>
</span><span id="L-77"><a href="#L-77"><span class="linenos"> 77</span></a><span class="sd">    &gt;&gt;&gt; del f.elts[1:]</span>
</span><span id="L-78"><a href="#L-78"><span class="linenos"> 78</span></a><span class="sd">    &gt;&gt;&gt; f.src</span>
</span><span id="L-79"><a href="#L-79"><span class="linenos"> 79</span></a><span class="sd">    &#39;[0]&#39;</span>
</span><span id="L-80"><a href="#L-80"><span class="linenos"> 80</span></a>
</span><span id="L-81"><a href="#L-81"><span class="linenos"> 81</span></a><span class="sd">    &gt;&gt;&gt; f.elts[0] = &#39;*star&#39;</span>
</span><span id="L-82"><a href="#L-82"><span class="linenos"> 82</span></a><span class="sd">    &gt;&gt;&gt; f.src</span>
</span><span id="L-83"><a href="#L-83"><span class="linenos"> 83</span></a><span class="sd">    &#39;[*star]&#39;</span>
</span><span id="L-84"><a href="#L-84"><span class="linenos"> 84</span></a><span class="sd">    ```</span>
</span><span id="L-85"><a href="#L-85"><span class="linenos"> 85</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="L-86"><a href="#L-86"><span class="linenos"> 86</span></a>
</span><span id="L-87"><a href="#L-87"><span class="linenos"> 87</span></a>    <span class="n">fst</span><span class="p">:</span>   <span class="n">FST</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;The target `FST` node this view references.&quot;&quot;&quot;</span>
</span><span id="L-88"><a href="#L-88"><span class="linenos"> 88</span></a>    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;The target field this view references.&quot;&quot;&quot;</span>
</span><span id="L-89"><a href="#L-89"><span class="linenos"> 89</span></a>    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;Start position within the target field list this view references.&quot;&quot;&quot;</span>
</span><span id="L-90"><a href="#L-90"><span class="linenos"> 90</span></a>    <span class="n">stop</span><span class="p">:</span>  <span class="nb">int</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;One past the last element within the target field list this view references.&quot;&quot;&quot;</span>
</span><span id="L-91"><a href="#L-91"><span class="linenos"> 91</span></a>
</span><span id="L-92"><a href="#L-92"><span class="linenos"> 92</span></a>    <span class="n">is_FST</span> <span class="o">=</span> <span class="kc">False</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;@private&quot;&quot;&quot;</span>  <span class="c1"># for quick checks vs. `FST`</span>
</span><span id="L-93"><a href="#L-93"><span class="linenos"> 93</span></a>
</span><span id="L-94"><a href="#L-94"><span class="linenos"> 94</span></a>    <span class="nd">@property</span>
</span><span id="L-95"><a href="#L-95"><span class="linenos"> 95</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="L-96"><a href="#L-96"><span class="linenos"> 96</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Root node of the `FST` node this view belongs to.&quot;&quot;&quot;</span>
</span><span id="L-97"><a href="#L-97"><span class="linenos"> 97</span></a>
</span><span id="L-98"><a href="#L-98"><span class="linenos"> 98</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">root</span>
</span><span id="L-99"><a href="#L-99"><span class="linenos"> 99</span></a>
</span><span id="L-100"><a href="#L-100"><span class="linenos">100</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fst</span><span class="p">:</span> <span class="n">FST</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stop</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-101"><a href="#L-101"><span class="linenos">101</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;@private&quot;&quot;&quot;</span>
</span><span id="L-102"><a href="#L-102"><span class="linenos">102</span></a>
</span><span id="L-103"><a href="#L-103"><span class="linenos">103</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span>   <span class="o">=</span> <span class="n">fst</span>
</span><span id="L-104"><a href="#L-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="n">field</span>
</span><span id="L-105"><a href="#L-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="L-106"><a href="#L-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span>  <span class="o">=</span> <span class="n">stop</span>
</span><span id="L-107"><a href="#L-107"><span class="linenos">107</span></a>
</span><span id="L-108"><a href="#L-108"><span class="linenos">108</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="L-109"><a href="#L-109"><span class="linenos">109</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="si">!r}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="si">}</span><span class="s1">[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="si">}</span><span class="s1">] </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s1">&gt;&#39;</span>
</span><span id="L-110"><a href="#L-110"><span class="linenos">110</span></a>
</span><span id="L-111"><a href="#L-111"><span class="linenos">111</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="L-112"><a href="#L-112"><span class="linenos">112</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
</span><span id="L-113"><a href="#L-113"><span class="linenos">113</span></a>
</span><span id="L-114"><a href="#L-114"><span class="linenos">114</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="L-115"><a href="#L-115"><span class="linenos">115</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get a single item or a slice view from this slice view. All indices (including negative) are relative to the</span>
</span><span id="L-116"><a href="#L-116"><span class="linenos">116</span></a><span class="sd">        bounds of this view. This is just an access, not a cut or a copy, so if you want a copy you must explicitly do</span>
</span><span id="L-117"><a href="#L-117"><span class="linenos">117</span></a><span class="sd">        `.copy()` on the returned value.</span>
</span><span id="L-118"><a href="#L-118"><span class="linenos">118</span></a>
</span><span id="L-119"><a href="#L-119"><span class="linenos">119</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when dealing with</span>
</span><span id="L-120"><a href="#L-120"><span class="linenos">120</span></a><span class="sd">        return values which may be `None` or may not be `FST` nodes.</span>
</span><span id="L-121"><a href="#L-121"><span class="linenos">121</span></a>
</span><span id="L-122"><a href="#L-122"><span class="linenos">122</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-123"><a href="#L-123"><span class="linenos">123</span></a><span class="sd">        - `idx`: The index or `slice` where to get the element(s) from. If is a single string then this it will return</span>
</span><span id="L-124"><a href="#L-124"><span class="linenos">124</span></a><span class="sd">            the first function, class or variable assignment to the name matching this string (if is a list of</span>
</span><span id="L-125"><a href="#L-125"><span class="linenos">125</span></a><span class="sd">            statements, error otherwise). This is just a convenience and will probably change / expand in the future.</span>
</span><span id="L-126"><a href="#L-126"><span class="linenos">126</span></a>
</span><span id="L-127"><a href="#L-127"><span class="linenos">127</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-128"><a href="#L-128"><span class="linenos">128</span></a><span class="sd">        - `FST | fstview`: Either a single `FST` node if accessing a single item or a new `fstview` view according to</span>
</span><span id="L-129"><a href="#L-129"><span class="linenos">129</span></a><span class="sd">            the slice passed.</span>
</span><span id="L-130"><a href="#L-130"><span class="linenos">130</span></a>
</span><span id="L-131"><a href="#L-131"><span class="linenos">131</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-132"><a href="#L-132"><span class="linenos">132</span></a><span class="sd">        ```py</span>
</span><span id="L-133"><a href="#L-133"><span class="linenos">133</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1].src</span>
</span><span id="L-134"><a href="#L-134"><span class="linenos">134</span></a><span class="sd">        &#39;1&#39;</span>
</span><span id="L-135"><a href="#L-135"><span class="linenos">135</span></a>
</span><span id="L-136"><a href="#L-136"><span class="linenos">136</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[:3]</span>
</span><span id="L-137"><a href="#L-137"><span class="linenos">137</span></a><span class="sd">        &lt;&lt;List ROOT 0,0..0,12&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;]&gt;</span>
</span><span id="L-138"><a href="#L-138"><span class="linenos">138</span></a>
</span><span id="L-139"><a href="#L-139"><span class="linenos">139</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[:3].copy().src</span>
</span><span id="L-140"><a href="#L-140"><span class="linenos">140</span></a><span class="sd">        &#39;[0, 1, 2]&#39;</span>
</span><span id="L-141"><a href="#L-141"><span class="linenos">141</span></a>
</span><span id="L-142"><a href="#L-142"><span class="linenos">142</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[-3:]</span>
</span><span id="L-143"><a href="#L-143"><span class="linenos">143</span></a><span class="sd">        &lt;&lt;List ROOT 0,0..0,12&gt;.elts[1:4] [&lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;, &lt;Constant 0,10..0,11&gt;]&gt;</span>
</span><span id="L-144"><a href="#L-144"><span class="linenos">144</span></a>
</span><span id="L-145"><a href="#L-145"><span class="linenos">145</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;def fun(): pass\nclass cls: pass\nvar = val&#39;).body[&#39;cls&#39;]</span>
</span><span id="L-146"><a href="#L-146"><span class="linenos">146</span></a><span class="sd">        &lt;ClassDef 1,0..1,15&gt;</span>
</span><span id="L-147"><a href="#L-147"><span class="linenos">147</span></a>
</span><span id="L-148"><a href="#L-148"><span class="linenos">148</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;global a, b, c&#39;).names</span>
</span><span id="L-149"><a href="#L-149"><span class="linenos">149</span></a><span class="sd">        &lt;&lt;Global ROOT 0,0..0,14&gt;.names[0:3] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]&gt;</span>
</span><span id="L-150"><a href="#L-150"><span class="linenos">150</span></a>
</span><span id="L-151"><a href="#L-151"><span class="linenos">151</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;global a, b, c&#39;).names[1]</span>
</span><span id="L-152"><a href="#L-152"><span class="linenos">152</span></a><span class="sd">        &#39;b&#39;</span>
</span><span id="L-153"><a href="#L-153"><span class="linenos">153</span></a><span class="sd">        ```</span>
</span><span id="L-154"><a href="#L-154"><span class="linenos">154</span></a><span class="sd">        @public</span>
</span><span id="L-155"><a href="#L-155"><span class="linenos">155</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-156"><a href="#L-156"><span class="linenos">156</span></a>
</span><span id="L-157"><a href="#L-157"><span class="linenos">157</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-158"><a href="#L-158"><span class="linenos">158</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-159"><a href="#L-159"><span class="linenos">159</span></a>
</span><span id="L-160"><a href="#L-160"><span class="linenos">160</span></a>            <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)[</span><span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">],</span> <span class="n">AST</span><span class="p">)</span> <span class="k">else</span> <span class="n">a</span>
</span><span id="L-161"><a href="#L-161"><span class="linenos">161</span></a>
</span><span id="L-162"><a href="#L-162"><span class="linenos">162</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="L-163"><a href="#L-163"><span class="linenos">163</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="n">get_func_class_or_ass_by_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">],</span> <span class="n">idx</span><span class="p">)):</span>
</span><span id="L-164"><a href="#L-164"><span class="linenos">164</span></a>                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;function, class or variable &#39;</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
</span><span id="L-165"><a href="#L-165"><span class="linenos">165</span></a>
</span><span id="L-166"><a href="#L-166"><span class="linenos">166</span></a>            <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span>
</span><span id="L-167"><a href="#L-167"><span class="linenos">167</span></a>
</span><span id="L-168"><a href="#L-168"><span class="linenos">168</span></a>        <span class="k">if</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-169"><a href="#L-169"><span class="linenos">169</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="L-170"><a href="#L-170"><span class="linenos">170</span></a>
</span><span id="L-171"><a href="#L-171"><span class="linenos">171</span></a>        <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="L-172"><a href="#L-172"><span class="linenos">172</span></a>
</span><span id="L-173"><a href="#L-173"><span class="linenos">173</span></a>        <span class="k">return</span> <span class="n">fstview</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">)</span>
</span><span id="L-174"><a href="#L-174"><span class="linenos">174</span></a>
</span><span id="L-175"><a href="#L-175"><span class="linenos">175</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span> <span class="o">|</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="L-176"><a href="#L-176"><span class="linenos">176</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a single item or a slice view in this slice view. All indices (including negative) are relative to the</span>
</span><span id="L-177"><a href="#L-177"><span class="linenos">177</span></a><span class="sd">        bounds of this view. This is not just with a set, it is a full `FST` operation.</span>
</span><span id="L-178"><a href="#L-178"><span class="linenos">178</span></a>
</span><span id="L-179"><a href="#L-179"><span class="linenos">179</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when assigning</span>
</span><span id="L-180"><a href="#L-180"><span class="linenos">180</span></a><span class="sd">        values.</span>
</span><span id="L-181"><a href="#L-181"><span class="linenos">181</span></a>
</span><span id="L-182"><a href="#L-182"><span class="linenos">182</span></a><span class="sd">        **WARNING!** Currently, for non-AST views, individual value assignment works but slices do not yet.</span>
</span><span id="L-183"><a href="#L-183"><span class="linenos">183</span></a>
</span><span id="L-184"><a href="#L-184"><span class="linenos">184</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-185"><a href="#L-185"><span class="linenos">185</span></a><span class="sd">        - `idx`: The index or `slice` where to put the element(s).</span>
</span><span id="L-186"><a href="#L-186"><span class="linenos">186</span></a>
</span><span id="L-187"><a href="#L-187"><span class="linenos">187</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-188"><a href="#L-188"><span class="linenos">188</span></a><span class="sd">        ```py</span>
</span><span id="L-189"><a href="#L-189"><span class="linenos">189</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1] = &#39;4&#39;; f.src</span>
</span><span id="L-190"><a href="#L-190"><span class="linenos">190</span></a><span class="sd">        &#39;[0, 4, 2, 3]&#39;</span>
</span><span id="L-191"><a href="#L-191"><span class="linenos">191</span></a>
</span><span id="L-192"><a href="#L-192"><span class="linenos">192</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3] = &#39;[5]&#39;; f.src</span>
</span><span id="L-193"><a href="#L-193"><span class="linenos">193</span></a><span class="sd">        &#39;[5, 3]&#39;</span>
</span><span id="L-194"><a href="#L-194"><span class="linenos">194</span></a>
</span><span id="L-195"><a href="#L-195"><span class="linenos">195</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3] = &#39;5,&#39;; f.src</span>
</span><span id="L-196"><a href="#L-196"><span class="linenos">196</span></a><span class="sd">        &#39;[5, 3]&#39;</span>
</span><span id="L-197"><a href="#L-197"><span class="linenos">197</span></a>
</span><span id="L-198"><a href="#L-198"><span class="linenos">198</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[-3:] = &#39;[6]&#39;; f.src</span>
</span><span id="L-199"><a href="#L-199"><span class="linenos">199</span></a><span class="sd">        &#39;[0, 6]&#39;</span>
</span><span id="L-200"><a href="#L-200"><span class="linenos">200</span></a>
</span><span id="L-201"><a href="#L-201"><span class="linenos">201</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:] = &#39;7, 8&#39;; f.src</span>
</span><span id="L-202"><a href="#L-202"><span class="linenos">202</span></a><span class="sd">        &#39;[7, 8]&#39;</span>
</span><span id="L-203"><a href="#L-203"><span class="linenos">203</span></a>
</span><span id="L-204"><a href="#L-204"><span class="linenos">204</span></a><span class="sd">        &gt;&gt;&gt; f = FST(&#39;[0, 1, 2, 3]&#39;)</span>
</span><span id="L-205"><a href="#L-205"><span class="linenos">205</span></a><span class="sd">        &gt;&gt;&gt; f.elts[2:2] = f.elts[1:3].copy()</span>
</span><span id="L-206"><a href="#L-206"><span class="linenos">206</span></a><span class="sd">        &gt;&gt;&gt; f.src</span>
</span><span id="L-207"><a href="#L-207"><span class="linenos">207</span></a><span class="sd">        &#39;[0, 1, 1, 2, 2, 3]&#39;</span>
</span><span id="L-208"><a href="#L-208"><span class="linenos">208</span></a><span class="sd">        ```</span>
</span><span id="L-209"><a href="#L-209"><span class="linenos">209</span></a><span class="sd">        @public</span>
</span><span id="L-210"><a href="#L-210"><span class="linenos">210</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-211"><a href="#L-211"><span class="linenos">211</span></a>
</span><span id="L-212"><a href="#L-212"><span class="linenos">212</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-213"><a href="#L-213"><span class="linenos">213</span></a>            <span class="n">idx</span>        <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-214"><a href="#L-214"><span class="linenos">214</span></a>            <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-215"><a href="#L-215"><span class="linenos">215</span></a>
</span><span id="L-216"><a href="#L-216"><span class="linenos">216</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span>
</span><span id="L-217"><a href="#L-217"><span class="linenos">217</span></a>
</span><span id="L-218"><a href="#L-218"><span class="linenos">218</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-219"><a href="#L-219"><span class="linenos">219</span></a>
</span><span id="L-220"><a href="#L-220"><span class="linenos">220</span></a>        <span class="k">elif</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-221"><a href="#L-221"><span class="linenos">221</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="L-222"><a href="#L-222"><span class="linenos">222</span></a>
</span><span id="L-223"><a href="#L-223"><span class="linenos">223</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-224"><a href="#L-224"><span class="linenos">224</span></a>            <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="L-225"><a href="#L-225"><span class="linenos">225</span></a>            <span class="n">len_before</span>          <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-226"><a href="#L-226"><span class="linenos">226</span></a>
</span><span id="L-227"><a href="#L-227"><span class="linenos">227</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="L-228"><a href="#L-228"><span class="linenos">228</span></a>
</span><span id="L-229"><a href="#L-229"><span class="linenos">229</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-230"><a href="#L-230"><span class="linenos">230</span></a>
</span><span id="L-231"><a href="#L-231"><span class="linenos">231</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">):</span>
</span><span id="L-232"><a href="#L-232"><span class="linenos">232</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a single item or a slice from this slice view. All indices (including negative) are relative to the</span>
</span><span id="L-233"><a href="#L-233"><span class="linenos">233</span></a><span class="sd">        bounds of this view.</span>
</span><span id="L-234"><a href="#L-234"><span class="linenos">234</span></a>
</span><span id="L-235"><a href="#L-235"><span class="linenos">235</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when assigning</span>
</span><span id="L-236"><a href="#L-236"><span class="linenos">236</span></a><span class="sd">        values.</span>
</span><span id="L-237"><a href="#L-237"><span class="linenos">237</span></a>
</span><span id="L-238"><a href="#L-238"><span class="linenos">238</span></a><span class="sd">        **WARNING!** Currently, for non-AST views, deletion is not supported</span>
</span><span id="L-239"><a href="#L-239"><span class="linenos">239</span></a>
</span><span id="L-240"><a href="#L-240"><span class="linenos">240</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-241"><a href="#L-241"><span class="linenos">241</span></a><span class="sd">        - `idx`: The index or `slice` to delete.</span>
</span><span id="L-242"><a href="#L-242"><span class="linenos">242</span></a>
</span><span id="L-243"><a href="#L-243"><span class="linenos">243</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-244"><a href="#L-244"><span class="linenos">244</span></a><span class="sd">        ```py</span>
</span><span id="L-245"><a href="#L-245"><span class="linenos">245</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1]; f.src</span>
</span><span id="L-246"><a href="#L-246"><span class="linenos">246</span></a><span class="sd">        &#39;[0, 2, 3]&#39;</span>
</span><span id="L-247"><a href="#L-247"><span class="linenos">247</span></a>
</span><span id="L-248"><a href="#L-248"><span class="linenos">248</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3]; f.src</span>
</span><span id="L-249"><a href="#L-249"><span class="linenos">249</span></a><span class="sd">        &#39;[3]&#39;</span>
</span><span id="L-250"><a href="#L-250"><span class="linenos">250</span></a>
</span><span id="L-251"><a href="#L-251"><span class="linenos">251</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[-3:]; f.src</span>
</span><span id="L-252"><a href="#L-252"><span class="linenos">252</span></a><span class="sd">        &#39;[0]&#39;</span>
</span><span id="L-253"><a href="#L-253"><span class="linenos">253</span></a>
</span><span id="L-254"><a href="#L-254"><span class="linenos">254</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:]; f.src</span>
</span><span id="L-255"><a href="#L-255"><span class="linenos">255</span></a><span class="sd">        &#39;[]&#39;</span>
</span><span id="L-256"><a href="#L-256"><span class="linenos">256</span></a><span class="sd">        ```</span>
</span><span id="L-257"><a href="#L-257"><span class="linenos">257</span></a><span class="sd">        @public</span>
</span><span id="L-258"><a href="#L-258"><span class="linenos">258</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-259"><a href="#L-259"><span class="linenos">259</span></a>
</span><span id="L-260"><a href="#L-260"><span class="linenos">260</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="L-261"><a href="#L-261"><span class="linenos">261</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">((</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="L-262"><a href="#L-262"><span class="linenos">262</span></a>
</span><span id="L-263"><a href="#L-263"><span class="linenos">263</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="L-264"><a href="#L-264"><span class="linenos">264</span></a>
</span><span id="L-265"><a href="#L-265"><span class="linenos">265</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="L-266"><a href="#L-266"><span class="linenos">266</span></a>
</span><span id="L-267"><a href="#L-267"><span class="linenos">267</span></a>        <span class="k">elif</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="L-268"><a href="#L-268"><span class="linenos">268</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="L-269"><a href="#L-269"><span class="linenos">269</span></a>
</span><span id="L-270"><a href="#L-270"><span class="linenos">270</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="L-271"><a href="#L-271"><span class="linenos">271</span></a>            <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">((</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="L-272"><a href="#L-272"><span class="linenos">272</span></a>
</span><span id="L-273"><a href="#L-273"><span class="linenos">273</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="L-274"><a href="#L-274"><span class="linenos">274</span></a>
</span><span id="L-275"><a href="#L-275"><span class="linenos">275</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">idx_stop</span> <span class="o">-</span> <span class="n">idx_start</span><span class="p">))</span>
</span><span id="L-276"><a href="#L-276"><span class="linenos">276</span></a>
</span><span id="L-277"><a href="#L-277"><span class="linenos">277</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="L-278"><a href="#L-278"><span class="linenos">278</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Copy this slice to a new top-level tree, dedenting and fixing as necessary.</span>
</span><span id="L-279"><a href="#L-279"><span class="linenos">279</span></a>
</span><span id="L-280"><a href="#L-280"><span class="linenos">280</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-281"><a href="#L-281"><span class="linenos">281</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-282"><a href="#L-282"><span class="linenos">282</span></a>
</span><span id="L-283"><a href="#L-283"><span class="linenos">283</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-284"><a href="#L-284"><span class="linenos">284</span></a><span class="sd">        - `FST`: Copied slice.</span>
</span><span id="L-285"><a href="#L-285"><span class="linenos">285</span></a>
</span><span id="L-286"><a href="#L-286"><span class="linenos">286</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-287"><a href="#L-287"><span class="linenos">287</span></a><span class="sd">        ```py</span>
</span><span id="L-288"><a href="#L-288"><span class="linenos">288</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].copy().src</span>
</span><span id="L-289"><a href="#L-289"><span class="linenos">289</span></a><span class="sd">        &#39;[1, 2]&#39;</span>
</span><span id="L-290"><a href="#L-290"><span class="linenos">290</span></a><span class="sd">        ```</span>
</span><span id="L-291"><a href="#L-291"><span class="linenos">291</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-292"><a href="#L-292"><span class="linenos">292</span></a>
</span><span id="L-293"><a href="#L-293"><span class="linenos">293</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">get_slice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-294"><a href="#L-294"><span class="linenos">294</span></a>
</span><span id="L-295"><a href="#L-295"><span class="linenos">295</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="L-296"><a href="#L-296"><span class="linenos">296</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cut out this slice to a new top-level tree (if possible), dedenting and fixing as necessary. Cannot cut root</span>
</span><span id="L-297"><a href="#L-297"><span class="linenos">297</span></a><span class="sd">        node.</span>
</span><span id="L-298"><a href="#L-298"><span class="linenos">298</span></a>
</span><span id="L-299"><a href="#L-299"><span class="linenos">299</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-300"><a href="#L-300"><span class="linenos">300</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-301"><a href="#L-301"><span class="linenos">301</span></a>
</span><span id="L-302"><a href="#L-302"><span class="linenos">302</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-303"><a href="#L-303"><span class="linenos">303</span></a><span class="sd">        - `FST`: Cut slice.</span>
</span><span id="L-304"><a href="#L-304"><span class="linenos">304</span></a>
</span><span id="L-305"><a href="#L-305"><span class="linenos">305</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-306"><a href="#L-306"><span class="linenos">306</span></a><span class="sd">        ```py</span>
</span><span id="L-307"><a href="#L-307"><span class="linenos">307</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1:3].cut().src</span>
</span><span id="L-308"><a href="#L-308"><span class="linenos">308</span></a><span class="sd">        &#39;[1, 2]&#39;</span>
</span><span id="L-309"><a href="#L-309"><span class="linenos">309</span></a>
</span><span id="L-310"><a href="#L-310"><span class="linenos">310</span></a><span class="sd">        &gt;&gt;&gt; f.src</span>
</span><span id="L-311"><a href="#L-311"><span class="linenos">311</span></a><span class="sd">        &#39;[0, 3]&#39;</span>
</span><span id="L-312"><a href="#L-312"><span class="linenos">312</span></a><span class="sd">        ```</span>
</span><span id="L-313"><a href="#L-313"><span class="linenos">313</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-314"><a href="#L-314"><span class="linenos">314</span></a>
</span><span id="L-315"><a href="#L-315"><span class="linenos">315</span></a>        <span class="n">f</span>         <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">get_slice</span><span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-316"><a href="#L-316"><span class="linenos">316</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="L-317"><a href="#L-317"><span class="linenos">317</span></a>
</span><span id="L-318"><a href="#L-318"><span class="linenos">318</span></a>        <span class="k">return</span> <span class="n">f</span>
</span><span id="L-319"><a href="#L-319"><span class="linenos">319</span></a>
</span><span id="L-320"><a href="#L-320"><span class="linenos">320</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-321"><a href="#L-321"><span class="linenos">321</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace or delete (if `code=None`) this slice.</span>
</span><span id="L-322"><a href="#L-322"><span class="linenos">322</span></a>
</span><span id="L-323"><a href="#L-323"><span class="linenos">323</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-324"><a href="#L-324"><span class="linenos">324</span></a><span class="sd">        - `self`</span>
</span><span id="L-325"><a href="#L-325"><span class="linenos">325</span></a>
</span><span id="L-326"><a href="#L-326"><span class="linenos">326</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-327"><a href="#L-327"><span class="linenos">327</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to put. `None` to delete this slice.</span>
</span><span id="L-328"><a href="#L-328"><span class="linenos">328</span></a><span class="sd">        - `one`: If `True` then will replace the range of this slice with a single item. Otherwise `False` will attempt</span>
</span><span id="L-329"><a href="#L-329"><span class="linenos">329</span></a><span class="sd">            a slice replacement (type must be compatible).</span>
</span><span id="L-330"><a href="#L-330"><span class="linenos">330</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-331"><a href="#L-331"><span class="linenos">331</span></a>
</span><span id="L-332"><a href="#L-332"><span class="linenos">332</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-333"><a href="#L-333"><span class="linenos">333</span></a><span class="sd">        ```py</span>
</span><span id="L-334"><a href="#L-334"><span class="linenos">334</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].replace(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-335"><a href="#L-335"><span class="linenos">335</span></a><span class="sd">        &#39;[0, (4, 5), 3]&#39;</span>
</span><span id="L-336"><a href="#L-336"><span class="linenos">336</span></a>
</span><span id="L-337"><a href="#L-337"><span class="linenos">337</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].replace(&#39;(4, 5)&#39;, one=False).fst.src</span>
</span><span id="L-338"><a href="#L-338"><span class="linenos">338</span></a><span class="sd">        &#39;[0, 4, 5, 3]&#39;</span>
</span><span id="L-339"><a href="#L-339"><span class="linenos">339</span></a><span class="sd">        ```</span>
</span><span id="L-340"><a href="#L-340"><span class="linenos">340</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-341"><a href="#L-341"><span class="linenos">341</span></a>
</span><span id="L-342"><a href="#L-342"><span class="linenos">342</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-343"><a href="#L-343"><span class="linenos">343</span></a>
</span><span id="L-344"><a href="#L-344"><span class="linenos">344</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-345"><a href="#L-345"><span class="linenos">345</span></a>
</span><span id="L-346"><a href="#L-346"><span class="linenos">346</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-347"><a href="#L-347"><span class="linenos">347</span></a>
</span><span id="L-348"><a href="#L-348"><span class="linenos">348</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-349"><a href="#L-349"><span class="linenos">349</span></a>
</span><span id="L-350"><a href="#L-350"><span class="linenos">350</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-351"><a href="#L-351"><span class="linenos">351</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete this slice, equivalent to `replace(None, ...)`</span>
</span><span id="L-352"><a href="#L-352"><span class="linenos">352</span></a>
</span><span id="L-353"><a href="#L-353"><span class="linenos">353</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-354"><a href="#L-354"><span class="linenos">354</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-355"><a href="#L-355"><span class="linenos">355</span></a>
</span><span id="L-356"><a href="#L-356"><span class="linenos">356</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-357"><a href="#L-357"><span class="linenos">357</span></a><span class="sd">        - `self`</span>
</span><span id="L-358"><a href="#L-358"><span class="linenos">358</span></a>
</span><span id="L-359"><a href="#L-359"><span class="linenos">359</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-360"><a href="#L-360"><span class="linenos">360</span></a><span class="sd">        ```py</span>
</span><span id="L-361"><a href="#L-361"><span class="linenos">361</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].remove().fst.src</span>
</span><span id="L-362"><a href="#L-362"><span class="linenos">362</span></a><span class="sd">        &#39;[0, 3]&#39;</span>
</span><span id="L-363"><a href="#L-363"><span class="linenos">363</span></a><span class="sd">        ```</span>
</span><span id="L-364"><a href="#L-364"><span class="linenos">364</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-365"><a href="#L-365"><span class="linenos">365</span></a>
</span><span id="L-366"><a href="#L-366"><span class="linenos">366</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-367"><a href="#L-367"><span class="linenos">367</span></a>
</span><span id="L-368"><a href="#L-368"><span class="linenos">368</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-369"><a href="#L-369"><span class="linenos">369</span></a>
</span><span id="L-370"><a href="#L-370"><span class="linenos">370</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-371"><a href="#L-371"><span class="linenos">371</span></a>
</span><span id="L-372"><a href="#L-372"><span class="linenos">372</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-373"><a href="#L-373"><span class="linenos">373</span></a>
</span><span id="L-374"><a href="#L-374"><span class="linenos">374</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-375"><a href="#L-375"><span class="linenos">375</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert into this slice at a specific index.</span>
</span><span id="L-376"><a href="#L-376"><span class="linenos">376</span></a>
</span><span id="L-377"><a href="#L-377"><span class="linenos">377</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-378"><a href="#L-378"><span class="linenos">378</span></a><span class="sd">        - `self`</span>
</span><span id="L-379"><a href="#L-379"><span class="linenos">379</span></a>
</span><span id="L-380"><a href="#L-380"><span class="linenos">380</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-381"><a href="#L-381"><span class="linenos">381</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to insert.</span>
</span><span id="L-382"><a href="#L-382"><span class="linenos">382</span></a><span class="sd">        - `idx`: Index to insert BEFORE. Can be `&#39;end&#39;` to indicate add at end of slice.</span>
</span><span id="L-383"><a href="#L-383"><span class="linenos">383</span></a><span class="sd">        - `one`: If `True` then will insert `code` as a single item. Otherwise `False` will attempt a slice insertion</span>
</span><span id="L-384"><a href="#L-384"><span class="linenos">384</span></a><span class="sd">            (type must be compatible).</span>
</span><span id="L-385"><a href="#L-385"><span class="linenos">385</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-386"><a href="#L-386"><span class="linenos">386</span></a>
</span><span id="L-387"><a href="#L-387"><span class="linenos">387</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-388"><a href="#L-388"><span class="linenos">388</span></a><span class="sd">        ```py</span>
</span><span id="L-389"><a href="#L-389"><span class="linenos">389</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, 1).fst.src</span>
</span><span id="L-390"><a href="#L-390"><span class="linenos">390</span></a><span class="sd">        &#39;[0, (4, 5), 1, 2, 3]&#39;</span>
</span><span id="L-391"><a href="#L-391"><span class="linenos">391</span></a>
</span><span id="L-392"><a href="#L-392"><span class="linenos">392</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, &#39;end&#39;, one=False).fst.src</span>
</span><span id="L-393"><a href="#L-393"><span class="linenos">393</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="L-394"><a href="#L-394"><span class="linenos">394</span></a>
</span><span id="L-395"><a href="#L-395"><span class="linenos">395</span></a><span class="sd">        &gt;&gt;&gt; # same as &#39;end&#39; but &#39;end&#39; is always &#39;end&#39;</span>
</span><span id="L-396"><a href="#L-396"><span class="linenos">396</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, 4, one=False).fst.src</span>
</span><span id="L-397"><a href="#L-397"><span class="linenos">397</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="L-398"><a href="#L-398"><span class="linenos">398</span></a>
</span><span id="L-399"><a href="#L-399"><span class="linenos">399</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].insert(&#39;*star&#39;).fst.src</span>
</span><span id="L-400"><a href="#L-400"><span class="linenos">400</span></a><span class="sd">        &#39;[0, *star, 1, 2, 3]&#39;</span>
</span><span id="L-401"><a href="#L-401"><span class="linenos">401</span></a><span class="sd">        ```</span>
</span><span id="L-402"><a href="#L-402"><span class="linenos">402</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-403"><a href="#L-403"><span class="linenos">403</span></a>
</span><span id="L-404"><a href="#L-404"><span class="linenos">404</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-405"><a href="#L-405"><span class="linenos">405</span></a>        <span class="n">idx</span>        <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span> <span class="k">else</span>
</span><span id="L-406"><a href="#L-406"><span class="linenos">406</span></a>                      <span class="n">stop</span>      <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">l</span> <span class="o">:=</span> <span class="p">(</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">))</span> <span class="k">else</span>
</span><span id="L-407"><a href="#L-407"><span class="linenos">407</span></a>                      <span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="n">idx</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idx</span> <span class="o">+</span> <span class="n">l</span><span class="p">)))</span>
</span><span id="L-408"><a href="#L-408"><span class="linenos">408</span></a>
</span><span id="L-409"><a href="#L-409"><span class="linenos">409</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-410"><a href="#L-410"><span class="linenos">410</span></a>
</span><span id="L-411"><a href="#L-411"><span class="linenos">411</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-412"><a href="#L-412"><span class="linenos">412</span></a>
</span><span id="L-413"><a href="#L-413"><span class="linenos">413</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-414"><a href="#L-414"><span class="linenos">414</span></a>
</span><span id="L-415"><a href="#L-415"><span class="linenos">415</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-416"><a href="#L-416"><span class="linenos">416</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Append `code` as a single element to the end of this slice.</span>
</span><span id="L-417"><a href="#L-417"><span class="linenos">417</span></a>
</span><span id="L-418"><a href="#L-418"><span class="linenos">418</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-419"><a href="#L-419"><span class="linenos">419</span></a><span class="sd">        - `self`</span>
</span><span id="L-420"><a href="#L-420"><span class="linenos">420</span></a>
</span><span id="L-421"><a href="#L-421"><span class="linenos">421</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-422"><a href="#L-422"><span class="linenos">422</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to append.</span>
</span><span id="L-423"><a href="#L-423"><span class="linenos">423</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-424"><a href="#L-424"><span class="linenos">424</span></a>
</span><span id="L-425"><a href="#L-425"><span class="linenos">425</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-426"><a href="#L-426"><span class="linenos">426</span></a><span class="sd">        ```py</span>
</span><span id="L-427"><a href="#L-427"><span class="linenos">427</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.append(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-428"><a href="#L-428"><span class="linenos">428</span></a><span class="sd">        &#39;[0, 1, 2, 3, (4, 5)]&#39;</span>
</span><span id="L-429"><a href="#L-429"><span class="linenos">429</span></a>
</span><span id="L-430"><a href="#L-430"><span class="linenos">430</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].append(&#39;*star&#39;).fst.src</span>
</span><span id="L-431"><a href="#L-431"><span class="linenos">431</span></a><span class="sd">        &#39;[0, 1, 2, *star, 3]&#39;</span>
</span><span id="L-432"><a href="#L-432"><span class="linenos">432</span></a><span class="sd">        ```</span>
</span><span id="L-433"><a href="#L-433"><span class="linenos">433</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-434"><a href="#L-434"><span class="linenos">434</span></a>
</span><span id="L-435"><a href="#L-435"><span class="linenos">435</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-436"><a href="#L-436"><span class="linenos">436</span></a>
</span><span id="L-437"><a href="#L-437"><span class="linenos">437</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="L-438"><a href="#L-438"><span class="linenos">438</span></a>
</span><span id="L-439"><a href="#L-439"><span class="linenos">439</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-440"><a href="#L-440"><span class="linenos">440</span></a>
</span><span id="L-441"><a href="#L-441"><span class="linenos">441</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-442"><a href="#L-442"><span class="linenos">442</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend this slice with the slice in `code` (type must be compatible).</span>
</span><span id="L-443"><a href="#L-443"><span class="linenos">443</span></a>
</span><span id="L-444"><a href="#L-444"><span class="linenos">444</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-445"><a href="#L-445"><span class="linenos">445</span></a><span class="sd">        - `self`</span>
</span><span id="L-446"><a href="#L-446"><span class="linenos">446</span></a>
</span><span id="L-447"><a href="#L-447"><span class="linenos">447</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-448"><a href="#L-448"><span class="linenos">448</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` slice to extend.</span>
</span><span id="L-449"><a href="#L-449"><span class="linenos">449</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-450"><a href="#L-450"><span class="linenos">450</span></a>
</span><span id="L-451"><a href="#L-451"><span class="linenos">451</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-452"><a href="#L-452"><span class="linenos">452</span></a><span class="sd">        ```py</span>
</span><span id="L-453"><a href="#L-453"><span class="linenos">453</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.extend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-454"><a href="#L-454"><span class="linenos">454</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="L-455"><a href="#L-455"><span class="linenos">455</span></a>
</span><span id="L-456"><a href="#L-456"><span class="linenos">456</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].extend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-457"><a href="#L-457"><span class="linenos">457</span></a><span class="sd">        &#39;[0, 1, 2, 4, 5, 3]&#39;</span>
</span><span id="L-458"><a href="#L-458"><span class="linenos">458</span></a><span class="sd">        ```</span>
</span><span id="L-459"><a href="#L-459"><span class="linenos">459</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-460"><a href="#L-460"><span class="linenos">460</span></a>
</span><span id="L-461"><a href="#L-461"><span class="linenos">461</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-462"><a href="#L-462"><span class="linenos">462</span></a>
</span><span id="L-463"><a href="#L-463"><span class="linenos">463</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-464"><a href="#L-464"><span class="linenos">464</span></a>
</span><span id="L-465"><a href="#L-465"><span class="linenos">465</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span><span class="p">)</span>
</span><span id="L-466"><a href="#L-466"><span class="linenos">466</span></a>
</span><span id="L-467"><a href="#L-467"><span class="linenos">467</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-468"><a href="#L-468"><span class="linenos">468</span></a>
</span><span id="L-469"><a href="#L-469"><span class="linenos">469</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-470"><a href="#L-470"><span class="linenos">470</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;prepend `code` as a single element to the beginning of this slice.</span>
</span><span id="L-471"><a href="#L-471"><span class="linenos">471</span></a>
</span><span id="L-472"><a href="#L-472"><span class="linenos">472</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-473"><a href="#L-473"><span class="linenos">473</span></a><span class="sd">        - `self`</span>
</span><span id="L-474"><a href="#L-474"><span class="linenos">474</span></a>
</span><span id="L-475"><a href="#L-475"><span class="linenos">475</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-476"><a href="#L-476"><span class="linenos">476</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to preappend.</span>
</span><span id="L-477"><a href="#L-477"><span class="linenos">477</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-478"><a href="#L-478"><span class="linenos">478</span></a>
</span><span id="L-479"><a href="#L-479"><span class="linenos">479</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-480"><a href="#L-480"><span class="linenos">480</span></a><span class="sd">        ```py</span>
</span><span id="L-481"><a href="#L-481"><span class="linenos">481</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.prepend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-482"><a href="#L-482"><span class="linenos">482</span></a><span class="sd">        &#39;[(4, 5), 0, 1, 2, 3]&#39;</span>
</span><span id="L-483"><a href="#L-483"><span class="linenos">483</span></a>
</span><span id="L-484"><a href="#L-484"><span class="linenos">484</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].prepend(&#39;*star&#39;).fst.src</span>
</span><span id="L-485"><a href="#L-485"><span class="linenos">485</span></a><span class="sd">        &#39;[0, *star, 1, 2, 3]&#39;</span>
</span><span id="L-486"><a href="#L-486"><span class="linenos">486</span></a><span class="sd">        ```</span>
</span><span id="L-487"><a href="#L-487"><span class="linenos">487</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-488"><a href="#L-488"><span class="linenos">488</span></a>
</span><span id="L-489"><a href="#L-489"><span class="linenos">489</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-490"><a href="#L-490"><span class="linenos">490</span></a>
</span><span id="L-491"><a href="#L-491"><span class="linenos">491</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="L-492"><a href="#L-492"><span class="linenos">492</span></a>
</span><span id="L-493"><a href="#L-493"><span class="linenos">493</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-494"><a href="#L-494"><span class="linenos">494</span></a>
</span><span id="L-495"><a href="#L-495"><span class="linenos">495</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">prextend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="L-496"><a href="#L-496"><span class="linenos">496</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend the beginning of this slice with the slice in `code` (type must be compatible).</span>
</span><span id="L-497"><a href="#L-497"><span class="linenos">497</span></a>
</span><span id="L-498"><a href="#L-498"><span class="linenos">498</span></a><span class="sd">        **Returns:**</span>
</span><span id="L-499"><a href="#L-499"><span class="linenos">499</span></a><span class="sd">        - `self`</span>
</span><span id="L-500"><a href="#L-500"><span class="linenos">500</span></a>
</span><span id="L-501"><a href="#L-501"><span class="linenos">501</span></a><span class="sd">        **Parameters:**</span>
</span><span id="L-502"><a href="#L-502"><span class="linenos">502</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to extend at the start.</span>
</span><span id="L-503"><a href="#L-503"><span class="linenos">503</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="L-504"><a href="#L-504"><span class="linenos">504</span></a>
</span><span id="L-505"><a href="#L-505"><span class="linenos">505</span></a><span class="sd">        **Examples:**</span>
</span><span id="L-506"><a href="#L-506"><span class="linenos">506</span></a><span class="sd">        ```py</span>
</span><span id="L-507"><a href="#L-507"><span class="linenos">507</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.prextend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-508"><a href="#L-508"><span class="linenos">508</span></a><span class="sd">        &#39;[4, 5, 0, 1, 2, 3]&#39;</span>
</span><span id="L-509"><a href="#L-509"><span class="linenos">509</span></a>
</span><span id="L-510"><a href="#L-510"><span class="linenos">510</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].prextend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="L-511"><a href="#L-511"><span class="linenos">511</span></a><span class="sd">        &#39;[0, 4, 5, 1, 2, 3]&#39;</span>
</span><span id="L-512"><a href="#L-512"><span class="linenos">512</span></a><span class="sd">        ```</span>
</span><span id="L-513"><a href="#L-513"><span class="linenos">513</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="L-514"><a href="#L-514"><span class="linenos">514</span></a>
</span><span id="L-515"><a href="#L-515"><span class="linenos">515</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="L-516"><a href="#L-516"><span class="linenos">516</span></a>
</span><span id="L-517"><a href="#L-517"><span class="linenos">517</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="L-518"><a href="#L-518"><span class="linenos">518</span></a>
</span><span id="L-519"><a href="#L-519"><span class="linenos">519</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="L-520"><a href="#L-520"><span class="linenos">520</span></a>
</span><span id="L-521"><a href="#L-521"><span class="linenos">521</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="L-522"><a href="#L-522"><span class="linenos">522</span></a>
</span><span id="L-523"><a href="#L-523"><span class="linenos">523</span></a>
</span><span id="L-524"><a href="#L-524"><span class="linenos">524</span></a><span class="c1"># ----------------------------------------------------------------------------------------------------------------------</span>
</span><span id="L-525"><a href="#L-525"><span class="linenos">525</span></a><span class="n">__all__</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;fstview&#39;</span><span class="p">]</span>
</span><span id="L-526"><a href="#L-526"><span class="linenos">526</span></a>
</span><span id="L-527"><a href="#L-527"><span class="linenos">527</span></a><span class="kn">from</span><span class="w"> </span><span class="nn">.fst</span><span class="w"> </span><span class="kn">import</span> <span class="n">FST</span>  <span class="c1"># this imports a fake FST which is replaced in globals() when fst.py finishes loading</span>
</span></pre></div>


            </section>
                <section id="fstview">
                            <input id="fstview-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr class">
            
    <span class="def">class</span>
    <span class="name">fstview</span>:

                <label class="view-source-button" for="fstview-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview-12"><a href="#fstview-12"><span class="linenos"> 12</span></a><span class="k">class</span><span class="w"> </span><span class="nc">fstview</span><span class="p">:</span>
</span><span id="fstview-13"><a href="#fstview-13"><span class="linenos"> 13</span></a><span class="w">    </span><span class="sd">&quot;&quot;&quot;View for a list of `AST` nodes in a body, or any other field which is a list of values (not necessarily `AST`</span>
</span><span id="fstview-14"><a href="#fstview-14"><span class="linenos"> 14</span></a><span class="sd">    nodes), of an `FST` node.</span>
</span><span id="fstview-15"><a href="#fstview-15"><span class="linenos"> 15</span></a>
</span><span id="fstview-16"><a href="#fstview-16"><span class="linenos"> 16</span></a><span class="sd">    This object acts as a list of corresponding `FST` nodes if applicable or otherwise strings (for example for a list</span>
</span><span id="fstview-17"><a href="#fstview-17"><span class="linenos"> 17</span></a><span class="sd">    of `Global.names`). It is only meant for short term convenience along the lines of `fst.body.append(...)`. Outside</span>
</span><span id="fstview-18"><a href="#fstview-18"><span class="linenos"> 18</span></a><span class="sd">    of this use, operations on the target `FST` node of the view which are not effectuated through the view may</span>
</span><span id="fstview-19"><a href="#fstview-19"><span class="linenos"> 19</span></a><span class="sd">    invalidate the `start`  and `stop` positions and even the `fst` stored in the view if they change the size of the</span>
</span><span id="fstview-20"><a href="#fstview-20"><span class="linenos"> 20</span></a><span class="sd">    list of nodes or reparse. Especially raw operations which reparse entire statements and can easily invalidate an</span>
</span><span id="fstview-21"><a href="#fstview-21"><span class="linenos"> 21</span></a><span class="sd">    `fstview` even if performed directly on it.</span>
</span><span id="fstview-22"><a href="#fstview-22"><span class="linenos"> 22</span></a>
</span><span id="fstview-23"><a href="#fstview-23"><span class="linenos"> 23</span></a><span class="sd">    Nodes can be gotten or put via indexing. Nodes which are accessed through indexing (normal or slice) are not</span>
</span><span id="fstview-24"><a href="#fstview-24"><span class="linenos"> 24</span></a><span class="sd">    automatically copied, if a copy is desired then do `fst.body[start:stop].copy()`. Slice assignments also work but</span>
</span><span id="fstview-25"><a href="#fstview-25"><span class="linenos"> 25</span></a><span class="sd">    will always assign a slice to the range. If you want to assign an individual item to this range or a subrange then</span>
</span><span id="fstview-26"><a href="#fstview-26"><span class="linenos"> 26</span></a><span class="sd">    use `fst.body[start:stop].replace(..., one=True)`.</span>
</span><span id="fstview-27"><a href="#fstview-27"><span class="linenos"> 27</span></a>
</span><span id="fstview-28"><a href="#fstview-28"><span class="linenos"> 28</span></a><span class="sd">    **WARNING!** Keep in mind that operations on NODES or even CHILD VIEWS instead of on THIS VIEW will not update this</span>
</span><span id="fstview-29"><a href="#fstview-29"><span class="linenos"> 29</span></a><span class="sd">    view. Do not hold on to views, use them and discard.</span>
</span><span id="fstview-30"><a href="#fstview-30"><span class="linenos"> 30</span></a>
</span><span id="fstview-31"><a href="#fstview-31"><span class="linenos"> 31</span></a><span class="sd">    ```py</span>
</span><span id="fstview-32"><a href="#fstview-32"><span class="linenos"> 32</span></a><span class="sd">    &gt;&gt;&gt; view = FST(&#39;[1, 2, 3]&#39;).elts</span>
</span><span id="fstview-33"><a href="#fstview-33"><span class="linenos"> 33</span></a>
</span><span id="fstview-34"><a href="#fstview-34"><span class="linenos"> 34</span></a><span class="sd">    &gt;&gt;&gt; view[1].remove()  # operation on node</span>
</span><span id="fstview-35"><a href="#fstview-35"><span class="linenos"> 35</span></a>
</span><span id="fstview-36"><a href="#fstview-36"><span class="linenos"> 36</span></a><span class="sd">    &gt;&gt;&gt; view  # notice the size of the view is 3 but there are only two elements</span>
</span><span id="fstview-37"><a href="#fstview-37"><span class="linenos"> 37</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,6&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;]&gt;</span>
</span><span id="fstview-38"><a href="#fstview-38"><span class="linenos"> 38</span></a>
</span><span id="fstview-39"><a href="#fstview-39"><span class="linenos"> 39</span></a><span class="sd">    &gt;&gt;&gt; view = FST(&#39;[1, 2, 3]&#39;).elts</span>
</span><span id="fstview-40"><a href="#fstview-40"><span class="linenos"> 40</span></a>
</span><span id="fstview-41"><a href="#fstview-41"><span class="linenos"> 41</span></a><span class="sd">    &gt;&gt;&gt; view[1:].cut()  # not an operation on this view but a child view</span>
</span><span id="fstview-42"><a href="#fstview-42"><span class="linenos"> 42</span></a><span class="sd">    &lt;List ROOT 0,0..0,6&gt;</span>
</span><span id="fstview-43"><a href="#fstview-43"><span class="linenos"> 43</span></a>
</span><span id="fstview-44"><a href="#fstview-44"><span class="linenos"> 44</span></a><span class="sd">    &gt;&gt;&gt; view  # WRONG again</span>
</span><span id="fstview-45"><a href="#fstview-45"><span class="linenos"> 45</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,3&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;]&gt;</span>
</span><span id="fstview-46"><a href="#fstview-46"><span class="linenos"> 46</span></a><span class="sd">    ```</span>
</span><span id="fstview-47"><a href="#fstview-47"><span class="linenos"> 47</span></a>
</span><span id="fstview-48"><a href="#fstview-48"><span class="linenos"> 48</span></a><span class="sd">    This object is meant to be, and is normally created automatically by accessing `AST` list fields on an `FST` node.</span>
</span><span id="fstview-49"><a href="#fstview-49"><span class="linenos"> 49</span></a>
</span><span id="fstview-50"><a href="#fstview-50"><span class="linenos"> 50</span></a><span class="sd">    **Examples:**</span>
</span><span id="fstview-51"><a href="#fstview-51"><span class="linenos"> 51</span></a><span class="sd">    ```py</span>
</span><span id="fstview-52"><a href="#fstview-52"><span class="linenos"> 52</span></a><span class="sd">    &gt;&gt;&gt; f = FST(&#39;[0, 1, 2, 3]&#39;)</span>
</span><span id="fstview-53"><a href="#fstview-53"><span class="linenos"> 53</span></a><span class="sd">    &gt;&gt;&gt; f</span>
</span><span id="fstview-54"><a href="#fstview-54"><span class="linenos"> 54</span></a><span class="sd">    &lt;List ROOT 0,0..0,12&gt;</span>
</span><span id="fstview-55"><a href="#fstview-55"><span class="linenos"> 55</span></a>
</span><span id="fstview-56"><a href="#fstview-56"><span class="linenos"> 56</span></a><span class="sd">    &gt;&gt;&gt; f.elts</span>
</span><span id="fstview-57"><a href="#fstview-57"><span class="linenos"> 57</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,12&gt;.elts[0:4] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;, &lt;Constant 0,10..0,11&gt;]&gt;</span>
</span><span id="fstview-58"><a href="#fstview-58"><span class="linenos"> 58</span></a>
</span><span id="fstview-59"><a href="#fstview-59"><span class="linenos"> 59</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1]</span>
</span><span id="fstview-60"><a href="#fstview-60"><span class="linenos"> 60</span></a><span class="sd">    &lt;Constant 0,4..0,5&gt;</span>
</span><span id="fstview-61"><a href="#fstview-61"><span class="linenos"> 61</span></a>
</span><span id="fstview-62"><a href="#fstview-62"><span class="linenos"> 62</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1].src</span>
</span><span id="fstview-63"><a href="#fstview-63"><span class="linenos"> 63</span></a><span class="sd">    &#39;1&#39;</span>
</span><span id="fstview-64"><a href="#fstview-64"><span class="linenos"> 64</span></a>
</span><span id="fstview-65"><a href="#fstview-65"><span class="linenos"> 65</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1:3]</span>
</span><span id="fstview-66"><a href="#fstview-66"><span class="linenos"> 66</span></a><span class="sd">    &lt;&lt;List ROOT 0,0..0,12&gt;.elts[1:3] [&lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;]&gt;</span>
</span><span id="fstview-67"><a href="#fstview-67"><span class="linenos"> 67</span></a>
</span><span id="fstview-68"><a href="#fstview-68"><span class="linenos"> 68</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1:3].copy()</span>
</span><span id="fstview-69"><a href="#fstview-69"><span class="linenos"> 69</span></a><span class="sd">    &lt;List ROOT 0,0..0,6&gt;</span>
</span><span id="fstview-70"><a href="#fstview-70"><span class="linenos"> 70</span></a>
</span><span id="fstview-71"><a href="#fstview-71"><span class="linenos"> 71</span></a><span class="sd">    &gt;&gt;&gt; _.src</span>
</span><span id="fstview-72"><a href="#fstview-72"><span class="linenos"> 72</span></a><span class="sd">    &#39;[1, 2]&#39;</span>
</span><span id="fstview-73"><a href="#fstview-73"><span class="linenos"> 73</span></a>
</span><span id="fstview-74"><a href="#fstview-74"><span class="linenos"> 74</span></a><span class="sd">    &gt;&gt;&gt; f.elts[1:3] = &#39;[4]&#39;</span>
</span><span id="fstview-75"><a href="#fstview-75"><span class="linenos"> 75</span></a><span class="sd">    &gt;&gt;&gt; f.src</span>
</span><span id="fstview-76"><a href="#fstview-76"><span class="linenos"> 76</span></a><span class="sd">    &#39;[0, 4, 3]&#39;</span>
</span><span id="fstview-77"><a href="#fstview-77"><span class="linenos"> 77</span></a>
</span><span id="fstview-78"><a href="#fstview-78"><span class="linenos"> 78</span></a><span class="sd">    &gt;&gt;&gt; del f.elts[1:]</span>
</span><span id="fstview-79"><a href="#fstview-79"><span class="linenos"> 79</span></a><span class="sd">    &gt;&gt;&gt; f.src</span>
</span><span id="fstview-80"><a href="#fstview-80"><span class="linenos"> 80</span></a><span class="sd">    &#39;[0]&#39;</span>
</span><span id="fstview-81"><a href="#fstview-81"><span class="linenos"> 81</span></a>
</span><span id="fstview-82"><a href="#fstview-82"><span class="linenos"> 82</span></a><span class="sd">    &gt;&gt;&gt; f.elts[0] = &#39;*star&#39;</span>
</span><span id="fstview-83"><a href="#fstview-83"><span class="linenos"> 83</span></a><span class="sd">    &gt;&gt;&gt; f.src</span>
</span><span id="fstview-84"><a href="#fstview-84"><span class="linenos"> 84</span></a><span class="sd">    &#39;[*star]&#39;</span>
</span><span id="fstview-85"><a href="#fstview-85"><span class="linenos"> 85</span></a><span class="sd">    ```</span>
</span><span id="fstview-86"><a href="#fstview-86"><span class="linenos"> 86</span></a><span class="sd">    &quot;&quot;&quot;</span>
</span><span id="fstview-87"><a href="#fstview-87"><span class="linenos"> 87</span></a>
</span><span id="fstview-88"><a href="#fstview-88"><span class="linenos"> 88</span></a>    <span class="n">fst</span><span class="p">:</span>   <span class="n">FST</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;The target `FST` node this view references.&quot;&quot;&quot;</span>
</span><span id="fstview-89"><a href="#fstview-89"><span class="linenos"> 89</span></a>    <span class="n">field</span><span class="p">:</span> <span class="nb">str</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;The target field this view references.&quot;&quot;&quot;</span>
</span><span id="fstview-90"><a href="#fstview-90"><span class="linenos"> 90</span></a>    <span class="n">start</span><span class="p">:</span> <span class="nb">int</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;Start position within the target field list this view references.&quot;&quot;&quot;</span>
</span><span id="fstview-91"><a href="#fstview-91"><span class="linenos"> 91</span></a>    <span class="n">stop</span><span class="p">:</span>  <span class="nb">int</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;One past the last element within the target field list this view references.&quot;&quot;&quot;</span>
</span><span id="fstview-92"><a href="#fstview-92"><span class="linenos"> 92</span></a>
</span><span id="fstview-93"><a href="#fstview-93"><span class="linenos"> 93</span></a>    <span class="n">is_FST</span> <span class="o">=</span> <span class="kc">False</span>  <span class="p">;</span> <span class="s2">&quot;&quot;&quot;@private&quot;&quot;&quot;</span>  <span class="c1"># for quick checks vs. `FST`</span>
</span><span id="fstview-94"><a href="#fstview-94"><span class="linenos"> 94</span></a>
</span><span id="fstview-95"><a href="#fstview-95"><span class="linenos"> 95</span></a>    <span class="nd">@property</span>
</span><span id="fstview-96"><a href="#fstview-96"><span class="linenos"> 96</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="fstview-97"><a href="#fstview-97"><span class="linenos"> 97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Root node of the `FST` node this view belongs to.&quot;&quot;&quot;</span>
</span><span id="fstview-98"><a href="#fstview-98"><span class="linenos"> 98</span></a>
</span><span id="fstview-99"><a href="#fstview-99"><span class="linenos"> 99</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">root</span>
</span><span id="fstview-100"><a href="#fstview-100"><span class="linenos">100</span></a>
</span><span id="fstview-101"><a href="#fstview-101"><span class="linenos">101</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__init__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">fst</span><span class="p">:</span> <span class="n">FST</span><span class="p">,</span> <span class="n">field</span><span class="p">:</span> <span class="nb">str</span><span class="p">,</span> <span class="n">start</span><span class="p">:</span> <span class="nb">int</span><span class="p">,</span> <span class="n">stop</span><span class="p">:</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview-102"><a href="#fstview-102"><span class="linenos">102</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;@private&quot;&quot;&quot;</span>
</span><span id="fstview-103"><a href="#fstview-103"><span class="linenos">103</span></a>
</span><span id="fstview-104"><a href="#fstview-104"><span class="linenos">104</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span>   <span class="o">=</span> <span class="n">fst</span>
</span><span id="fstview-105"><a href="#fstview-105"><span class="linenos">105</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">field</span> <span class="o">=</span> <span class="n">field</span>
</span><span id="fstview-106"><a href="#fstview-106"><span class="linenos">106</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="fstview-107"><a href="#fstview-107"><span class="linenos">107</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span>  <span class="o">=</span> <span class="n">stop</span>
</span><span id="fstview-108"><a href="#fstview-108"><span class="linenos">108</span></a>
</span><span id="fstview-109"><a href="#fstview-109"><span class="linenos">109</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__repr__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">str</span><span class="p">:</span>
</span><span id="fstview-110"><a href="#fstview-110"><span class="linenos">110</span></a>        <span class="k">return</span> <span class="sa">f</span><span class="s1">&#39;&lt;</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="si">!r}</span><span class="s1">.</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="si">}</span><span class="s1">[</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="si">}</span><span class="s1">:</span><span class="si">{</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="si">}</span><span class="s1">] </span><span class="si">{</span><span class="nb">list</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span><span class="si">}</span><span class="s1">&gt;&#39;</span>
</span><span id="fstview-111"><a href="#fstview-111"><span class="linenos">111</span></a>
</span><span id="fstview-112"><a href="#fstview-112"><span class="linenos">112</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__len__</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
</span><span id="fstview-113"><a href="#fstview-113"><span class="linenos">113</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span>
</span><span id="fstview-114"><a href="#fstview-114"><span class="linenos">114</span></a>
</span><span id="fstview-115"><a href="#fstview-115"><span class="linenos">115</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="fstview-116"><a href="#fstview-116"><span class="linenos">116</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get a single item or a slice view from this slice view. All indices (including negative) are relative to the</span>
</span><span id="fstview-117"><a href="#fstview-117"><span class="linenos">117</span></a><span class="sd">        bounds of this view. This is just an access, not a cut or a copy, so if you want a copy you must explicitly do</span>
</span><span id="fstview-118"><a href="#fstview-118"><span class="linenos">118</span></a><span class="sd">        `.copy()` on the returned value.</span>
</span><span id="fstview-119"><a href="#fstview-119"><span class="linenos">119</span></a>
</span><span id="fstview-120"><a href="#fstview-120"><span class="linenos">120</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when dealing with</span>
</span><span id="fstview-121"><a href="#fstview-121"><span class="linenos">121</span></a><span class="sd">        return values which may be `None` or may not be `FST` nodes.</span>
</span><span id="fstview-122"><a href="#fstview-122"><span class="linenos">122</span></a>
</span><span id="fstview-123"><a href="#fstview-123"><span class="linenos">123</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-124"><a href="#fstview-124"><span class="linenos">124</span></a><span class="sd">        - `idx`: The index or `slice` where to get the element(s) from. If is a single string then this it will return</span>
</span><span id="fstview-125"><a href="#fstview-125"><span class="linenos">125</span></a><span class="sd">            the first function, class or variable assignment to the name matching this string (if is a list of</span>
</span><span id="fstview-126"><a href="#fstview-126"><span class="linenos">126</span></a><span class="sd">            statements, error otherwise). This is just a convenience and will probably change / expand in the future.</span>
</span><span id="fstview-127"><a href="#fstview-127"><span class="linenos">127</span></a>
</span><span id="fstview-128"><a href="#fstview-128"><span class="linenos">128</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-129"><a href="#fstview-129"><span class="linenos">129</span></a><span class="sd">        - `FST | fstview`: Either a single `FST` node if accessing a single item or a new `fstview` view according to</span>
</span><span id="fstview-130"><a href="#fstview-130"><span class="linenos">130</span></a><span class="sd">            the slice passed.</span>
</span><span id="fstview-131"><a href="#fstview-131"><span class="linenos">131</span></a>
</span><span id="fstview-132"><a href="#fstview-132"><span class="linenos">132</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-133"><a href="#fstview-133"><span class="linenos">133</span></a><span class="sd">        ```py</span>
</span><span id="fstview-134"><a href="#fstview-134"><span class="linenos">134</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1].src</span>
</span><span id="fstview-135"><a href="#fstview-135"><span class="linenos">135</span></a><span class="sd">        &#39;1&#39;</span>
</span><span id="fstview-136"><a href="#fstview-136"><span class="linenos">136</span></a>
</span><span id="fstview-137"><a href="#fstview-137"><span class="linenos">137</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[:3]</span>
</span><span id="fstview-138"><a href="#fstview-138"><span class="linenos">138</span></a><span class="sd">        &lt;&lt;List ROOT 0,0..0,12&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;]&gt;</span>
</span><span id="fstview-139"><a href="#fstview-139"><span class="linenos">139</span></a>
</span><span id="fstview-140"><a href="#fstview-140"><span class="linenos">140</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[:3].copy().src</span>
</span><span id="fstview-141"><a href="#fstview-141"><span class="linenos">141</span></a><span class="sd">        &#39;[0, 1, 2]&#39;</span>
</span><span id="fstview-142"><a href="#fstview-142"><span class="linenos">142</span></a>
</span><span id="fstview-143"><a href="#fstview-143"><span class="linenos">143</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[-3:]</span>
</span><span id="fstview-144"><a href="#fstview-144"><span class="linenos">144</span></a><span class="sd">        &lt;&lt;List ROOT 0,0..0,12&gt;.elts[1:4] [&lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;, &lt;Constant 0,10..0,11&gt;]&gt;</span>
</span><span id="fstview-145"><a href="#fstview-145"><span class="linenos">145</span></a>
</span><span id="fstview-146"><a href="#fstview-146"><span class="linenos">146</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;def fun(): pass\nclass cls: pass\nvar = val&#39;).body[&#39;cls&#39;]</span>
</span><span id="fstview-147"><a href="#fstview-147"><span class="linenos">147</span></a><span class="sd">        &lt;ClassDef 1,0..1,15&gt;</span>
</span><span id="fstview-148"><a href="#fstview-148"><span class="linenos">148</span></a>
</span><span id="fstview-149"><a href="#fstview-149"><span class="linenos">149</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;global a, b, c&#39;).names</span>
</span><span id="fstview-150"><a href="#fstview-150"><span class="linenos">150</span></a><span class="sd">        &lt;&lt;Global ROOT 0,0..0,14&gt;.names[0:3] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]&gt;</span>
</span><span id="fstview-151"><a href="#fstview-151"><span class="linenos">151</span></a>
</span><span id="fstview-152"><a href="#fstview-152"><span class="linenos">152</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;global a, b, c&#39;).names[1]</span>
</span><span id="fstview-153"><a href="#fstview-153"><span class="linenos">153</span></a><span class="sd">        &#39;b&#39;</span>
</span><span id="fstview-154"><a href="#fstview-154"><span class="linenos">154</span></a><span class="sd">        ```</span>
</span><span id="fstview-155"><a href="#fstview-155"><span class="linenos">155</span></a><span class="sd">        @public</span>
</span><span id="fstview-156"><a href="#fstview-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-157"><a href="#fstview-157"><span class="linenos">157</span></a>
</span><span id="fstview-158"><a href="#fstview-158"><span class="linenos">158</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview-159"><a href="#fstview-159"><span class="linenos">159</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="fstview-160"><a href="#fstview-160"><span class="linenos">160</span></a>
</span><span id="fstview-161"><a href="#fstview-161"><span class="linenos">161</span></a>            <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)[</span><span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">],</span> <span class="n">AST</span><span class="p">)</span> <span class="k">else</span> <span class="n">a</span>
</span><span id="fstview-162"><a href="#fstview-162"><span class="linenos">162</span></a>
</span><span id="fstview-163"><a href="#fstview-163"><span class="linenos">163</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="fstview-164"><a href="#fstview-164"><span class="linenos">164</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="n">get_func_class_or_ass_by_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">],</span> <span class="n">idx</span><span class="p">)):</span>
</span><span id="fstview-165"><a href="#fstview-165"><span class="linenos">165</span></a>                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;function, class or variable &#39;</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
</span><span id="fstview-166"><a href="#fstview-166"><span class="linenos">166</span></a>
</span><span id="fstview-167"><a href="#fstview-167"><span class="linenos">167</span></a>            <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span>
</span><span id="fstview-168"><a href="#fstview-168"><span class="linenos">168</span></a>
</span><span id="fstview-169"><a href="#fstview-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="fstview-170"><a href="#fstview-170"><span class="linenos">170</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="fstview-171"><a href="#fstview-171"><span class="linenos">171</span></a>
</span><span id="fstview-172"><a href="#fstview-172"><span class="linenos">172</span></a>        <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="fstview-173"><a href="#fstview-173"><span class="linenos">173</span></a>
</span><span id="fstview-174"><a href="#fstview-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="n">fstview</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">)</span>
</span><span id="fstview-175"><a href="#fstview-175"><span class="linenos">175</span></a>
</span><span id="fstview-176"><a href="#fstview-176"><span class="linenos">176</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span> <span class="o">|</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="fstview-177"><a href="#fstview-177"><span class="linenos">177</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a single item or a slice view in this slice view. All indices (including negative) are relative to the</span>
</span><span id="fstview-178"><a href="#fstview-178"><span class="linenos">178</span></a><span class="sd">        bounds of this view. This is not just with a set, it is a full `FST` operation.</span>
</span><span id="fstview-179"><a href="#fstview-179"><span class="linenos">179</span></a>
</span><span id="fstview-180"><a href="#fstview-180"><span class="linenos">180</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when assigning</span>
</span><span id="fstview-181"><a href="#fstview-181"><span class="linenos">181</span></a><span class="sd">        values.</span>
</span><span id="fstview-182"><a href="#fstview-182"><span class="linenos">182</span></a>
</span><span id="fstview-183"><a href="#fstview-183"><span class="linenos">183</span></a><span class="sd">        **WARNING!** Currently, for non-AST views, individual value assignment works but slices do not yet.</span>
</span><span id="fstview-184"><a href="#fstview-184"><span class="linenos">184</span></a>
</span><span id="fstview-185"><a href="#fstview-185"><span class="linenos">185</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-186"><a href="#fstview-186"><span class="linenos">186</span></a><span class="sd">        - `idx`: The index or `slice` where to put the element(s).</span>
</span><span id="fstview-187"><a href="#fstview-187"><span class="linenos">187</span></a>
</span><span id="fstview-188"><a href="#fstview-188"><span class="linenos">188</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-189"><a href="#fstview-189"><span class="linenos">189</span></a><span class="sd">        ```py</span>
</span><span id="fstview-190"><a href="#fstview-190"><span class="linenos">190</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1] = &#39;4&#39;; f.src</span>
</span><span id="fstview-191"><a href="#fstview-191"><span class="linenos">191</span></a><span class="sd">        &#39;[0, 4, 2, 3]&#39;</span>
</span><span id="fstview-192"><a href="#fstview-192"><span class="linenos">192</span></a>
</span><span id="fstview-193"><a href="#fstview-193"><span class="linenos">193</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3] = &#39;[5]&#39;; f.src</span>
</span><span id="fstview-194"><a href="#fstview-194"><span class="linenos">194</span></a><span class="sd">        &#39;[5, 3]&#39;</span>
</span><span id="fstview-195"><a href="#fstview-195"><span class="linenos">195</span></a>
</span><span id="fstview-196"><a href="#fstview-196"><span class="linenos">196</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3] = &#39;5,&#39;; f.src</span>
</span><span id="fstview-197"><a href="#fstview-197"><span class="linenos">197</span></a><span class="sd">        &#39;[5, 3]&#39;</span>
</span><span id="fstview-198"><a href="#fstview-198"><span class="linenos">198</span></a>
</span><span id="fstview-199"><a href="#fstview-199"><span class="linenos">199</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[-3:] = &#39;[6]&#39;; f.src</span>
</span><span id="fstview-200"><a href="#fstview-200"><span class="linenos">200</span></a><span class="sd">        &#39;[0, 6]&#39;</span>
</span><span id="fstview-201"><a href="#fstview-201"><span class="linenos">201</span></a>
</span><span id="fstview-202"><a href="#fstview-202"><span class="linenos">202</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:] = &#39;7, 8&#39;; f.src</span>
</span><span id="fstview-203"><a href="#fstview-203"><span class="linenos">203</span></a><span class="sd">        &#39;[7, 8]&#39;</span>
</span><span id="fstview-204"><a href="#fstview-204"><span class="linenos">204</span></a>
</span><span id="fstview-205"><a href="#fstview-205"><span class="linenos">205</span></a><span class="sd">        &gt;&gt;&gt; f = FST(&#39;[0, 1, 2, 3]&#39;)</span>
</span><span id="fstview-206"><a href="#fstview-206"><span class="linenos">206</span></a><span class="sd">        &gt;&gt;&gt; f.elts[2:2] = f.elts[1:3].copy()</span>
</span><span id="fstview-207"><a href="#fstview-207"><span class="linenos">207</span></a><span class="sd">        &gt;&gt;&gt; f.src</span>
</span><span id="fstview-208"><a href="#fstview-208"><span class="linenos">208</span></a><span class="sd">        &#39;[0, 1, 1, 2, 2, 3]&#39;</span>
</span><span id="fstview-209"><a href="#fstview-209"><span class="linenos">209</span></a><span class="sd">        ```</span>
</span><span id="fstview-210"><a href="#fstview-210"><span class="linenos">210</span></a><span class="sd">        @public</span>
</span><span id="fstview-211"><a href="#fstview-211"><span class="linenos">211</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-212"><a href="#fstview-212"><span class="linenos">212</span></a>
</span><span id="fstview-213"><a href="#fstview-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview-214"><a href="#fstview-214"><span class="linenos">214</span></a>            <span class="n">idx</span>        <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="fstview-215"><a href="#fstview-215"><span class="linenos">215</span></a>            <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-216"><a href="#fstview-216"><span class="linenos">216</span></a>
</span><span id="fstview-217"><a href="#fstview-217"><span class="linenos">217</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span>
</span><span id="fstview-218"><a href="#fstview-218"><span class="linenos">218</span></a>
</span><span id="fstview-219"><a href="#fstview-219"><span class="linenos">219</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview-220"><a href="#fstview-220"><span class="linenos">220</span></a>
</span><span id="fstview-221"><a href="#fstview-221"><span class="linenos">221</span></a>        <span class="k">elif</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="fstview-222"><a href="#fstview-222"><span class="linenos">222</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="fstview-223"><a href="#fstview-223"><span class="linenos">223</span></a>
</span><span id="fstview-224"><a href="#fstview-224"><span class="linenos">224</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="fstview-225"><a href="#fstview-225"><span class="linenos">225</span></a>            <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="fstview-226"><a href="#fstview-226"><span class="linenos">226</span></a>            <span class="n">len_before</span>          <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-227"><a href="#fstview-227"><span class="linenos">227</span></a>
</span><span id="fstview-228"><a href="#fstview-228"><span class="linenos">228</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="fstview-229"><a href="#fstview-229"><span class="linenos">229</span></a>
</span><span id="fstview-230"><a href="#fstview-230"><span class="linenos">230</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview-231"><a href="#fstview-231"><span class="linenos">231</span></a>
</span><span id="fstview-232"><a href="#fstview-232"><span class="linenos">232</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">):</span>
</span><span id="fstview-233"><a href="#fstview-233"><span class="linenos">233</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a single item or a slice from this slice view. All indices (including negative) are relative to the</span>
</span><span id="fstview-234"><a href="#fstview-234"><span class="linenos">234</span></a><span class="sd">        bounds of this view.</span>
</span><span id="fstview-235"><a href="#fstview-235"><span class="linenos">235</span></a>
</span><span id="fstview-236"><a href="#fstview-236"><span class="linenos">236</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when assigning</span>
</span><span id="fstview-237"><a href="#fstview-237"><span class="linenos">237</span></a><span class="sd">        values.</span>
</span><span id="fstview-238"><a href="#fstview-238"><span class="linenos">238</span></a>
</span><span id="fstview-239"><a href="#fstview-239"><span class="linenos">239</span></a><span class="sd">        **WARNING!** Currently, for non-AST views, deletion is not supported</span>
</span><span id="fstview-240"><a href="#fstview-240"><span class="linenos">240</span></a>
</span><span id="fstview-241"><a href="#fstview-241"><span class="linenos">241</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-242"><a href="#fstview-242"><span class="linenos">242</span></a><span class="sd">        - `idx`: The index or `slice` to delete.</span>
</span><span id="fstview-243"><a href="#fstview-243"><span class="linenos">243</span></a>
</span><span id="fstview-244"><a href="#fstview-244"><span class="linenos">244</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-245"><a href="#fstview-245"><span class="linenos">245</span></a><span class="sd">        ```py</span>
</span><span id="fstview-246"><a href="#fstview-246"><span class="linenos">246</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1]; f.src</span>
</span><span id="fstview-247"><a href="#fstview-247"><span class="linenos">247</span></a><span class="sd">        &#39;[0, 2, 3]&#39;</span>
</span><span id="fstview-248"><a href="#fstview-248"><span class="linenos">248</span></a>
</span><span id="fstview-249"><a href="#fstview-249"><span class="linenos">249</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3]; f.src</span>
</span><span id="fstview-250"><a href="#fstview-250"><span class="linenos">250</span></a><span class="sd">        &#39;[3]&#39;</span>
</span><span id="fstview-251"><a href="#fstview-251"><span class="linenos">251</span></a>
</span><span id="fstview-252"><a href="#fstview-252"><span class="linenos">252</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[-3:]; f.src</span>
</span><span id="fstview-253"><a href="#fstview-253"><span class="linenos">253</span></a><span class="sd">        &#39;[0]&#39;</span>
</span><span id="fstview-254"><a href="#fstview-254"><span class="linenos">254</span></a>
</span><span id="fstview-255"><a href="#fstview-255"><span class="linenos">255</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:]; f.src</span>
</span><span id="fstview-256"><a href="#fstview-256"><span class="linenos">256</span></a><span class="sd">        &#39;[]&#39;</span>
</span><span id="fstview-257"><a href="#fstview-257"><span class="linenos">257</span></a><span class="sd">        ```</span>
</span><span id="fstview-258"><a href="#fstview-258"><span class="linenos">258</span></a><span class="sd">        @public</span>
</span><span id="fstview-259"><a href="#fstview-259"><span class="linenos">259</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-260"><a href="#fstview-260"><span class="linenos">260</span></a>
</span><span id="fstview-261"><a href="#fstview-261"><span class="linenos">261</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview-262"><a href="#fstview-262"><span class="linenos">262</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">((</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="fstview-263"><a href="#fstview-263"><span class="linenos">263</span></a>
</span><span id="fstview-264"><a href="#fstview-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="fstview-265"><a href="#fstview-265"><span class="linenos">265</span></a>
</span><span id="fstview-266"><a href="#fstview-266"><span class="linenos">266</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="fstview-267"><a href="#fstview-267"><span class="linenos">267</span></a>
</span><span id="fstview-268"><a href="#fstview-268"><span class="linenos">268</span></a>        <span class="k">elif</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="fstview-269"><a href="#fstview-269"><span class="linenos">269</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="fstview-270"><a href="#fstview-270"><span class="linenos">270</span></a>
</span><span id="fstview-271"><a href="#fstview-271"><span class="linenos">271</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="fstview-272"><a href="#fstview-272"><span class="linenos">272</span></a>            <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">((</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="fstview-273"><a href="#fstview-273"><span class="linenos">273</span></a>
</span><span id="fstview-274"><a href="#fstview-274"><span class="linenos">274</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="fstview-275"><a href="#fstview-275"><span class="linenos">275</span></a>
</span><span id="fstview-276"><a href="#fstview-276"><span class="linenos">276</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">idx_stop</span> <span class="o">-</span> <span class="n">idx_start</span><span class="p">))</span>
</span><span id="fstview-277"><a href="#fstview-277"><span class="linenos">277</span></a>
</span><span id="fstview-278"><a href="#fstview-278"><span class="linenos">278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="fstview-279"><a href="#fstview-279"><span class="linenos">279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Copy this slice to a new top-level tree, dedenting and fixing as necessary.</span>
</span><span id="fstview-280"><a href="#fstview-280"><span class="linenos">280</span></a>
</span><span id="fstview-281"><a href="#fstview-281"><span class="linenos">281</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-282"><a href="#fstview-282"><span class="linenos">282</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-283"><a href="#fstview-283"><span class="linenos">283</span></a>
</span><span id="fstview-284"><a href="#fstview-284"><span class="linenos">284</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-285"><a href="#fstview-285"><span class="linenos">285</span></a><span class="sd">        - `FST`: Copied slice.</span>
</span><span id="fstview-286"><a href="#fstview-286"><span class="linenos">286</span></a>
</span><span id="fstview-287"><a href="#fstview-287"><span class="linenos">287</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-288"><a href="#fstview-288"><span class="linenos">288</span></a><span class="sd">        ```py</span>
</span><span id="fstview-289"><a href="#fstview-289"><span class="linenos">289</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].copy().src</span>
</span><span id="fstview-290"><a href="#fstview-290"><span class="linenos">290</span></a><span class="sd">        &#39;[1, 2]&#39;</span>
</span><span id="fstview-291"><a href="#fstview-291"><span class="linenos">291</span></a><span class="sd">        ```</span>
</span><span id="fstview-292"><a href="#fstview-292"><span class="linenos">292</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-293"><a href="#fstview-293"><span class="linenos">293</span></a>
</span><span id="fstview-294"><a href="#fstview-294"><span class="linenos">294</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">get_slice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-295"><a href="#fstview-295"><span class="linenos">295</span></a>
</span><span id="fstview-296"><a href="#fstview-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="fstview-297"><a href="#fstview-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cut out this slice to a new top-level tree (if possible), dedenting and fixing as necessary. Cannot cut root</span>
</span><span id="fstview-298"><a href="#fstview-298"><span class="linenos">298</span></a><span class="sd">        node.</span>
</span><span id="fstview-299"><a href="#fstview-299"><span class="linenos">299</span></a>
</span><span id="fstview-300"><a href="#fstview-300"><span class="linenos">300</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-301"><a href="#fstview-301"><span class="linenos">301</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-302"><a href="#fstview-302"><span class="linenos">302</span></a>
</span><span id="fstview-303"><a href="#fstview-303"><span class="linenos">303</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-304"><a href="#fstview-304"><span class="linenos">304</span></a><span class="sd">        - `FST`: Cut slice.</span>
</span><span id="fstview-305"><a href="#fstview-305"><span class="linenos">305</span></a>
</span><span id="fstview-306"><a href="#fstview-306"><span class="linenos">306</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-307"><a href="#fstview-307"><span class="linenos">307</span></a><span class="sd">        ```py</span>
</span><span id="fstview-308"><a href="#fstview-308"><span class="linenos">308</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1:3].cut().src</span>
</span><span id="fstview-309"><a href="#fstview-309"><span class="linenos">309</span></a><span class="sd">        &#39;[1, 2]&#39;</span>
</span><span id="fstview-310"><a href="#fstview-310"><span class="linenos">310</span></a>
</span><span id="fstview-311"><a href="#fstview-311"><span class="linenos">311</span></a><span class="sd">        &gt;&gt;&gt; f.src</span>
</span><span id="fstview-312"><a href="#fstview-312"><span class="linenos">312</span></a><span class="sd">        &#39;[0, 3]&#39;</span>
</span><span id="fstview-313"><a href="#fstview-313"><span class="linenos">313</span></a><span class="sd">        ```</span>
</span><span id="fstview-314"><a href="#fstview-314"><span class="linenos">314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-315"><a href="#fstview-315"><span class="linenos">315</span></a>
</span><span id="fstview-316"><a href="#fstview-316"><span class="linenos">316</span></a>        <span class="n">f</span>         <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">get_slice</span><span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-317"><a href="#fstview-317"><span class="linenos">317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="fstview-318"><a href="#fstview-318"><span class="linenos">318</span></a>
</span><span id="fstview-319"><a href="#fstview-319"><span class="linenos">319</span></a>        <span class="k">return</span> <span class="n">f</span>
</span><span id="fstview-320"><a href="#fstview-320"><span class="linenos">320</span></a>
</span><span id="fstview-321"><a href="#fstview-321"><span class="linenos">321</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-322"><a href="#fstview-322"><span class="linenos">322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace or delete (if `code=None`) this slice.</span>
</span><span id="fstview-323"><a href="#fstview-323"><span class="linenos">323</span></a>
</span><span id="fstview-324"><a href="#fstview-324"><span class="linenos">324</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-325"><a href="#fstview-325"><span class="linenos">325</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-326"><a href="#fstview-326"><span class="linenos">326</span></a>
</span><span id="fstview-327"><a href="#fstview-327"><span class="linenos">327</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-328"><a href="#fstview-328"><span class="linenos">328</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to put. `None` to delete this slice.</span>
</span><span id="fstview-329"><a href="#fstview-329"><span class="linenos">329</span></a><span class="sd">        - `one`: If `True` then will replace the range of this slice with a single item. Otherwise `False` will attempt</span>
</span><span id="fstview-330"><a href="#fstview-330"><span class="linenos">330</span></a><span class="sd">            a slice replacement (type must be compatible).</span>
</span><span id="fstview-331"><a href="#fstview-331"><span class="linenos">331</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-332"><a href="#fstview-332"><span class="linenos">332</span></a>
</span><span id="fstview-333"><a href="#fstview-333"><span class="linenos">333</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-334"><a href="#fstview-334"><span class="linenos">334</span></a><span class="sd">        ```py</span>
</span><span id="fstview-335"><a href="#fstview-335"><span class="linenos">335</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].replace(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-336"><a href="#fstview-336"><span class="linenos">336</span></a><span class="sd">        &#39;[0, (4, 5), 3]&#39;</span>
</span><span id="fstview-337"><a href="#fstview-337"><span class="linenos">337</span></a>
</span><span id="fstview-338"><a href="#fstview-338"><span class="linenos">338</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].replace(&#39;(4, 5)&#39;, one=False).fst.src</span>
</span><span id="fstview-339"><a href="#fstview-339"><span class="linenos">339</span></a><span class="sd">        &#39;[0, 4, 5, 3]&#39;</span>
</span><span id="fstview-340"><a href="#fstview-340"><span class="linenos">340</span></a><span class="sd">        ```</span>
</span><span id="fstview-341"><a href="#fstview-341"><span class="linenos">341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-342"><a href="#fstview-342"><span class="linenos">342</span></a>
</span><span id="fstview-343"><a href="#fstview-343"><span class="linenos">343</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-344"><a href="#fstview-344"><span class="linenos">344</span></a>
</span><span id="fstview-345"><a href="#fstview-345"><span class="linenos">345</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-346"><a href="#fstview-346"><span class="linenos">346</span></a>
</span><span id="fstview-347"><a href="#fstview-347"><span class="linenos">347</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview-348"><a href="#fstview-348"><span class="linenos">348</span></a>
</span><span id="fstview-349"><a href="#fstview-349"><span class="linenos">349</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="fstview-350"><a href="#fstview-350"><span class="linenos">350</span></a>
</span><span id="fstview-351"><a href="#fstview-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-352"><a href="#fstview-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete this slice, equivalent to `replace(None, ...)`</span>
</span><span id="fstview-353"><a href="#fstview-353"><span class="linenos">353</span></a>
</span><span id="fstview-354"><a href="#fstview-354"><span class="linenos">354</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-355"><a href="#fstview-355"><span class="linenos">355</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-356"><a href="#fstview-356"><span class="linenos">356</span></a>
</span><span id="fstview-357"><a href="#fstview-357"><span class="linenos">357</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-358"><a href="#fstview-358"><span class="linenos">358</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-359"><a href="#fstview-359"><span class="linenos">359</span></a>
</span><span id="fstview-360"><a href="#fstview-360"><span class="linenos">360</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-361"><a href="#fstview-361"><span class="linenos">361</span></a><span class="sd">        ```py</span>
</span><span id="fstview-362"><a href="#fstview-362"><span class="linenos">362</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].remove().fst.src</span>
</span><span id="fstview-363"><a href="#fstview-363"><span class="linenos">363</span></a><span class="sd">        &#39;[0, 3]&#39;</span>
</span><span id="fstview-364"><a href="#fstview-364"><span class="linenos">364</span></a><span class="sd">        ```</span>
</span><span id="fstview-365"><a href="#fstview-365"><span class="linenos">365</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-366"><a href="#fstview-366"><span class="linenos">366</span></a>
</span><span id="fstview-367"><a href="#fstview-367"><span class="linenos">367</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-368"><a href="#fstview-368"><span class="linenos">368</span></a>
</span><span id="fstview-369"><a href="#fstview-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-370"><a href="#fstview-370"><span class="linenos">370</span></a>
</span><span id="fstview-371"><a href="#fstview-371"><span class="linenos">371</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview-372"><a href="#fstview-372"><span class="linenos">372</span></a>
</span><span id="fstview-373"><a href="#fstview-373"><span class="linenos">373</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="fstview-374"><a href="#fstview-374"><span class="linenos">374</span></a>
</span><span id="fstview-375"><a href="#fstview-375"><span class="linenos">375</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-376"><a href="#fstview-376"><span class="linenos">376</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert into this slice at a specific index.</span>
</span><span id="fstview-377"><a href="#fstview-377"><span class="linenos">377</span></a>
</span><span id="fstview-378"><a href="#fstview-378"><span class="linenos">378</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-379"><a href="#fstview-379"><span class="linenos">379</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-380"><a href="#fstview-380"><span class="linenos">380</span></a>
</span><span id="fstview-381"><a href="#fstview-381"><span class="linenos">381</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-382"><a href="#fstview-382"><span class="linenos">382</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to insert.</span>
</span><span id="fstview-383"><a href="#fstview-383"><span class="linenos">383</span></a><span class="sd">        - `idx`: Index to insert BEFORE. Can be `&#39;end&#39;` to indicate add at end of slice.</span>
</span><span id="fstview-384"><a href="#fstview-384"><span class="linenos">384</span></a><span class="sd">        - `one`: If `True` then will insert `code` as a single item. Otherwise `False` will attempt a slice insertion</span>
</span><span id="fstview-385"><a href="#fstview-385"><span class="linenos">385</span></a><span class="sd">            (type must be compatible).</span>
</span><span id="fstview-386"><a href="#fstview-386"><span class="linenos">386</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-387"><a href="#fstview-387"><span class="linenos">387</span></a>
</span><span id="fstview-388"><a href="#fstview-388"><span class="linenos">388</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-389"><a href="#fstview-389"><span class="linenos">389</span></a><span class="sd">        ```py</span>
</span><span id="fstview-390"><a href="#fstview-390"><span class="linenos">390</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, 1).fst.src</span>
</span><span id="fstview-391"><a href="#fstview-391"><span class="linenos">391</span></a><span class="sd">        &#39;[0, (4, 5), 1, 2, 3]&#39;</span>
</span><span id="fstview-392"><a href="#fstview-392"><span class="linenos">392</span></a>
</span><span id="fstview-393"><a href="#fstview-393"><span class="linenos">393</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, &#39;end&#39;, one=False).fst.src</span>
</span><span id="fstview-394"><a href="#fstview-394"><span class="linenos">394</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="fstview-395"><a href="#fstview-395"><span class="linenos">395</span></a>
</span><span id="fstview-396"><a href="#fstview-396"><span class="linenos">396</span></a><span class="sd">        &gt;&gt;&gt; # same as &#39;end&#39; but &#39;end&#39; is always &#39;end&#39;</span>
</span><span id="fstview-397"><a href="#fstview-397"><span class="linenos">397</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, 4, one=False).fst.src</span>
</span><span id="fstview-398"><a href="#fstview-398"><span class="linenos">398</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="fstview-399"><a href="#fstview-399"><span class="linenos">399</span></a>
</span><span id="fstview-400"><a href="#fstview-400"><span class="linenos">400</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].insert(&#39;*star&#39;).fst.src</span>
</span><span id="fstview-401"><a href="#fstview-401"><span class="linenos">401</span></a><span class="sd">        &#39;[0, *star, 1, 2, 3]&#39;</span>
</span><span id="fstview-402"><a href="#fstview-402"><span class="linenos">402</span></a><span class="sd">        ```</span>
</span><span id="fstview-403"><a href="#fstview-403"><span class="linenos">403</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-404"><a href="#fstview-404"><span class="linenos">404</span></a>
</span><span id="fstview-405"><a href="#fstview-405"><span class="linenos">405</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-406"><a href="#fstview-406"><span class="linenos">406</span></a>        <span class="n">idx</span>        <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span> <span class="k">else</span>
</span><span id="fstview-407"><a href="#fstview-407"><span class="linenos">407</span></a>                      <span class="n">stop</span>      <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">l</span> <span class="o">:=</span> <span class="p">(</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">))</span> <span class="k">else</span>
</span><span id="fstview-408"><a href="#fstview-408"><span class="linenos">408</span></a>                      <span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="n">idx</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idx</span> <span class="o">+</span> <span class="n">l</span><span class="p">)))</span>
</span><span id="fstview-409"><a href="#fstview-409"><span class="linenos">409</span></a>
</span><span id="fstview-410"><a href="#fstview-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-411"><a href="#fstview-411"><span class="linenos">411</span></a>
</span><span id="fstview-412"><a href="#fstview-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview-413"><a href="#fstview-413"><span class="linenos">413</span></a>
</span><span id="fstview-414"><a href="#fstview-414"><span class="linenos">414</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="fstview-415"><a href="#fstview-415"><span class="linenos">415</span></a>
</span><span id="fstview-416"><a href="#fstview-416"><span class="linenos">416</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-417"><a href="#fstview-417"><span class="linenos">417</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Append `code` as a single element to the end of this slice.</span>
</span><span id="fstview-418"><a href="#fstview-418"><span class="linenos">418</span></a>
</span><span id="fstview-419"><a href="#fstview-419"><span class="linenos">419</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-420"><a href="#fstview-420"><span class="linenos">420</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-421"><a href="#fstview-421"><span class="linenos">421</span></a>
</span><span id="fstview-422"><a href="#fstview-422"><span class="linenos">422</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-423"><a href="#fstview-423"><span class="linenos">423</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to append.</span>
</span><span id="fstview-424"><a href="#fstview-424"><span class="linenos">424</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-425"><a href="#fstview-425"><span class="linenos">425</span></a>
</span><span id="fstview-426"><a href="#fstview-426"><span class="linenos">426</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-427"><a href="#fstview-427"><span class="linenos">427</span></a><span class="sd">        ```py</span>
</span><span id="fstview-428"><a href="#fstview-428"><span class="linenos">428</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.append(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-429"><a href="#fstview-429"><span class="linenos">429</span></a><span class="sd">        &#39;[0, 1, 2, 3, (4, 5)]&#39;</span>
</span><span id="fstview-430"><a href="#fstview-430"><span class="linenos">430</span></a>
</span><span id="fstview-431"><a href="#fstview-431"><span class="linenos">431</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].append(&#39;*star&#39;).fst.src</span>
</span><span id="fstview-432"><a href="#fstview-432"><span class="linenos">432</span></a><span class="sd">        &#39;[0, 1, 2, *star, 3]&#39;</span>
</span><span id="fstview-433"><a href="#fstview-433"><span class="linenos">433</span></a><span class="sd">        ```</span>
</span><span id="fstview-434"><a href="#fstview-434"><span class="linenos">434</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-435"><a href="#fstview-435"><span class="linenos">435</span></a>
</span><span id="fstview-436"><a href="#fstview-436"><span class="linenos">436</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-437"><a href="#fstview-437"><span class="linenos">437</span></a>
</span><span id="fstview-438"><a href="#fstview-438"><span class="linenos">438</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="fstview-439"><a href="#fstview-439"><span class="linenos">439</span></a>
</span><span id="fstview-440"><a href="#fstview-440"><span class="linenos">440</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="fstview-441"><a href="#fstview-441"><span class="linenos">441</span></a>
</span><span id="fstview-442"><a href="#fstview-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-443"><a href="#fstview-443"><span class="linenos">443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend this slice with the slice in `code` (type must be compatible).</span>
</span><span id="fstview-444"><a href="#fstview-444"><span class="linenos">444</span></a>
</span><span id="fstview-445"><a href="#fstview-445"><span class="linenos">445</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-446"><a href="#fstview-446"><span class="linenos">446</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-447"><a href="#fstview-447"><span class="linenos">447</span></a>
</span><span id="fstview-448"><a href="#fstview-448"><span class="linenos">448</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-449"><a href="#fstview-449"><span class="linenos">449</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` slice to extend.</span>
</span><span id="fstview-450"><a href="#fstview-450"><span class="linenos">450</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-451"><a href="#fstview-451"><span class="linenos">451</span></a>
</span><span id="fstview-452"><a href="#fstview-452"><span class="linenos">452</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-453"><a href="#fstview-453"><span class="linenos">453</span></a><span class="sd">        ```py</span>
</span><span id="fstview-454"><a href="#fstview-454"><span class="linenos">454</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.extend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-455"><a href="#fstview-455"><span class="linenos">455</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="fstview-456"><a href="#fstview-456"><span class="linenos">456</span></a>
</span><span id="fstview-457"><a href="#fstview-457"><span class="linenos">457</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].extend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-458"><a href="#fstview-458"><span class="linenos">458</span></a><span class="sd">        &#39;[0, 1, 2, 4, 5, 3]&#39;</span>
</span><span id="fstview-459"><a href="#fstview-459"><span class="linenos">459</span></a><span class="sd">        ```</span>
</span><span id="fstview-460"><a href="#fstview-460"><span class="linenos">460</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-461"><a href="#fstview-461"><span class="linenos">461</span></a>
</span><span id="fstview-462"><a href="#fstview-462"><span class="linenos">462</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-463"><a href="#fstview-463"><span class="linenos">463</span></a>
</span><span id="fstview-464"><a href="#fstview-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-465"><a href="#fstview-465"><span class="linenos">465</span></a>
</span><span id="fstview-466"><a href="#fstview-466"><span class="linenos">466</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span><span class="p">)</span>
</span><span id="fstview-467"><a href="#fstview-467"><span class="linenos">467</span></a>
</span><span id="fstview-468"><a href="#fstview-468"><span class="linenos">468</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="fstview-469"><a href="#fstview-469"><span class="linenos">469</span></a>
</span><span id="fstview-470"><a href="#fstview-470"><span class="linenos">470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-471"><a href="#fstview-471"><span class="linenos">471</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;prepend `code` as a single element to the beginning of this slice.</span>
</span><span id="fstview-472"><a href="#fstview-472"><span class="linenos">472</span></a>
</span><span id="fstview-473"><a href="#fstview-473"><span class="linenos">473</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-474"><a href="#fstview-474"><span class="linenos">474</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-475"><a href="#fstview-475"><span class="linenos">475</span></a>
</span><span id="fstview-476"><a href="#fstview-476"><span class="linenos">476</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-477"><a href="#fstview-477"><span class="linenos">477</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to preappend.</span>
</span><span id="fstview-478"><a href="#fstview-478"><span class="linenos">478</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-479"><a href="#fstview-479"><span class="linenos">479</span></a>
</span><span id="fstview-480"><a href="#fstview-480"><span class="linenos">480</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-481"><a href="#fstview-481"><span class="linenos">481</span></a><span class="sd">        ```py</span>
</span><span id="fstview-482"><a href="#fstview-482"><span class="linenos">482</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.prepend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-483"><a href="#fstview-483"><span class="linenos">483</span></a><span class="sd">        &#39;[(4, 5), 0, 1, 2, 3]&#39;</span>
</span><span id="fstview-484"><a href="#fstview-484"><span class="linenos">484</span></a>
</span><span id="fstview-485"><a href="#fstview-485"><span class="linenos">485</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].prepend(&#39;*star&#39;).fst.src</span>
</span><span id="fstview-486"><a href="#fstview-486"><span class="linenos">486</span></a><span class="sd">        &#39;[0, *star, 1, 2, 3]&#39;</span>
</span><span id="fstview-487"><a href="#fstview-487"><span class="linenos">487</span></a><span class="sd">        ```</span>
</span><span id="fstview-488"><a href="#fstview-488"><span class="linenos">488</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-489"><a href="#fstview-489"><span class="linenos">489</span></a>
</span><span id="fstview-490"><a href="#fstview-490"><span class="linenos">490</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-491"><a href="#fstview-491"><span class="linenos">491</span></a>
</span><span id="fstview-492"><a href="#fstview-492"><span class="linenos">492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="fstview-493"><a href="#fstview-493"><span class="linenos">493</span></a>
</span><span id="fstview-494"><a href="#fstview-494"><span class="linenos">494</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span><span id="fstview-495"><a href="#fstview-495"><span class="linenos">495</span></a>
</span><span id="fstview-496"><a href="#fstview-496"><span class="linenos">496</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">prextend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview-497"><a href="#fstview-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend the beginning of this slice with the slice in `code` (type must be compatible).</span>
</span><span id="fstview-498"><a href="#fstview-498"><span class="linenos">498</span></a>
</span><span id="fstview-499"><a href="#fstview-499"><span class="linenos">499</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview-500"><a href="#fstview-500"><span class="linenos">500</span></a><span class="sd">        - `self`</span>
</span><span id="fstview-501"><a href="#fstview-501"><span class="linenos">501</span></a>
</span><span id="fstview-502"><a href="#fstview-502"><span class="linenos">502</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview-503"><a href="#fstview-503"><span class="linenos">503</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to extend at the start.</span>
</span><span id="fstview-504"><a href="#fstview-504"><span class="linenos">504</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview-505"><a href="#fstview-505"><span class="linenos">505</span></a>
</span><span id="fstview-506"><a href="#fstview-506"><span class="linenos">506</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview-507"><a href="#fstview-507"><span class="linenos">507</span></a><span class="sd">        ```py</span>
</span><span id="fstview-508"><a href="#fstview-508"><span class="linenos">508</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.prextend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-509"><a href="#fstview-509"><span class="linenos">509</span></a><span class="sd">        &#39;[4, 5, 0, 1, 2, 3]&#39;</span>
</span><span id="fstview-510"><a href="#fstview-510"><span class="linenos">510</span></a>
</span><span id="fstview-511"><a href="#fstview-511"><span class="linenos">511</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].prextend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview-512"><a href="#fstview-512"><span class="linenos">512</span></a><span class="sd">        &#39;[0, 4, 5, 1, 2, 3]&#39;</span>
</span><span id="fstview-513"><a href="#fstview-513"><span class="linenos">513</span></a><span class="sd">        ```</span>
</span><span id="fstview-514"><a href="#fstview-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview-515"><a href="#fstview-515"><span class="linenos">515</span></a>
</span><span id="fstview-516"><a href="#fstview-516"><span class="linenos">516</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview-517"><a href="#fstview-517"><span class="linenos">517</span></a>
</span><span id="fstview-518"><a href="#fstview-518"><span class="linenos">518</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview-519"><a href="#fstview-519"><span class="linenos">519</span></a>
</span><span id="fstview-520"><a href="#fstview-520"><span class="linenos">520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview-521"><a href="#fstview-521"><span class="linenos">521</span></a>
</span><span id="fstview-522"><a href="#fstview-522"><span class="linenos">522</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>View for a list of <code>AST</code> nodes in a body, or any other field which is a list of values (not necessarily <code>AST</code>
nodes), of an <code>FST</code> node.</p>

<p>This object acts as a list of corresponding <code>FST</code> nodes if applicable or otherwise strings (for example for a list
of <code>Global.names</code>). It is only meant for short term convenience along the lines of <code>fst.body.append(...)</code>. Outside
of this use, operations on the target <code>FST</code> node of the view which are not effectuated through the view may
invalidate the <code><a href="#fstview.start">start</a></code>  and <code><a href="#fstview.stop">stop</a></code> positions and even the <code><a href="#fstview.fst">fst</a></code> stored in the view if they change the size of the
list of nodes or reparse. Especially raw operations which reparse entire statements and can easily invalidate an
<code><a href="#fstview">fstview</a></code> even if performed directly on it.</p>

<p>Nodes can be gotten or put via indexing. Nodes which are accessed through indexing (normal or slice) are not
automatically copied, if a copy is desired then do <code>fst.body[start:stop].copy()</code>. Slice assignments also work but
will always assign a slice to the range. If you want to assign an individual item to this range or a subrange then
use <code>fst.body[start:stop].replace(..., one=True)</code>.</p>

<p><strong>WARNING!</strong> Keep in mind that operations on NODES or even CHILD VIEWS instead of on THIS VIEW will not update this
view. Do not hold on to views, use them and discard.</p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">view</span> <span class="o">=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">view</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span>  <span class="c1"># operation on node</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">view</span>  <span class="c1"># notice the size of the view is 3 but there are only two elements</span>
<span class="o">&lt;&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">6</span><span class="o">&gt;.</span><span class="n">elts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">1..0</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">4..0</span><span class="p">,</span><span class="mi">5</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">view</span> <span class="o">=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">view</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span><span class="o">.</span><span class="n">cut</span><span class="p">()</span>  <span class="c1"># not an operation on this view but a child view</span>
<span class="o">&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">6</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">view</span>  <span class="c1"># WRONG again</span>
<span class="o">&lt;&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">3</span><span class="o">&gt;.</span><span class="n">elts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">1..0</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>
</code></pre>
</div>

<p>This object is meant to be, and is normally created automatically by accessing <code>AST</code> list fields on an <code>FST</code> node.</p>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span>
<span class="o">&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">12</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span>
<span class="o">&lt;&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">12</span><span class="o">&gt;.</span><span class="n">elts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">1..0</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">4..0</span><span class="p">,</span><span class="mi">5</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">7..0</span><span class="p">,</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">10..0</span><span class="p">,</span><span class="mi">11</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">4..0</span><span class="p">,</span><span class="mi">5</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;1&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&lt;&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">12</span><span class="o">&gt;.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">4..0</span><span class="p">,</span><span class="mi">5</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">7..0</span><span class="p">,</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="o">&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">6</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">_</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[1, 2]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;[4]&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 4, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:]</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;*star&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[*star]&#39;</span>
</code></pre>
</div>
</div>


                            <div id="fstview.fst" class="classattr">
                                <div class="attr variable">
            <span class="name">fst</span><span class="annotation">: <a href="fst.html#FST">fst.fst.FST</a></span>

        
    </div>
    <a class="headerlink" href="#fstview.fst"></a>
    
            <div class="docstring"><p>The target <code>FST</code> node this view references.</p>
</div>


                            </div>
                            <div id="fstview.field" class="classattr">
                                <div class="attr variable">
            <span class="name">field</span><span class="annotation">: str</span>

        
    </div>
    <a class="headerlink" href="#fstview.field"></a>
    
            <div class="docstring"><p>The target field this view references.</p>
</div>


                            </div>
                            <div id="fstview.start" class="classattr">
                                <div class="attr variable">
            <span class="name">start</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#fstview.start"></a>
    
            <div class="docstring"><p>Start position within the target field list this view references.</p>
</div>


                            </div>
                            <div id="fstview.stop" class="classattr">
                                <div class="attr variable">
            <span class="name">stop</span><span class="annotation">: int</span>

        
    </div>
    <a class="headerlink" href="#fstview.stop"></a>
    
            <div class="docstring"><p>One past the last element within the target field list this view references.</p>
</div>


                            </div>
                            <div id="fstview.root" class="classattr">
                                        <input id="fstview.root-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr variable">
            <span class="name">root</span><span class="annotation">: <a href="fst.html#FST">fst.fst.FST</a></span>

                <label class="view-source-button" for="fstview.root-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.root"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.root-95"><a href="#fstview.root-95"><span class="linenos">95</span></a>    <span class="nd">@property</span>
</span><span id="fstview.root-96"><a href="#fstview.root-96"><span class="linenos">96</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">root</span><span class="p">(</span><span class="bp">self</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="fstview.root-97"><a href="#fstview.root-97"><span class="linenos">97</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Root node of the `FST` node this view belongs to.&quot;&quot;&quot;</span>
</span><span id="fstview.root-98"><a href="#fstview.root-98"><span class="linenos">98</span></a>
</span><span id="fstview.root-99"><a href="#fstview.root-99"><span class="linenos">99</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">root</span>
</span></pre></div>


            <div class="docstring"><p>Root node of the <code>FST</code> node this view belongs to.</p>
</div>


                            </div>
                            <div id="fstview.__getitem__" class="classattr">
                                        <input id="fstview.__getitem__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">__getitem__</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span> <span class="o">|</span> <span class="nb">str</span></span><span class="return-annotation">) -> <span class="n">Any</span>:</span></span>

                <label class="view-source-button" for="fstview.__getitem__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.__getitem__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.__getitem__-115"><a href="#fstview.__getitem__-115"><span class="linenos">115</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__getitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span> <span class="o">|</span> <span class="nb">str</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">Any</span><span class="p">:</span>
</span><span id="fstview.__getitem__-116"><a href="#fstview.__getitem__-116"><span class="linenos">116</span></a><span class="w">        </span><span class="sa">r</span><span class="sd">&quot;&quot;&quot;Get a single item or a slice view from this slice view. All indices (including negative) are relative to the</span>
</span><span id="fstview.__getitem__-117"><a href="#fstview.__getitem__-117"><span class="linenos">117</span></a><span class="sd">        bounds of this view. This is just an access, not a cut or a copy, so if you want a copy you must explicitly do</span>
</span><span id="fstview.__getitem__-118"><a href="#fstview.__getitem__-118"><span class="linenos">118</span></a><span class="sd">        `.copy()` on the returned value.</span>
</span><span id="fstview.__getitem__-119"><a href="#fstview.__getitem__-119"><span class="linenos">119</span></a>
</span><span id="fstview.__getitem__-120"><a href="#fstview.__getitem__-120"><span class="linenos">120</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when dealing with</span>
</span><span id="fstview.__getitem__-121"><a href="#fstview.__getitem__-121"><span class="linenos">121</span></a><span class="sd">        return values which may be `None` or may not be `FST` nodes.</span>
</span><span id="fstview.__getitem__-122"><a href="#fstview.__getitem__-122"><span class="linenos">122</span></a>
</span><span id="fstview.__getitem__-123"><a href="#fstview.__getitem__-123"><span class="linenos">123</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.__getitem__-124"><a href="#fstview.__getitem__-124"><span class="linenos">124</span></a><span class="sd">        - `idx`: The index or `slice` where to get the element(s) from. If is a single string then this it will return</span>
</span><span id="fstview.__getitem__-125"><a href="#fstview.__getitem__-125"><span class="linenos">125</span></a><span class="sd">            the first function, class or variable assignment to the name matching this string (if is a list of</span>
</span><span id="fstview.__getitem__-126"><a href="#fstview.__getitem__-126"><span class="linenos">126</span></a><span class="sd">            statements, error otherwise). This is just a convenience and will probably change / expand in the future.</span>
</span><span id="fstview.__getitem__-127"><a href="#fstview.__getitem__-127"><span class="linenos">127</span></a>
</span><span id="fstview.__getitem__-128"><a href="#fstview.__getitem__-128"><span class="linenos">128</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.__getitem__-129"><a href="#fstview.__getitem__-129"><span class="linenos">129</span></a><span class="sd">        - `FST | fstview`: Either a single `FST` node if accessing a single item or a new `fstview` view according to</span>
</span><span id="fstview.__getitem__-130"><a href="#fstview.__getitem__-130"><span class="linenos">130</span></a><span class="sd">            the slice passed.</span>
</span><span id="fstview.__getitem__-131"><a href="#fstview.__getitem__-131"><span class="linenos">131</span></a>
</span><span id="fstview.__getitem__-132"><a href="#fstview.__getitem__-132"><span class="linenos">132</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.__getitem__-133"><a href="#fstview.__getitem__-133"><span class="linenos">133</span></a><span class="sd">        ```py</span>
</span><span id="fstview.__getitem__-134"><a href="#fstview.__getitem__-134"><span class="linenos">134</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1].src</span>
</span><span id="fstview.__getitem__-135"><a href="#fstview.__getitem__-135"><span class="linenos">135</span></a><span class="sd">        &#39;1&#39;</span>
</span><span id="fstview.__getitem__-136"><a href="#fstview.__getitem__-136"><span class="linenos">136</span></a>
</span><span id="fstview.__getitem__-137"><a href="#fstview.__getitem__-137"><span class="linenos">137</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[:3]</span>
</span><span id="fstview.__getitem__-138"><a href="#fstview.__getitem__-138"><span class="linenos">138</span></a><span class="sd">        &lt;&lt;List ROOT 0,0..0,12&gt;.elts[0:3] [&lt;Constant 0,1..0,2&gt;, &lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;]&gt;</span>
</span><span id="fstview.__getitem__-139"><a href="#fstview.__getitem__-139"><span class="linenos">139</span></a>
</span><span id="fstview.__getitem__-140"><a href="#fstview.__getitem__-140"><span class="linenos">140</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[:3].copy().src</span>
</span><span id="fstview.__getitem__-141"><a href="#fstview.__getitem__-141"><span class="linenos">141</span></a><span class="sd">        &#39;[0, 1, 2]&#39;</span>
</span><span id="fstview.__getitem__-142"><a href="#fstview.__getitem__-142"><span class="linenos">142</span></a>
</span><span id="fstview.__getitem__-143"><a href="#fstview.__getitem__-143"><span class="linenos">143</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[-3:]</span>
</span><span id="fstview.__getitem__-144"><a href="#fstview.__getitem__-144"><span class="linenos">144</span></a><span class="sd">        &lt;&lt;List ROOT 0,0..0,12&gt;.elts[1:4] [&lt;Constant 0,4..0,5&gt;, &lt;Constant 0,7..0,8&gt;, &lt;Constant 0,10..0,11&gt;]&gt;</span>
</span><span id="fstview.__getitem__-145"><a href="#fstview.__getitem__-145"><span class="linenos">145</span></a>
</span><span id="fstview.__getitem__-146"><a href="#fstview.__getitem__-146"><span class="linenos">146</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;def fun(): pass\nclass cls: pass\nvar = val&#39;).body[&#39;cls&#39;]</span>
</span><span id="fstview.__getitem__-147"><a href="#fstview.__getitem__-147"><span class="linenos">147</span></a><span class="sd">        &lt;ClassDef 1,0..1,15&gt;</span>
</span><span id="fstview.__getitem__-148"><a href="#fstview.__getitem__-148"><span class="linenos">148</span></a>
</span><span id="fstview.__getitem__-149"><a href="#fstview.__getitem__-149"><span class="linenos">149</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;global a, b, c&#39;).names</span>
</span><span id="fstview.__getitem__-150"><a href="#fstview.__getitem__-150"><span class="linenos">150</span></a><span class="sd">        &lt;&lt;Global ROOT 0,0..0,14&gt;.names[0:3] [&#39;a&#39;, &#39;b&#39;, &#39;c&#39;]&gt;</span>
</span><span id="fstview.__getitem__-151"><a href="#fstview.__getitem__-151"><span class="linenos">151</span></a>
</span><span id="fstview.__getitem__-152"><a href="#fstview.__getitem__-152"><span class="linenos">152</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;global a, b, c&#39;).names[1]</span>
</span><span id="fstview.__getitem__-153"><a href="#fstview.__getitem__-153"><span class="linenos">153</span></a><span class="sd">        &#39;b&#39;</span>
</span><span id="fstview.__getitem__-154"><a href="#fstview.__getitem__-154"><span class="linenos">154</span></a><span class="sd">        ```</span>
</span><span id="fstview.__getitem__-155"><a href="#fstview.__getitem__-155"><span class="linenos">155</span></a><span class="sd">        @public</span>
</span><span id="fstview.__getitem__-156"><a href="#fstview.__getitem__-156"><span class="linenos">156</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.__getitem__-157"><a href="#fstview.__getitem__-157"><span class="linenos">157</span></a>
</span><span id="fstview.__getitem__-158"><a href="#fstview.__getitem__-158"><span class="linenos">158</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview.__getitem__-159"><a href="#fstview.__getitem__-159"><span class="linenos">159</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="fstview.__getitem__-160"><a href="#fstview.__getitem__-160"><span class="linenos">160</span></a>
</span><span id="fstview.__getitem__-161"><a href="#fstview.__getitem__-161"><span class="linenos">161</span></a>            <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span> <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)[</span><span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">],</span> <span class="n">AST</span><span class="p">)</span> <span class="k">else</span> <span class="n">a</span>
</span><span id="fstview.__getitem__-162"><a href="#fstview.__getitem__-162"><span class="linenos">162</span></a>
</span><span id="fstview.__getitem__-163"><a href="#fstview.__getitem__-163"><span class="linenos">163</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">str</span><span class="p">):</span>
</span><span id="fstview.__getitem__-164"><a href="#fstview.__getitem__-164"><span class="linenos">164</span></a>            <span class="k">if</span> <span class="ow">not</span> <span class="p">(</span><span class="n">a</span> <span class="o">:=</span> <span class="n">get_func_class_or_ass_by_name</span><span class="p">(</span><span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)[</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span> <span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">],</span> <span class="n">idx</span><span class="p">)):</span>
</span><span id="fstview.__getitem__-165"><a href="#fstview.__getitem__-165"><span class="linenos">165</span></a>                <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="sa">f</span><span class="s2">&quot;function, class or variable &#39;</span><span class="si">{</span><span class="n">idx</span><span class="si">}</span><span class="s2">&#39; not found&quot;</span><span class="p">)</span>
</span><span id="fstview.__getitem__-166"><a href="#fstview.__getitem__-166"><span class="linenos">166</span></a>
</span><span id="fstview.__getitem__-167"><a href="#fstview.__getitem__-167"><span class="linenos">167</span></a>            <span class="k">return</span> <span class="n">a</span><span class="o">.</span><span class="n">f</span>
</span><span id="fstview.__getitem__-168"><a href="#fstview.__getitem__-168"><span class="linenos">168</span></a>
</span><span id="fstview.__getitem__-169"><a href="#fstview.__getitem__-169"><span class="linenos">169</span></a>        <span class="k">if</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="fstview.__getitem__-170"><a href="#fstview.__getitem__-170"><span class="linenos">170</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="fstview.__getitem__-171"><a href="#fstview.__getitem__-171"><span class="linenos">171</span></a>
</span><span id="fstview.__getitem__-172"><a href="#fstview.__getitem__-172"><span class="linenos">172</span></a>        <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="fstview.__getitem__-173"><a href="#fstview.__getitem__-173"><span class="linenos">173</span></a>
</span><span id="fstview.__getitem__-174"><a href="#fstview.__getitem__-174"><span class="linenos">174</span></a>        <span class="k">return</span> <span class="n">fstview</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Get a single item or a slice view from this slice view. All indices (including negative) are relative to the
bounds of this view. This is just an access, not a cut or a copy, so if you want a copy you must explicitly do
<code>.copy()</code> on the returned value.</p>

<p>Note that <code><a href="#fstview">fstview</a></code> can also hold references to non-AST lists of items, so keep this in mind when dealing with
return values which may be <code>None</code> or may not be <code>FST</code> nodes.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>idx</code>: The index or <code>slice</code> where to get the element(s) from. If is a single string then this it will return
the first function, class or variable assignment to the name matching this string (if is a list of
statements, error otherwise). This is just a convenience and will probably change / expand in the future.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>FST | fstview</code>: Either a single <code>FST</code> node if accessing a single item or a new <code><a href="#fstview">fstview</a></code> view according to
the slice passed.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;1&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span>
<span class="o">&lt;&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">12</span><span class="o">&gt;.</span><span class="n">elts</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">1..0</span><span class="p">,</span><span class="mi">2</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">4..0</span><span class="p">,</span><span class="mi">5</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">7..0</span><span class="p">,</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span>
<span class="o">&lt;&lt;</span><span class="n">List</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">12</span><span class="o">&gt;.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">4</span><span class="p">]</span> <span class="p">[</span><span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">4..0</span><span class="p">,</span><span class="mi">5</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">7..0</span><span class="p">,</span><span class="mi">8</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">Constant</span> <span class="mi">0</span><span class="p">,</span><span class="mf">10..0</span><span class="p">,</span><span class="mi">11</span><span class="o">&gt;</span><span class="p">]</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;def fun(): pass</span><span class="se">\n</span><span class="s1">class cls: pass</span><span class="se">\n</span><span class="s1">var = val&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">body</span><span class="p">[</span><span class="s1">&#39;cls&#39;</span><span class="p">]</span>
<span class="o">&lt;</span><span class="n">ClassDef</span> <span class="mi">1</span><span class="p">,</span><span class="mf">0..1</span><span class="p">,</span><span class="mi">15</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;global a, b, c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">names</span>
<span class="o">&lt;&lt;</span><span class="n">Global</span> <span class="n">ROOT</span> <span class="mi">0</span><span class="p">,</span><span class="mf">0..0</span><span class="p">,</span><span class="mi">14</span><span class="o">&gt;.</span><span class="n">names</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span> <span class="p">[</span><span class="s1">&#39;a&#39;</span><span class="p">,</span> <span class="s1">&#39;b&#39;</span><span class="p">,</span> <span class="s1">&#39;c&#39;</span><span class="p">]</span><span class="o">&gt;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;global a, b, c&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">names</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
<span class="s1">&#39;b&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.__setitem__" class="classattr">
                                        <input id="fstview.__setitem__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">__setitem__</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="fstview.__setitem__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.__setitem__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.__setitem__-176"><a href="#fstview.__setitem__-176"><span class="linenos">176</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__setitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span> <span class="o">|</span> <span class="kc">None</span><span class="p">):</span>
</span><span id="fstview.__setitem__-177"><a href="#fstview.__setitem__-177"><span class="linenos">177</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Set a single item or a slice view in this slice view. All indices (including negative) are relative to the</span>
</span><span id="fstview.__setitem__-178"><a href="#fstview.__setitem__-178"><span class="linenos">178</span></a><span class="sd">        bounds of this view. This is not just with a set, it is a full `FST` operation.</span>
</span><span id="fstview.__setitem__-179"><a href="#fstview.__setitem__-179"><span class="linenos">179</span></a>
</span><span id="fstview.__setitem__-180"><a href="#fstview.__setitem__-180"><span class="linenos">180</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when assigning</span>
</span><span id="fstview.__setitem__-181"><a href="#fstview.__setitem__-181"><span class="linenos">181</span></a><span class="sd">        values.</span>
</span><span id="fstview.__setitem__-182"><a href="#fstview.__setitem__-182"><span class="linenos">182</span></a>
</span><span id="fstview.__setitem__-183"><a href="#fstview.__setitem__-183"><span class="linenos">183</span></a><span class="sd">        **WARNING!** Currently, for non-AST views, individual value assignment works but slices do not yet.</span>
</span><span id="fstview.__setitem__-184"><a href="#fstview.__setitem__-184"><span class="linenos">184</span></a>
</span><span id="fstview.__setitem__-185"><a href="#fstview.__setitem__-185"><span class="linenos">185</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.__setitem__-186"><a href="#fstview.__setitem__-186"><span class="linenos">186</span></a><span class="sd">        - `idx`: The index or `slice` where to put the element(s).</span>
</span><span id="fstview.__setitem__-187"><a href="#fstview.__setitem__-187"><span class="linenos">187</span></a>
</span><span id="fstview.__setitem__-188"><a href="#fstview.__setitem__-188"><span class="linenos">188</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.__setitem__-189"><a href="#fstview.__setitem__-189"><span class="linenos">189</span></a><span class="sd">        ```py</span>
</span><span id="fstview.__setitem__-190"><a href="#fstview.__setitem__-190"><span class="linenos">190</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1] = &#39;4&#39;; f.src</span>
</span><span id="fstview.__setitem__-191"><a href="#fstview.__setitem__-191"><span class="linenos">191</span></a><span class="sd">        &#39;[0, 4, 2, 3]&#39;</span>
</span><span id="fstview.__setitem__-192"><a href="#fstview.__setitem__-192"><span class="linenos">192</span></a>
</span><span id="fstview.__setitem__-193"><a href="#fstview.__setitem__-193"><span class="linenos">193</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3] = &#39;[5]&#39;; f.src</span>
</span><span id="fstview.__setitem__-194"><a href="#fstview.__setitem__-194"><span class="linenos">194</span></a><span class="sd">        &#39;[5, 3]&#39;</span>
</span><span id="fstview.__setitem__-195"><a href="#fstview.__setitem__-195"><span class="linenos">195</span></a>
</span><span id="fstview.__setitem__-196"><a href="#fstview.__setitem__-196"><span class="linenos">196</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3] = &#39;5,&#39;; f.src</span>
</span><span id="fstview.__setitem__-197"><a href="#fstview.__setitem__-197"><span class="linenos">197</span></a><span class="sd">        &#39;[5, 3]&#39;</span>
</span><span id="fstview.__setitem__-198"><a href="#fstview.__setitem__-198"><span class="linenos">198</span></a>
</span><span id="fstview.__setitem__-199"><a href="#fstview.__setitem__-199"><span class="linenos">199</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[-3:] = &#39;[6]&#39;; f.src</span>
</span><span id="fstview.__setitem__-200"><a href="#fstview.__setitem__-200"><span class="linenos">200</span></a><span class="sd">        &#39;[0, 6]&#39;</span>
</span><span id="fstview.__setitem__-201"><a href="#fstview.__setitem__-201"><span class="linenos">201</span></a>
</span><span id="fstview.__setitem__-202"><a href="#fstview.__setitem__-202"><span class="linenos">202</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:] = &#39;7, 8&#39;; f.src</span>
</span><span id="fstview.__setitem__-203"><a href="#fstview.__setitem__-203"><span class="linenos">203</span></a><span class="sd">        &#39;[7, 8]&#39;</span>
</span><span id="fstview.__setitem__-204"><a href="#fstview.__setitem__-204"><span class="linenos">204</span></a>
</span><span id="fstview.__setitem__-205"><a href="#fstview.__setitem__-205"><span class="linenos">205</span></a><span class="sd">        &gt;&gt;&gt; f = FST(&#39;[0, 1, 2, 3]&#39;)</span>
</span><span id="fstview.__setitem__-206"><a href="#fstview.__setitem__-206"><span class="linenos">206</span></a><span class="sd">        &gt;&gt;&gt; f.elts[2:2] = f.elts[1:3].copy()</span>
</span><span id="fstview.__setitem__-207"><a href="#fstview.__setitem__-207"><span class="linenos">207</span></a><span class="sd">        &gt;&gt;&gt; f.src</span>
</span><span id="fstview.__setitem__-208"><a href="#fstview.__setitem__-208"><span class="linenos">208</span></a><span class="sd">        &#39;[0, 1, 1, 2, 2, 3]&#39;</span>
</span><span id="fstview.__setitem__-209"><a href="#fstview.__setitem__-209"><span class="linenos">209</span></a><span class="sd">        ```</span>
</span><span id="fstview.__setitem__-210"><a href="#fstview.__setitem__-210"><span class="linenos">210</span></a><span class="sd">        @public</span>
</span><span id="fstview.__setitem__-211"><a href="#fstview.__setitem__-211"><span class="linenos">211</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.__setitem__-212"><a href="#fstview.__setitem__-212"><span class="linenos">212</span></a>
</span><span id="fstview.__setitem__-213"><a href="#fstview.__setitem__-213"><span class="linenos">213</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview.__setitem__-214"><a href="#fstview.__setitem__-214"><span class="linenos">214</span></a>            <span class="n">idx</span>        <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="fstview.__setitem__-215"><a href="#fstview.__setitem__-215"><span class="linenos">215</span></a>            <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.__setitem__-216"><a href="#fstview.__setitem__-216"><span class="linenos">216</span></a>
</span><span id="fstview.__setitem__-217"><a href="#fstview.__setitem__-217"><span class="linenos">217</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span> <span class="ow">or</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span>
</span><span id="fstview.__setitem__-218"><a href="#fstview.__setitem__-218"><span class="linenos">218</span></a>
</span><span id="fstview.__setitem__-219"><a href="#fstview.__setitem__-219"><span class="linenos">219</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview.__setitem__-220"><a href="#fstview.__setitem__-220"><span class="linenos">220</span></a>
</span><span id="fstview.__setitem__-221"><a href="#fstview.__setitem__-221"><span class="linenos">221</span></a>        <span class="k">elif</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="fstview.__setitem__-222"><a href="#fstview.__setitem__-222"><span class="linenos">222</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="fstview.__setitem__-223"><a href="#fstview.__setitem__-223"><span class="linenos">223</span></a>
</span><span id="fstview.__setitem__-224"><a href="#fstview.__setitem__-224"><span class="linenos">224</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="fstview.__setitem__-225"><a href="#fstview.__setitem__-225"><span class="linenos">225</span></a>            <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="fstview.__setitem__-226"><a href="#fstview.__setitem__-226"><span class="linenos">226</span></a>            <span class="n">len_before</span>          <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.__setitem__-227"><a href="#fstview.__setitem__-227"><span class="linenos">227</span></a>
</span><span id="fstview.__setitem__-228"><a href="#fstview.__setitem__-228"><span class="linenos">228</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="fstview.__setitem__-229"><a href="#fstview.__setitem__-229"><span class="linenos">229</span></a>
</span><span id="fstview.__setitem__-230"><a href="#fstview.__setitem__-230"><span class="linenos">230</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span></pre></div>


            <div class="docstring"><p>Set a single item or a slice view in this slice view. All indices (including negative) are relative to the
bounds of this view. This is not just with a set, it is a full <code>FST</code> operation.</p>

<p>Note that <code><a href="#fstview">fstview</a></code> can also hold references to non-AST lists of items, so keep this in mind when assigning
values.</p>

<p><strong>WARNING!</strong> Currently, for non-AST views, individual value assignment works but slices do not yet.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>idx</code>: The index or <code>slice</code> where to put the element(s).</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;4&#39;</span><span class="p">;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 4, 2, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;[5]&#39;</span><span class="p">;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[5, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[:</span><span class="mi">3</span><span class="p">]</span> <span class="o">=</span> <span class="s1">&#39;5,&#39;</span><span class="p">;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[5, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:]</span> <span class="o">=</span> <span class="s1">&#39;[6]&#39;</span><span class="p">;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 6]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[:]</span> <span class="o">=</span> <span class="s1">&#39;7, 8&#39;</span><span class="p">;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[7, 8]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span> <span class="o">=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">2</span><span class="p">:</span><span class="mi">2</span><span class="p">]</span> <span class="o">=</span> <span class="n">f</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 1, 2, 2, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.__delitem__" class="classattr">
                                        <input id="fstview.__delitem__-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">__delitem__</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span></span><span class="return-annotation">):</span></span>

                <label class="view-source-button" for="fstview.__delitem__-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.__delitem__"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.__delitem__-232"><a href="#fstview.__delitem__-232"><span class="linenos">232</span></a>    <span class="k">def</span><span class="w"> </span><span class="fm">__delitem__</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="nb">slice</span><span class="p">):</span>
</span><span id="fstview.__delitem__-233"><a href="#fstview.__delitem__-233"><span class="linenos">233</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete a single item or a slice from this slice view. All indices (including negative) are relative to the</span>
</span><span id="fstview.__delitem__-234"><a href="#fstview.__delitem__-234"><span class="linenos">234</span></a><span class="sd">        bounds of this view.</span>
</span><span id="fstview.__delitem__-235"><a href="#fstview.__delitem__-235"><span class="linenos">235</span></a>
</span><span id="fstview.__delitem__-236"><a href="#fstview.__delitem__-236"><span class="linenos">236</span></a><span class="sd">        Note that `fstview` can also hold references to non-AST lists of items, so keep this in mind when assigning</span>
</span><span id="fstview.__delitem__-237"><a href="#fstview.__delitem__-237"><span class="linenos">237</span></a><span class="sd">        values.</span>
</span><span id="fstview.__delitem__-238"><a href="#fstview.__delitem__-238"><span class="linenos">238</span></a>
</span><span id="fstview.__delitem__-239"><a href="#fstview.__delitem__-239"><span class="linenos">239</span></a><span class="sd">        **WARNING!** Currently, for non-AST views, deletion is not supported</span>
</span><span id="fstview.__delitem__-240"><a href="#fstview.__delitem__-240"><span class="linenos">240</span></a>
</span><span id="fstview.__delitem__-241"><a href="#fstview.__delitem__-241"><span class="linenos">241</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.__delitem__-242"><a href="#fstview.__delitem__-242"><span class="linenos">242</span></a><span class="sd">        - `idx`: The index or `slice` to delete.</span>
</span><span id="fstview.__delitem__-243"><a href="#fstview.__delitem__-243"><span class="linenos">243</span></a>
</span><span id="fstview.__delitem__-244"><a href="#fstview.__delitem__-244"><span class="linenos">244</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.__delitem__-245"><a href="#fstview.__delitem__-245"><span class="linenos">245</span></a><span class="sd">        ```py</span>
</span><span id="fstview.__delitem__-246"><a href="#fstview.__delitem__-246"><span class="linenos">246</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1]; f.src</span>
</span><span id="fstview.__delitem__-247"><a href="#fstview.__delitem__-247"><span class="linenos">247</span></a><span class="sd">        &#39;[0, 2, 3]&#39;</span>
</span><span id="fstview.__delitem__-248"><a href="#fstview.__delitem__-248"><span class="linenos">248</span></a>
</span><span id="fstview.__delitem__-249"><a href="#fstview.__delitem__-249"><span class="linenos">249</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:3]; f.src</span>
</span><span id="fstview.__delitem__-250"><a href="#fstview.__delitem__-250"><span class="linenos">250</span></a><span class="sd">        &#39;[3]&#39;</span>
</span><span id="fstview.__delitem__-251"><a href="#fstview.__delitem__-251"><span class="linenos">251</span></a>
</span><span id="fstview.__delitem__-252"><a href="#fstview.__delitem__-252"><span class="linenos">252</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[-3:]; f.src</span>
</span><span id="fstview.__delitem__-253"><a href="#fstview.__delitem__-253"><span class="linenos">253</span></a><span class="sd">        &#39;[0]&#39;</span>
</span><span id="fstview.__delitem__-254"><a href="#fstview.__delitem__-254"><span class="linenos">254</span></a>
</span><span id="fstview.__delitem__-255"><a href="#fstview.__delitem__-255"><span class="linenos">255</span></a><span class="sd">        &gt;&gt;&gt; del (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[:]; f.src</span>
</span><span id="fstview.__delitem__-256"><a href="#fstview.__delitem__-256"><span class="linenos">256</span></a><span class="sd">        &#39;[]&#39;</span>
</span><span id="fstview.__delitem__-257"><a href="#fstview.__delitem__-257"><span class="linenos">257</span></a><span class="sd">        ```</span>
</span><span id="fstview.__delitem__-258"><a href="#fstview.__delitem__-258"><span class="linenos">258</span></a><span class="sd">        @public</span>
</span><span id="fstview.__delitem__-259"><a href="#fstview.__delitem__-259"><span class="linenos">259</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.__delitem__-260"><a href="#fstview.__delitem__-260"><span class="linenos">260</span></a>
</span><span id="fstview.__delitem__-261"><a href="#fstview.__delitem__-261"><span class="linenos">261</span></a>        <span class="k">if</span> <span class="nb">isinstance</span><span class="p">(</span><span class="n">idx</span><span class="p">,</span> <span class="nb">int</span><span class="p">):</span>
</span><span id="fstview.__delitem__-262"><a href="#fstview.__delitem__-262"><span class="linenos">262</span></a>            <span class="n">idx</span> <span class="o">=</span> <span class="n">_fixup_one_index</span><span class="p">((</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="p">)</span>
</span><span id="fstview.__delitem__-263"><a href="#fstview.__delitem__-263"><span class="linenos">263</span></a>
</span><span id="fstview.__delitem__-264"><a href="#fstview.__delitem__-264"><span class="linenos">264</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx</span> <span class="o">+</span> <span class="mi">1</span><span class="p">,</span> <span class="n">field</span><span class="o">=</span><span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="fstview.__delitem__-265"><a href="#fstview.__delitem__-265"><span class="linenos">265</span></a>
</span><span id="fstview.__delitem__-266"><a href="#fstview.__delitem__-266"><span class="linenos">266</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">-</span> <span class="mi">1</span><span class="p">)</span>
</span><span id="fstview.__delitem__-267"><a href="#fstview.__delitem__-267"><span class="linenos">267</span></a>
</span><span id="fstview.__delitem__-268"><a href="#fstview.__delitem__-268"><span class="linenos">268</span></a>        <span class="k">elif</span> <span class="n">idx</span><span class="o">.</span><span class="n">step</span> <span class="ow">is</span> <span class="ow">not</span> <span class="kc">None</span><span class="p">:</span>
</span><span id="fstview.__delitem__-269"><a href="#fstview.__delitem__-269"><span class="linenos">269</span></a>            <span class="k">raise</span> <span class="ne">IndexError</span><span class="p">(</span><span class="s1">&#39;step slicing not supported&#39;</span><span class="p">)</span>
</span><span id="fstview.__delitem__-270"><a href="#fstview.__delitem__-270"><span class="linenos">270</span></a>
</span><span id="fstview.__delitem__-271"><a href="#fstview.__delitem__-271"><span class="linenos">271</span></a>        <span class="k">else</span><span class="p">:</span>
</span><span id="fstview.__delitem__-272"><a href="#fstview.__delitem__-272"><span class="linenos">272</span></a>            <span class="n">idx_start</span><span class="p">,</span> <span class="n">idx_stop</span> <span class="o">=</span> <span class="n">_fixup_slice_indices</span><span class="p">((</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">),</span> <span class="n">idx</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">idx</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span>
</span><span id="fstview.__delitem__-273"><a href="#fstview.__delitem__-273"><span class="linenos">273</span></a>
</span><span id="fstview.__delitem__-274"><a href="#fstview.__delitem__-274"><span class="linenos">274</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_start</span><span class="p">,</span> <span class="n">start</span> <span class="o">+</span> <span class="n">idx_stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">)</span>
</span><span id="fstview.__delitem__-275"><a href="#fstview.__delitem__-275"><span class="linenos">275</span></a>
</span><span id="fstview.__delitem__-276"><a href="#fstview.__delitem__-276"><span class="linenos">276</span></a>            <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="nb">max</span><span class="p">(</span><span class="n">start</span><span class="p">,</span> <span class="n">stop</span> <span class="o">-</span> <span class="p">(</span><span class="n">idx_stop</span> <span class="o">-</span> <span class="n">idx_start</span><span class="p">))</span>
</span></pre></div>


            <div class="docstring"><p>Delete a single item or a slice from this slice view. All indices (including negative) are relative to the
bounds of this view.</p>

<p>Note that <code><a href="#fstview">fstview</a></code> can also hold references to non-AST lists of items, so keep this in mind when assigning
values.</p>

<p><strong>WARNING!</strong> Currently, for non-AST views, deletion is not supported</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>idx</code>: The index or <code>slice</code> to delete.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">];</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 2, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[:</span><span class="mi">3</span><span class="p">];</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="o">-</span><span class="mi">3</span><span class="p">:];</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="k">del</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[:];</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.copy" class="classattr">
                                        <input id="fstview.copy-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">copy</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="fst.html#FST">fst.fst.FST</a></span>:</span></span>

                <label class="view-source-button" for="fstview.copy-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.copy"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.copy-278"><a href="#fstview.copy-278"><span class="linenos">278</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">copy</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="fstview.copy-279"><a href="#fstview.copy-279"><span class="linenos">279</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Copy this slice to a new top-level tree, dedenting and fixing as necessary.</span>
</span><span id="fstview.copy-280"><a href="#fstview.copy-280"><span class="linenos">280</span></a>
</span><span id="fstview.copy-281"><a href="#fstview.copy-281"><span class="linenos">281</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.copy-282"><a href="#fstview.copy-282"><span class="linenos">282</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.copy-283"><a href="#fstview.copy-283"><span class="linenos">283</span></a>
</span><span id="fstview.copy-284"><a href="#fstview.copy-284"><span class="linenos">284</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.copy-285"><a href="#fstview.copy-285"><span class="linenos">285</span></a><span class="sd">        - `FST`: Copied slice.</span>
</span><span id="fstview.copy-286"><a href="#fstview.copy-286"><span class="linenos">286</span></a>
</span><span id="fstview.copy-287"><a href="#fstview.copy-287"><span class="linenos">287</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.copy-288"><a href="#fstview.copy-288"><span class="linenos">288</span></a><span class="sd">        ```py</span>
</span><span id="fstview.copy-289"><a href="#fstview.copy-289"><span class="linenos">289</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].copy().src</span>
</span><span id="fstview.copy-290"><a href="#fstview.copy-290"><span class="linenos">290</span></a><span class="sd">        &#39;[1, 2]&#39;</span>
</span><span id="fstview.copy-291"><a href="#fstview.copy-291"><span class="linenos">291</span></a><span class="sd">        ```</span>
</span><span id="fstview.copy-292"><a href="#fstview.copy-292"><span class="linenos">292</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.copy-293"><a href="#fstview.copy-293"><span class="linenos">293</span></a>
</span><span id="fstview.copy-294"><a href="#fstview.copy-294"><span class="linenos">294</span></a>        <span class="k">return</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">get_slice</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span></pre></div>


            <div class="docstring"><p>Copy this slice to a new top-level tree, dedenting and fixing as necessary.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>FST</code>: Copied slice.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[1, 2]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.cut" class="classattr">
                                        <input id="fstview.cut-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">cut</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="fst.html#FST">fst.fst.FST</a></span>:</span></span>

                <label class="view-source-button" for="fstview.cut-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.cut"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.cut-296"><a href="#fstview.cut-296"><span class="linenos">296</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">cut</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">FST</span><span class="p">:</span>
</span><span id="fstview.cut-297"><a href="#fstview.cut-297"><span class="linenos">297</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Cut out this slice to a new top-level tree (if possible), dedenting and fixing as necessary. Cannot cut root</span>
</span><span id="fstview.cut-298"><a href="#fstview.cut-298"><span class="linenos">298</span></a><span class="sd">        node.</span>
</span><span id="fstview.cut-299"><a href="#fstview.cut-299"><span class="linenos">299</span></a>
</span><span id="fstview.cut-300"><a href="#fstview.cut-300"><span class="linenos">300</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.cut-301"><a href="#fstview.cut-301"><span class="linenos">301</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.cut-302"><a href="#fstview.cut-302"><span class="linenos">302</span></a>
</span><span id="fstview.cut-303"><a href="#fstview.cut-303"><span class="linenos">303</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.cut-304"><a href="#fstview.cut-304"><span class="linenos">304</span></a><span class="sd">        - `FST`: Cut slice.</span>
</span><span id="fstview.cut-305"><a href="#fstview.cut-305"><span class="linenos">305</span></a>
</span><span id="fstview.cut-306"><a href="#fstview.cut-306"><span class="linenos">306</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.cut-307"><a href="#fstview.cut-307"><span class="linenos">307</span></a><span class="sd">        ```py</span>
</span><span id="fstview.cut-308"><a href="#fstview.cut-308"><span class="linenos">308</span></a><span class="sd">        &gt;&gt;&gt; (f := FST(&#39;[0, 1, 2, 3]&#39;)).elts[1:3].cut().src</span>
</span><span id="fstview.cut-309"><a href="#fstview.cut-309"><span class="linenos">309</span></a><span class="sd">        &#39;[1, 2]&#39;</span>
</span><span id="fstview.cut-310"><a href="#fstview.cut-310"><span class="linenos">310</span></a>
</span><span id="fstview.cut-311"><a href="#fstview.cut-311"><span class="linenos">311</span></a><span class="sd">        &gt;&gt;&gt; f.src</span>
</span><span id="fstview.cut-312"><a href="#fstview.cut-312"><span class="linenos">312</span></a><span class="sd">        &#39;[0, 3]&#39;</span>
</span><span id="fstview.cut-313"><a href="#fstview.cut-313"><span class="linenos">313</span></a><span class="sd">        ```</span>
</span><span id="fstview.cut-314"><a href="#fstview.cut-314"><span class="linenos">314</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.cut-315"><a href="#fstview.cut-315"><span class="linenos">315</span></a>
</span><span id="fstview.cut-316"><a href="#fstview.cut-316"><span class="linenos">316</span></a>        <span class="n">f</span>         <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">get_slice</span><span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">cut</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.cut-317"><a href="#fstview.cut-317"><span class="linenos">317</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">start</span>
</span><span id="fstview.cut-318"><a href="#fstview.cut-318"><span class="linenos">318</span></a>
</span><span id="fstview.cut-319"><a href="#fstview.cut-319"><span class="linenos">319</span></a>        <span class="k">return</span> <span class="n">f</span>
</span></pre></div>


            <div class="docstring"><p>Cut out this slice to a new top-level tree (if possible), dedenting and fixing as necessary. Cannot cut root
node.</p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>FST</code>: Cut slice.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="p">(</span><span class="n">f</span> <span class="o">:=</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">))</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">cut</span><span class="p">()</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[1, 2]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">f</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.replace" class="classattr">
                                        <input id="fstview.replace-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">replace</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">,</span> <span class="n">NoneType</span><span class="p">]</span>,</span><span class="param">	<span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.replace-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.replace"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.replace-321"><a href="#fstview.replace-321"><span class="linenos">321</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">replace</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span> <span class="o">|</span> <span class="kc">None</span><span class="p">,</span> <span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.replace-322"><a href="#fstview.replace-322"><span class="linenos">322</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Replace or delete (if `code=None`) this slice.</span>
</span><span id="fstview.replace-323"><a href="#fstview.replace-323"><span class="linenos">323</span></a>
</span><span id="fstview.replace-324"><a href="#fstview.replace-324"><span class="linenos">324</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.replace-325"><a href="#fstview.replace-325"><span class="linenos">325</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.replace-326"><a href="#fstview.replace-326"><span class="linenos">326</span></a>
</span><span id="fstview.replace-327"><a href="#fstview.replace-327"><span class="linenos">327</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.replace-328"><a href="#fstview.replace-328"><span class="linenos">328</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to put. `None` to delete this slice.</span>
</span><span id="fstview.replace-329"><a href="#fstview.replace-329"><span class="linenos">329</span></a><span class="sd">        - `one`: If `True` then will replace the range of this slice with a single item. Otherwise `False` will attempt</span>
</span><span id="fstview.replace-330"><a href="#fstview.replace-330"><span class="linenos">330</span></a><span class="sd">            a slice replacement (type must be compatible).</span>
</span><span id="fstview.replace-331"><a href="#fstview.replace-331"><span class="linenos">331</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.replace-332"><a href="#fstview.replace-332"><span class="linenos">332</span></a>
</span><span id="fstview.replace-333"><a href="#fstview.replace-333"><span class="linenos">333</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.replace-334"><a href="#fstview.replace-334"><span class="linenos">334</span></a><span class="sd">        ```py</span>
</span><span id="fstview.replace-335"><a href="#fstview.replace-335"><span class="linenos">335</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].replace(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.replace-336"><a href="#fstview.replace-336"><span class="linenos">336</span></a><span class="sd">        &#39;[0, (4, 5), 3]&#39;</span>
</span><span id="fstview.replace-337"><a href="#fstview.replace-337"><span class="linenos">337</span></a>
</span><span id="fstview.replace-338"><a href="#fstview.replace-338"><span class="linenos">338</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].replace(&#39;(4, 5)&#39;, one=False).fst.src</span>
</span><span id="fstview.replace-339"><a href="#fstview.replace-339"><span class="linenos">339</span></a><span class="sd">        &#39;[0, 4, 5, 3]&#39;</span>
</span><span id="fstview.replace-340"><a href="#fstview.replace-340"><span class="linenos">340</span></a><span class="sd">        ```</span>
</span><span id="fstview.replace-341"><a href="#fstview.replace-341"><span class="linenos">341</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.replace-342"><a href="#fstview.replace-342"><span class="linenos">342</span></a>
</span><span id="fstview.replace-343"><a href="#fstview.replace-343"><span class="linenos">343</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.replace-344"><a href="#fstview.replace-344"><span class="linenos">344</span></a>
</span><span id="fstview.replace-345"><a href="#fstview.replace-345"><span class="linenos">345</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.replace-346"><a href="#fstview.replace-346"><span class="linenos">346</span></a>
</span><span id="fstview.replace-347"><a href="#fstview.replace-347"><span class="linenos">347</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview.replace-348"><a href="#fstview.replace-348"><span class="linenos">348</span></a>
</span><span id="fstview.replace-349"><a href="#fstview.replace-349"><span class="linenos">349</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Replace or delete (if <code>code=None</code>) this slice.</p>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>code</code>: <code>FST</code>, <code>AST</code> or source <code>str</code> or <code>list[str]</code> to put. <code>None</code> to delete this slice.</li>
<li><code>one</code>: If <code>True</code> then will replace the range of this slice with a single item. Otherwise <code>False</code> will attempt
a slice replacement (type must be compatible).</li>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, (4, 5), 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">replace</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 4, 5, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.remove" class="classattr">
                                        <input id="fstview.remove-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">remove</span><span class="signature pdoc-code condensed">(<span class="param"><span class="bp">self</span>, </span><span class="param"><span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.remove-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.remove"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.remove-351"><a href="#fstview.remove-351"><span class="linenos">351</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">remove</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.remove-352"><a href="#fstview.remove-352"><span class="linenos">352</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Delete this slice, equivalent to `replace(None, ...)`</span>
</span><span id="fstview.remove-353"><a href="#fstview.remove-353"><span class="linenos">353</span></a>
</span><span id="fstview.remove-354"><a href="#fstview.remove-354"><span class="linenos">354</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.remove-355"><a href="#fstview.remove-355"><span class="linenos">355</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.remove-356"><a href="#fstview.remove-356"><span class="linenos">356</span></a>
</span><span id="fstview.remove-357"><a href="#fstview.remove-357"><span class="linenos">357</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.remove-358"><a href="#fstview.remove-358"><span class="linenos">358</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.remove-359"><a href="#fstview.remove-359"><span class="linenos">359</span></a>
</span><span id="fstview.remove-360"><a href="#fstview.remove-360"><span class="linenos">360</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.remove-361"><a href="#fstview.remove-361"><span class="linenos">361</span></a><span class="sd">        ```py</span>
</span><span id="fstview.remove-362"><a href="#fstview.remove-362"><span class="linenos">362</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].remove().fst.src</span>
</span><span id="fstview.remove-363"><a href="#fstview.remove-363"><span class="linenos">363</span></a><span class="sd">        &#39;[0, 3]&#39;</span>
</span><span id="fstview.remove-364"><a href="#fstview.remove-364"><span class="linenos">364</span></a><span class="sd">        ```</span>
</span><span id="fstview.remove-365"><a href="#fstview.remove-365"><span class="linenos">365</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.remove-366"><a href="#fstview.remove-366"><span class="linenos">366</span></a>
</span><span id="fstview.remove-367"><a href="#fstview.remove-367"><span class="linenos">367</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.remove-368"><a href="#fstview.remove-368"><span class="linenos">368</span></a>
</span><span id="fstview.remove-369"><a href="#fstview.remove-369"><span class="linenos">369</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="kc">None</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.remove-370"><a href="#fstview.remove-370"><span class="linenos">370</span></a>
</span><span id="fstview.remove-371"><a href="#fstview.remove-371"><span class="linenos">371</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview.remove-372"><a href="#fstview.remove-372"><span class="linenos">372</span></a>
</span><span id="fstview.remove-373"><a href="#fstview.remove-373"><span class="linenos">373</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Delete this slice, equivalent to <code>replace(None, ...)</code></p>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">remove</span><span class="p">()</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.insert" class="classattr">
                                        <input id="fstview.insert-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">insert</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="n">idx</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="nb">int</span><span class="p">,</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]]</span> <span class="o">=</span> <span class="mi">0</span>,</span><span class="param">	<span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.insert-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.insert"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.insert-375"><a href="#fstview.insert-375"><span class="linenos">375</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">insert</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="n">idx</span><span class="p">:</span> <span class="nb">int</span> <span class="o">|</span> <span class="n">Literal</span><span class="p">[</span><span class="s1">&#39;end&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="mi">0</span><span class="p">,</span> <span class="n">one</span><span class="p">:</span> <span class="nb">bool</span> <span class="o">=</span> <span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.insert-376"><a href="#fstview.insert-376"><span class="linenos">376</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Insert into this slice at a specific index.</span>
</span><span id="fstview.insert-377"><a href="#fstview.insert-377"><span class="linenos">377</span></a>
</span><span id="fstview.insert-378"><a href="#fstview.insert-378"><span class="linenos">378</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.insert-379"><a href="#fstview.insert-379"><span class="linenos">379</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.insert-380"><a href="#fstview.insert-380"><span class="linenos">380</span></a>
</span><span id="fstview.insert-381"><a href="#fstview.insert-381"><span class="linenos">381</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.insert-382"><a href="#fstview.insert-382"><span class="linenos">382</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to insert.</span>
</span><span id="fstview.insert-383"><a href="#fstview.insert-383"><span class="linenos">383</span></a><span class="sd">        - `idx`: Index to insert BEFORE. Can be `&#39;end&#39;` to indicate add at end of slice.</span>
</span><span id="fstview.insert-384"><a href="#fstview.insert-384"><span class="linenos">384</span></a><span class="sd">        - `one`: If `True` then will insert `code` as a single item. Otherwise `False` will attempt a slice insertion</span>
</span><span id="fstview.insert-385"><a href="#fstview.insert-385"><span class="linenos">385</span></a><span class="sd">            (type must be compatible).</span>
</span><span id="fstview.insert-386"><a href="#fstview.insert-386"><span class="linenos">386</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.insert-387"><a href="#fstview.insert-387"><span class="linenos">387</span></a>
</span><span id="fstview.insert-388"><a href="#fstview.insert-388"><span class="linenos">388</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.insert-389"><a href="#fstview.insert-389"><span class="linenos">389</span></a><span class="sd">        ```py</span>
</span><span id="fstview.insert-390"><a href="#fstview.insert-390"><span class="linenos">390</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, 1).fst.src</span>
</span><span id="fstview.insert-391"><a href="#fstview.insert-391"><span class="linenos">391</span></a><span class="sd">        &#39;[0, (4, 5), 1, 2, 3]&#39;</span>
</span><span id="fstview.insert-392"><a href="#fstview.insert-392"><span class="linenos">392</span></a>
</span><span id="fstview.insert-393"><a href="#fstview.insert-393"><span class="linenos">393</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, &#39;end&#39;, one=False).fst.src</span>
</span><span id="fstview.insert-394"><a href="#fstview.insert-394"><span class="linenos">394</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="fstview.insert-395"><a href="#fstview.insert-395"><span class="linenos">395</span></a>
</span><span id="fstview.insert-396"><a href="#fstview.insert-396"><span class="linenos">396</span></a><span class="sd">        &gt;&gt;&gt; # same as &#39;end&#39; but &#39;end&#39; is always &#39;end&#39;</span>
</span><span id="fstview.insert-397"><a href="#fstview.insert-397"><span class="linenos">397</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.insert(&#39;(4, 5)&#39;, 4, one=False).fst.src</span>
</span><span id="fstview.insert-398"><a href="#fstview.insert-398"><span class="linenos">398</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="fstview.insert-399"><a href="#fstview.insert-399"><span class="linenos">399</span></a>
</span><span id="fstview.insert-400"><a href="#fstview.insert-400"><span class="linenos">400</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].insert(&#39;*star&#39;).fst.src</span>
</span><span id="fstview.insert-401"><a href="#fstview.insert-401"><span class="linenos">401</span></a><span class="sd">        &#39;[0, *star, 1, 2, 3]&#39;</span>
</span><span id="fstview.insert-402"><a href="#fstview.insert-402"><span class="linenos">402</span></a><span class="sd">        ```</span>
</span><span id="fstview.insert-403"><a href="#fstview.insert-403"><span class="linenos">403</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.insert-404"><a href="#fstview.insert-404"><span class="linenos">404</span></a>
</span><span id="fstview.insert-405"><a href="#fstview.insert-405"><span class="linenos">405</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.insert-406"><a href="#fstview.insert-406"><span class="linenos">406</span></a>        <span class="n">idx</span>        <span class="o">=</span> <span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">==</span> <span class="s1">&#39;end&#39;</span> <span class="k">else</span>
</span><span id="fstview.insert-407"><a href="#fstview.insert-407"><span class="linenos">407</span></a>                      <span class="n">stop</span>      <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;</span> <span class="p">(</span><span class="n">l</span> <span class="o">:=</span> <span class="p">(</span><span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">)</span> <span class="o">-</span> <span class="p">(</span><span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">))</span> <span class="k">else</span>
</span><span id="fstview.insert-408"><a href="#fstview.insert-408"><span class="linenos">408</span></a>                      <span class="n">start</span> <span class="o">+</span> <span class="p">(</span><span class="n">idx</span> <span class="k">if</span> <span class="n">idx</span> <span class="o">&gt;=</span> <span class="mi">0</span> <span class="k">else</span> <span class="nb">max</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span> <span class="n">idx</span> <span class="o">+</span> <span class="n">l</span><span class="p">)))</span>
</span><span id="fstview.insert-409"><a href="#fstview.insert-409"><span class="linenos">409</span></a>
</span><span id="fstview.insert-410"><a href="#fstview.insert-410"><span class="linenos">410</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="n">idx</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="n">one</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.insert-411"><a href="#fstview.insert-411"><span class="linenos">411</span></a>
</span><span id="fstview.insert-412"><a href="#fstview.insert-412"><span class="linenos">412</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview.insert-413"><a href="#fstview.insert-413"><span class="linenos">413</span></a>
</span><span id="fstview.insert-414"><a href="#fstview.insert-414"><span class="linenos">414</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Insert into this slice at a specific index.</p>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>code</code>: <code>FST</code>, <code>AST</code> or source <code>str</code> or <code>list[str]</code> to insert.</li>
<li><code>idx</code>: Index to insert BEFORE. Can be <code>'end'</code> to indicate add at end of slice.</li>
<li><code>one</code>: If <code>True</code> then will insert <code>code</code> as a single item. Otherwise <code>False</code> will attempt a slice insertion
(type must be compatible).</li>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">,</span> <span class="mi">1</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, (4, 5), 1, 2, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">,</span> <span class="s1">&#39;end&#39;</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2, 3, 4, 5]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="c1"># same as &#39;end&#39; but &#39;end&#39; is always &#39;end&#39;</span>
<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">,</span> <span class="mi">4</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2, 3, 4, 5]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">insert</span><span class="p">(</span><span class="s1">&#39;*star&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, *star, 1, 2, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.append" class="classattr">
                                        <input id="fstview.append-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">append</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.append-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.append"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.append-416"><a href="#fstview.append-416"><span class="linenos">416</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">append</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.append-417"><a href="#fstview.append-417"><span class="linenos">417</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Append `code` as a single element to the end of this slice.</span>
</span><span id="fstview.append-418"><a href="#fstview.append-418"><span class="linenos">418</span></a>
</span><span id="fstview.append-419"><a href="#fstview.append-419"><span class="linenos">419</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.append-420"><a href="#fstview.append-420"><span class="linenos">420</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.append-421"><a href="#fstview.append-421"><span class="linenos">421</span></a>
</span><span id="fstview.append-422"><a href="#fstview.append-422"><span class="linenos">422</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.append-423"><a href="#fstview.append-423"><span class="linenos">423</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to append.</span>
</span><span id="fstview.append-424"><a href="#fstview.append-424"><span class="linenos">424</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.append-425"><a href="#fstview.append-425"><span class="linenos">425</span></a>
</span><span id="fstview.append-426"><a href="#fstview.append-426"><span class="linenos">426</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.append-427"><a href="#fstview.append-427"><span class="linenos">427</span></a><span class="sd">        ```py</span>
</span><span id="fstview.append-428"><a href="#fstview.append-428"><span class="linenos">428</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.append(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.append-429"><a href="#fstview.append-429"><span class="linenos">429</span></a><span class="sd">        &#39;[0, 1, 2, 3, (4, 5)]&#39;</span>
</span><span id="fstview.append-430"><a href="#fstview.append-430"><span class="linenos">430</span></a>
</span><span id="fstview.append-431"><a href="#fstview.append-431"><span class="linenos">431</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].append(&#39;*star&#39;).fst.src</span>
</span><span id="fstview.append-432"><a href="#fstview.append-432"><span class="linenos">432</span></a><span class="sd">        &#39;[0, 1, 2, *star, 3]&#39;</span>
</span><span id="fstview.append-433"><a href="#fstview.append-433"><span class="linenos">433</span></a><span class="sd">        ```</span>
</span><span id="fstview.append-434"><a href="#fstview.append-434"><span class="linenos">434</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.append-435"><a href="#fstview.append-435"><span class="linenos">435</span></a>
</span><span id="fstview.append-436"><a href="#fstview.append-436"><span class="linenos">436</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.append-437"><a href="#fstview.append-437"><span class="linenos">437</span></a>
</span><span id="fstview.append-438"><a href="#fstview.append-438"><span class="linenos">438</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span> <span class="o">+</span> <span class="mi">1</span>
</span><span id="fstview.append-439"><a href="#fstview.append-439"><span class="linenos">439</span></a>
</span><span id="fstview.append-440"><a href="#fstview.append-440"><span class="linenos">440</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Append <code>code</code> as a single element to the end of this slice.</p>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>code</code>: <code>FST</code>, <code>AST</code> or source <code>str</code> or <code>list[str]</code> to append.</li>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2, 3, (4, 5)]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="s1">&#39;*star&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2, *star, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.extend" class="classattr">
                                        <input id="fstview.extend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">extend</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.extend-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.extend"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.extend-442"><a href="#fstview.extend-442"><span class="linenos">442</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">extend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.extend-443"><a href="#fstview.extend-443"><span class="linenos">443</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend this slice with the slice in `code` (type must be compatible).</span>
</span><span id="fstview.extend-444"><a href="#fstview.extend-444"><span class="linenos">444</span></a>
</span><span id="fstview.extend-445"><a href="#fstview.extend-445"><span class="linenos">445</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.extend-446"><a href="#fstview.extend-446"><span class="linenos">446</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.extend-447"><a href="#fstview.extend-447"><span class="linenos">447</span></a>
</span><span id="fstview.extend-448"><a href="#fstview.extend-448"><span class="linenos">448</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.extend-449"><a href="#fstview.extend-449"><span class="linenos">449</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` slice to extend.</span>
</span><span id="fstview.extend-450"><a href="#fstview.extend-450"><span class="linenos">450</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.extend-451"><a href="#fstview.extend-451"><span class="linenos">451</span></a>
</span><span id="fstview.extend-452"><a href="#fstview.extend-452"><span class="linenos">452</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.extend-453"><a href="#fstview.extend-453"><span class="linenos">453</span></a><span class="sd">        ```py</span>
</span><span id="fstview.extend-454"><a href="#fstview.extend-454"><span class="linenos">454</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.extend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.extend-455"><a href="#fstview.extend-455"><span class="linenos">455</span></a><span class="sd">        &#39;[0, 1, 2, 3, 4, 5]&#39;</span>
</span><span id="fstview.extend-456"><a href="#fstview.extend-456"><span class="linenos">456</span></a>
</span><span id="fstview.extend-457"><a href="#fstview.extend-457"><span class="linenos">457</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].extend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.extend-458"><a href="#fstview.extend-458"><span class="linenos">458</span></a><span class="sd">        &#39;[0, 1, 2, 4, 5, 3]&#39;</span>
</span><span id="fstview.extend-459"><a href="#fstview.extend-459"><span class="linenos">459</span></a><span class="sd">        ```</span>
</span><span id="fstview.extend-460"><a href="#fstview.extend-460"><span class="linenos">460</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.extend-461"><a href="#fstview.extend-461"><span class="linenos">461</span></a>
</span><span id="fstview.extend-462"><a href="#fstview.extend-462"><span class="linenos">462</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.extend-463"><a href="#fstview.extend-463"><span class="linenos">463</span></a>
</span><span id="fstview.extend-464"><a href="#fstview.extend-464"><span class="linenos">464</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">stop</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">stop</span><span class="p">,</span> <span class="n">stop</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.extend-465"><a href="#fstview.extend-465"><span class="linenos">465</span></a>
</span><span id="fstview.extend-466"><a href="#fstview.extend-466"><span class="linenos">466</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">=</span> <span class="n">stop</span> <span class="o">+</span> <span class="p">(</span><span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span><span class="p">)</span>
</span><span id="fstview.extend-467"><a href="#fstview.extend-467"><span class="linenos">467</span></a>
</span><span id="fstview.extend-468"><a href="#fstview.extend-468"><span class="linenos">468</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Extend this slice with the slice in <code>code</code> (type must be compatible).</p>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>code</code>: <code>FST</code>, <code>AST</code> or source <code>str</code> or <code>list[str]</code> slice to extend.</li>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2, 3, 4, 5]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 1, 2, 4, 5, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.prepend" class="classattr">
                                        <input id="fstview.prepend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">prepend</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.prepend-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.prepend"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.prepend-470"><a href="#fstview.prepend-470"><span class="linenos">470</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">prepend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.prepend-471"><a href="#fstview.prepend-471"><span class="linenos">471</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;prepend `code` as a single element to the beginning of this slice.</span>
</span><span id="fstview.prepend-472"><a href="#fstview.prepend-472"><span class="linenos">472</span></a>
</span><span id="fstview.prepend-473"><a href="#fstview.prepend-473"><span class="linenos">473</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.prepend-474"><a href="#fstview.prepend-474"><span class="linenos">474</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.prepend-475"><a href="#fstview.prepend-475"><span class="linenos">475</span></a>
</span><span id="fstview.prepend-476"><a href="#fstview.prepend-476"><span class="linenos">476</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.prepend-477"><a href="#fstview.prepend-477"><span class="linenos">477</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to preappend.</span>
</span><span id="fstview.prepend-478"><a href="#fstview.prepend-478"><span class="linenos">478</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.prepend-479"><a href="#fstview.prepend-479"><span class="linenos">479</span></a>
</span><span id="fstview.prepend-480"><a href="#fstview.prepend-480"><span class="linenos">480</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.prepend-481"><a href="#fstview.prepend-481"><span class="linenos">481</span></a><span class="sd">        ```py</span>
</span><span id="fstview.prepend-482"><a href="#fstview.prepend-482"><span class="linenos">482</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.prepend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.prepend-483"><a href="#fstview.prepend-483"><span class="linenos">483</span></a><span class="sd">        &#39;[(4, 5), 0, 1, 2, 3]&#39;</span>
</span><span id="fstview.prepend-484"><a href="#fstview.prepend-484"><span class="linenos">484</span></a>
</span><span id="fstview.prepend-485"><a href="#fstview.prepend-485"><span class="linenos">485</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].prepend(&#39;*star&#39;).fst.src</span>
</span><span id="fstview.prepend-486"><a href="#fstview.prepend-486"><span class="linenos">486</span></a><span class="sd">        &#39;[0, *star, 1, 2, 3]&#39;</span>
</span><span id="fstview.prepend-487"><a href="#fstview.prepend-487"><span class="linenos">487</span></a><span class="sd">        ```</span>
</span><span id="fstview.prepend-488"><a href="#fstview.prepend-488"><span class="linenos">488</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.prepend-489"><a href="#fstview.prepend-489"><span class="linenos">489</span></a>
</span><span id="fstview.prepend-490"><a href="#fstview.prepend-490"><span class="linenos">490</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.prepend-491"><a href="#fstview.prepend-491"><span class="linenos">491</span></a>
</span><span id="fstview.prepend-492"><a href="#fstview.prepend-492"><span class="linenos">492</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="mi">1</span>
</span><span id="fstview.prepend-493"><a href="#fstview.prepend-493"><span class="linenos">493</span></a>
</span><span id="fstview.prepend-494"><a href="#fstview.prepend-494"><span class="linenos">494</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>prepend <code>code</code> as a single element to the beginning of this slice.</p>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>code</code>: <code>FST</code>, <code>AST</code> or source <code>str</code> or <code>list[str]</code> to preappend.</li>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">prepend</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[(4, 5), 0, 1, 2, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">prepend</span><span class="p">(</span><span class="s1">&#39;*star&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, *star, 1, 2, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                            <div id="fstview.prextend" class="classattr">
                                        <input id="fstview.prextend-view-source" class="view-source-toggle-state" type="checkbox" aria-hidden="true" tabindex="-1">
<div class="attr function">
            
        <span class="def">def</span>
        <span class="name">prextend</span><span class="signature pdoc-code multiline">(<span class="param">	<span class="bp">self</span>,</span><span class="param">	<span class="n">code</span><span class="p">:</span> <span class="n">Union</span><span class="p">[</span><span class="n"><a href="fst.html#FST">fst.fst.FST</a></span><span class="p">,</span> <span class="n">ast</span><span class="o">.</span><span class="n">AST</span><span class="p">,</span> <span class="nb">list</span><span class="p">[</span><span class="nb">str</span><span class="p">],</span> <span class="nb">str</span><span class="p">]</span>,</span><span class="param">	<span class="o">**</span><span class="n">options</span></span><span class="return-annotation">) -> <span class="n"><a href="#fstview">fstview</a></span> <span class="o">|</span> <span class="kc">None</span>:</span></span>

                <label class="view-source-button" for="fstview.prextend-view-source"><span>View Source</span></label>

    </div>
    <a class="headerlink" href="#fstview.prextend"></a>
            <div class="pdoc-code codehilite"><pre><span></span><span id="fstview.prextend-496"><a href="#fstview.prextend-496"><span class="linenos">496</span></a>    <span class="k">def</span><span class="w"> </span><span class="nf">prextend</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">code</span><span class="p">:</span> <span class="n">Code</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="n">fstview</span> <span class="o">|</span> <span class="kc">None</span><span class="p">:</span>  <span class="c1"># -&gt; Self or reparsed Self or could disappear due to raw</span>
</span><span id="fstview.prextend-497"><a href="#fstview.prextend-497"><span class="linenos">497</span></a><span class="w">        </span><span class="sd">&quot;&quot;&quot;Extend the beginning of this slice with the slice in `code` (type must be compatible).</span>
</span><span id="fstview.prextend-498"><a href="#fstview.prextend-498"><span class="linenos">498</span></a>
</span><span id="fstview.prextend-499"><a href="#fstview.prextend-499"><span class="linenos">499</span></a><span class="sd">        **Returns:**</span>
</span><span id="fstview.prextend-500"><a href="#fstview.prextend-500"><span class="linenos">500</span></a><span class="sd">        - `self`</span>
</span><span id="fstview.prextend-501"><a href="#fstview.prextend-501"><span class="linenos">501</span></a>
</span><span id="fstview.prextend-502"><a href="#fstview.prextend-502"><span class="linenos">502</span></a><span class="sd">        **Parameters:**</span>
</span><span id="fstview.prextend-503"><a href="#fstview.prextend-503"><span class="linenos">503</span></a><span class="sd">        - `code`: `FST`, `AST` or source `str` or `list[str]` to extend at the start.</span>
</span><span id="fstview.prextend-504"><a href="#fstview.prextend-504"><span class="linenos">504</span></a><span class="sd">        - `options`: See `fst.fst.FST.get_options()`.</span>
</span><span id="fstview.prextend-505"><a href="#fstview.prextend-505"><span class="linenos">505</span></a>
</span><span id="fstview.prextend-506"><a href="#fstview.prextend-506"><span class="linenos">506</span></a><span class="sd">        **Examples:**</span>
</span><span id="fstview.prextend-507"><a href="#fstview.prextend-507"><span class="linenos">507</span></a><span class="sd">        ```py</span>
</span><span id="fstview.prextend-508"><a href="#fstview.prextend-508"><span class="linenos">508</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts.prextend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.prextend-509"><a href="#fstview.prextend-509"><span class="linenos">509</span></a><span class="sd">        &#39;[4, 5, 0, 1, 2, 3]&#39;</span>
</span><span id="fstview.prextend-510"><a href="#fstview.prextend-510"><span class="linenos">510</span></a>
</span><span id="fstview.prextend-511"><a href="#fstview.prextend-511"><span class="linenos">511</span></a><span class="sd">        &gt;&gt;&gt; FST(&#39;[0, 1, 2, 3]&#39;).elts[1:3].prextend(&#39;(4, 5)&#39;).fst.src</span>
</span><span id="fstview.prextend-512"><a href="#fstview.prextend-512"><span class="linenos">512</span></a><span class="sd">        &#39;[0, 4, 5, 1, 2, 3]&#39;</span>
</span><span id="fstview.prextend-513"><a href="#fstview.prextend-513"><span class="linenos">513</span></a><span class="sd">        ```</span>
</span><span id="fstview.prextend-514"><a href="#fstview.prextend-514"><span class="linenos">514</span></a><span class="sd">        &quot;&quot;&quot;</span>
</span><span id="fstview.prextend-515"><a href="#fstview.prextend-515"><span class="linenos">515</span></a>
</span><span id="fstview.prextend-516"><a href="#fstview.prextend-516"><span class="linenos">516</span></a>        <span class="n">len_before</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span> <span class="o">:=</span> <span class="nb">getattr</span><span class="p">(</span><span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">a</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">))</span>
</span><span id="fstview.prextend-517"><a href="#fstview.prextend-517"><span class="linenos">517</span></a>
</span><span id="fstview.prextend-518"><a href="#fstview.prextend-518"><span class="linenos">518</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">fst</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">put_slice</span><span class="p">(</span><span class="n">code</span><span class="p">,</span> <span class="n">start</span> <span class="o">:=</span> <span class="bp">self</span><span class="o">.</span><span class="n">start</span><span class="p">,</span> <span class="n">start</span><span class="p">,</span> <span class="bp">self</span><span class="o">.</span><span class="n">field</span><span class="p">,</span> <span class="n">one</span><span class="o">=</span><span class="kc">False</span><span class="p">,</span> <span class="o">**</span><span class="n">options</span><span class="p">)</span>
</span><span id="fstview.prextend-519"><a href="#fstview.prextend-519"><span class="linenos">519</span></a>
</span><span id="fstview.prextend-520"><a href="#fstview.prextend-520"><span class="linenos">520</span></a>        <span class="bp">self</span><span class="o">.</span><span class="n">stop</span> <span class="o">+=</span> <span class="nb">len</span><span class="p">(</span><span class="n">asts</span><span class="p">)</span> <span class="o">-</span> <span class="n">len_before</span>
</span><span id="fstview.prextend-521"><a href="#fstview.prextend-521"><span class="linenos">521</span></a>
</span><span id="fstview.prextend-522"><a href="#fstview.prextend-522"><span class="linenos">522</span></a>        <span class="k">return</span> <span class="bp">self</span>
</span></pre></div>


            <div class="docstring"><p>Extend the beginning of this slice with the slice in <code>code</code> (type must be compatible).</p>

<p><strong>Returns:</strong></p>

<ul>
<li><code>self</code></li>
</ul>

<p><strong>Parameters:</strong></p>

<ul>
<li><code>code</code>: <code>FST</code>, <code>AST</code> or source <code>str</code> or <code>list[str]</code> to extend at the start.</li>
<li><code>options</code>: See <code><a href="fst.html#FST.get_options">fst.fst.FST.get_options()</a></code>.</li>
</ul>

<p><strong>Examples:</strong></p>

<div class="pdoc-code codehilite">
<pre><span></span><code><span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="o">.</span><span class="n">prextend</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[4, 5, 0, 1, 2, 3]&#39;</span>

<span class="o">&gt;&gt;&gt;</span> <span class="n">FST</span><span class="p">(</span><span class="s1">&#39;[0, 1, 2, 3]&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">elts</span><span class="p">[</span><span class="mi">1</span><span class="p">:</span><span class="mi">3</span><span class="p">]</span><span class="o">.</span><span class="n">prextend</span><span class="p">(</span><span class="s1">&#39;(4, 5)&#39;</span><span class="p">)</span><span class="o">.</span><span class="n">fst</span><span class="o">.</span><span class="n">src</span>
<span class="s1">&#39;[0, 4, 5, 1, 2, 3]&#39;</span>
</code></pre>
</div>
</div>


                            </div>
                </section>
    </main>
<script>
    function escapeHTML(html) {
        return document.createElement('div').appendChild(document.createTextNode(html)).parentNode.innerHTML;
    }

    const originalContent = document.querySelector("main.pdoc");
    let currentContent = originalContent;

    function setContent(innerHTML) {
        let elem;
        if (innerHTML) {
            elem = document.createElement("main");
            elem.classList.add("pdoc");
            elem.innerHTML = innerHTML;
        } else {
            elem = originalContent;
        }
        if (currentContent !== elem) {
            currentContent.replaceWith(elem);
            currentContent = elem;
        }
    }

    function getSearchTerm() {
        return (new URL(window.location)).searchParams.get("search");
    }

    const searchBox = document.querySelector(".pdoc input[type=search]");
    searchBox.addEventListener("input", function () {
        let url = new URL(window.location);
        if (searchBox.value.trim()) {
            url.hash = "";
            url.searchParams.set("search", searchBox.value);
        } else {
            url.searchParams.delete("search");
        }
        history.replaceState("", "", url.toString());
        onInput();
    });
    window.addEventListener("popstate", onInput);


    let search, searchErr;

    async function initialize() {
        try {
            search = await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.type = "text/javascript";
                script.async = true;
                script.onload = () => resolve(window.pdocSearch);
                script.onerror = (e) => reject(e);
                script.src = "../search.js";
                document.getElementsByTagName("head")[0].appendChild(script);
            });
        } catch (e) {
            console.error("Cannot fetch pdoc search index");
            searchErr = "Cannot fetch search index.";
        }
        onInput();

        document.querySelector("nav.pdoc").addEventListener("click", e => {
            if (e.target.hash) {
                searchBox.value = "";
                searchBox.dispatchEvent(new Event("input"));
            }
        });
    }

    function onInput() {
        setContent((() => {
            const term = getSearchTerm();
            if (!term) {
                return null
            }
            if (searchErr) {
                return `<h3>Error: ${searchErr}</h3>`
            }
            if (!search) {
                return "<h3>Searching...</h3>"
            }

            window.scrollTo({top: 0, left: 0, behavior: 'auto'});

            const results = search(term);

            let html;
            if (results.length === 0) {
                html = `No search results for '${escapeHTML(term)}'.`
            } else {
                html = `<h4>${results.length} search result${results.length > 1 ? "s" : ""} for '${escapeHTML(term)}'.</h4>`;
            }
            for (let result of results.slice(0, 10)) {
                let doc = result.doc;
                let url = `../${doc.modulename.replaceAll(".", "/")}.html`;
                if (doc.qualname) {
                    url += `#${doc.qualname}`;
                }

                let heading;
                switch (result.doc.kind) {
                    case "function":
                        if (doc.fullname.endsWith(".__init__")) {
                            heading = `<span class="name">${doc.fullname.replace(/\.__init__$/, "")}</span>${doc.signature}`;
                        } else {
                            heading = `<span class="def">${doc.funcdef}</span> <span class="name">${doc.fullname}</span>${doc.signature}`;
                        }
                        break;
                    case "class":
                        heading = `<span class="def">class</span> <span class="name">${doc.fullname}</span>`;
                        if (doc.bases)
                            heading += `<wbr>(<span class="base">${doc.bases}</span>)`;
                        heading += `:`;
                        break;
                    case "variable":
                        heading = `<span class="name">${doc.fullname}</span>`;
                        if (doc.annotation)
                            heading += `<span class="annotation">${doc.annotation}</span>`;
                        if (doc.default_value)
                            heading += `<span class="default_value"> = ${doc.default_value}</span>`;
                        break;
                    default:
                        heading = `<span class="name">${doc.fullname}</span>`;
                        break;
                }
                html += `
                        <section class="search-result">
                        <a href="${url}" class="attr ${doc.kind}">${heading}</a>
                        <div class="docstring">${doc.doc}</div>
                        </section>
                    `;

            }
            return html;
        })());
    }

    if (getSearchTerm()) {
        initialize();
        searchBox.value = getSearchTerm();
        onInput();
    } else {
        searchBox.addEventListener("focus", initialize, {once: true});
    }

    searchBox.addEventListener("keydown", e => {
        if (["ArrowDown", "ArrowUp", "Enter"].includes(e.key)) {
            let focused = currentContent.querySelector(".search-result.focused");
            if (!focused) {
                currentContent.querySelector(".search-result").classList.add("focused");
            } else if (
                e.key === "ArrowDown"
                && focused.nextElementSibling
                && focused.nextElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.nextElementSibling.classList.add("focused");
                focused.nextElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "ArrowUp"
                && focused.previousElementSibling
                && focused.previousElementSibling.classList.contains("search-result")
            ) {
                focused.classList.remove("focused");
                focused.previousElementSibling.classList.add("focused");
                focused.previousElementSibling.scrollIntoView({
                    behavior: "smooth",
                    block: "nearest",
                    inline: "nearest"
                });
            } else if (
                e.key === "Enter"
            ) {
                focused.querySelector("a").click();
            }
        }
    });
</script></body>
</html>