Miscellaneous console sessions mostly meant to screen for random errors. Feel free to nuke any of these should they
become annoying.

>>> from fst import *


........................................................................................................................
>>> f = FST('''
... class cls:
...     def __init__(self):
...         pass
...
...     def meth(self, a):
...         return a
... ''')
>>> f
<ClassDef ROOT 1,0..6,16>
>>> f.src
'\nclass cls:\n    def __init__(self):\n        pass\n\n    def meth(self, a):\n        return a\n'
>>> print(_)
<BLANKLINE>
class cls:
    def __init__(self):
        pass
<BLANKLINE>
    def meth(self, a):
        return a
<BLANKLINE>
>>> f.body[1]
<FunctionDef 5,4..6,16>
>>> _.src
'def meth(self, a):\n        return a'
>>> print(f.body[1].src)
def meth(self, a):
        return a
>>> print(f.body[1].copy().src)
def meth(self, a):
    return a
>>> f.body.append(f.body[1].copy())
<<ClassDef ROOT 1,0..9,16>.body [<FunctionDef 2,4..3,12>, <FunctionDef 5,4..6,16>, <FunctionDef 8,4..9,16>]>
>>> print(f.src)
<BLANKLINE>
class cls:
    def __init__(self):
        pass
<BLANKLINE>
    def meth(self, a):
        return a
<BLANKLINE>
    def meth(self, a):
        return a
>>> f.body[-1]
<FunctionDef 8,4..9,16>
>>> f.body[-1].name = 'blahblahblah'
>>> print(f.src)
<BLANKLINE>
class cls:
    def __init__(self):
        pass
<BLANKLINE>
    def meth(self, a):
        return a
<BLANKLINE>
    def blahblahblah(self, a):
        return a


........................................................................................................................
>>> f = FST('{a: b}')
>>> f.keys[0]
<Name 0,1..0,2>

>>> f.keys[0] = 'x := y'
>>> f.src
'{(x := y): b}'

>>> f.keys[0] = None
>>> f.src
'{**b}'


........................................................................................................................
>>> f = FST('class a: pass')
>>> f.bases = 'base,'
>>> g = FST('del a')
>>> g.targets = 'b'
>>> g.src
'del b'
>>> g.targets = 'c,'
>>> g.src
'del c'
>>> FST('del z,')
<Delete ROOT 0,0..0,6>
>>> __ = _.dump()
Delete - ROOT 0,0..0,6
  .targets[1]
   0] Name 'z' Del - 0,4..0,5
>>> f.src
'class a(base): pass'
>>> g.src
'del c'
>>> __ = g.dump()
Delete - ROOT 0,0..0,5
  .targets[1]
   0] Name 'c' Del - 0,4..0,5
>>> __ = FST('del z,').dump()
Delete - ROOT 0,0..0,6
  .targets[1]
   0] Name 'z' Del - 0,4..0,5
>>> __ = FST('del z,', 'stmt').dump()
Delete - ROOT 0,0..0,6
  .targets[1]
   0] Name 'z' Del - 0,4..0,5
>>> h = FST('del z,')
>>> h.targets = 'x'
>>> h.src
'del x'
>>> h.targets = 'x,'
>>> h.src
'del x'
>>> h = FST('del z,')
>>> h.targets[0] = 'a, b'
>>> h.src
'del (a, b),'
>>> h.verify()
<Delete ROOT 0,0..0,11>
>>> __ = h.dump('s')
0: del (a, b),
Delete - ROOT 0,0..0,11
  .targets[1]
   0] Tuple - 0,4..0,10
     .elts[2]
      0] Name 'a' Del - 0,5..0,6
      1] Name 'b' Del - 0,8..0,9
     .ctx Del
>>> FST('class cls(b,): pass')
<ClassDef ROOT 0,0..0,19>
>>> f = _
>>> __ = f.dump()
ClassDef - ROOT 0,0..0,19
  .name 'cls'
  .bases[1]
   0] Name 'b' Load - 0,10..0,11
  .body[1]
   0] Pass - 0,15..0,19
>>> f.src
'class cls(b,): pass'
>>> f.bases = 'z,'
>>> f.src
'class cls(z): pass'
>>> __ = f.dump()
ClassDef - ROOT 0,0..0,18
  .name 'cls'
  .bases[1]
   0] Name 'z' Load - 0,10..0,11
  .body[1]
   0] Pass - 0,14..0,18


........................................................................................................................
>>> f = FST('call(*not a, *[] or ())')
>>> g = f.get_slice('args', pars_arglike=False)
>>> g.src
'(*not a, *[] or ())'
>>> __ = g.dump()
Tuple - ROOT 0,0..0,19
  .elts[2]
   0] Starred - 0,1..0,7
     .value UnaryOp - 0,2..0,7
       .op Not - 0,2..0,5
       .operand Name 'a' Load - 0,6..0,7
     .ctx Load
   1] Starred - 0,9..0,18
     .value BoolOp - 0,10..0,18
       .op Or
       .values[2]
        0] List - 0,10..0,12
          .ctx Load
        1] Tuple - 0,16..0,18
          .ctx Load
     .ctx Load
  .ctx Load
>>> f.args = None
>>> f.src
'call()'
>>> f.args = g.copy()
>>> f.src
'call(*not a, *[] or ())'


........................................................................................................................
insert into empty BoolOp slice

>>> f = FST('a and b')
>>> f.put_slice(None)
<BoolOp ROOT 0,0..0,0>
>>> __ = f.dump()
BoolOp - ROOT 0,0..0,0
  .op And
>>> f.put_slice('x')
<BoolOp ROOT 0,0..0,1>
>>> __ = f.dump('N')
0: x
BoolOp - ROOT 0,0..0,1
  .op And
  .values[1]
0: x
   0] Name 'x' Load - 0,0..0,1
>>> f.put_slice('y')
<BoolOp ROOT 0,0..0,1>
>>> __ = f.dump('N')
0: y
BoolOp - ROOT 0,0..0,1
  .op And
  .values[1]
0: y
   0] Name 'y' Load - 0,0..0,1
>>> f.put_slice('z', 1, 1)
<BoolOp ROOT 0,0..0,7>
>>> __ = f.dump('N')
0: y and z
BoolOp - ROOT 0,0..0,7
  .op And
  .values[2]
0: y
   0] Name 'y' Load - 0,0..0,1
0:       z
   1] Name 'z' Load - 0,6..0,7


........................................................................................................................
replace() end of sequence with nothing

>>> f = FST('a\nb\nc\nd\ne')
>>> f.body[1].replace(None)
>>> f.body[1].replace('')
Traceback (most recent call last):
  File "<python-input-4>", line 1, in <module>
    f.body[1].replace('')
    ~~~~~~~~~~~~~~~~~^^^^
  File "/home/tom/work/fst/pfst/src/fst/fst.py", line 1576, in replace
    return parent._put_one(code, idx, field, options)
           ~~~~~~~~~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/tom/work/fst/pfst/src/fst/fst_put_one.py", line 2793, in _put_one
    new_self = self._put_slice(code, idx, idx + 1, field, True, options)  # MAYBE new self, or just old self
  File "/home/tom/work/fst/pfst/src/fst/fst_put_slice.py", line 2881, in _put_slice
    handler(self, code, start, stop, field, one, options)
    ~~~~~~~^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/home/tom/work/fst/pfst/src/fst/slice_stmtlike.py", line 1462, in put_slice_stmtlike
    put_fst_end_nl = _put_slice_stmtlike_old(self, code, start, stop, field, one, options)
  File "/home/tom/work/fst/pfst/src/fst/slice_stmtlike.py", line 1128, in _put_slice_stmtlike_old
    raise ValueError('expecting a single element')
ValueError: expecting a single element
>>> f.body[1].replace('', one=False)
<Expr 1,0..1,1>
>>> _.src
'd'
>>> f.src
'a\nd\ne'
>>> f.body[1].replace('x\ny\nz', one=False)
<Expr 1,0..1,1>
>>> _.src
'x'
>>> f.body[-1].replace('u', one=False)
<Expr 4,0..4,1>
>>> _.src
'u'
>>> f.src
'a\nx\ny\nz\nu'
>>> f.put('', -1, one=False)
Traceback (most recent call last):
  File "<python-input-14>", line 1, in <module>
    f.put('', -1, one=False)
    ~~~~~^^^^^^^^^^^^^^^^^^^
  File "/home/tom/work/fst/pfst/src/fst/fst.py", line 1828, in put
    raise ValueError("cannot use 'one=False' in non-slice put()")
ValueError: cannot use 'one=False' in non-slice put()
>>> f.body[-1].replace('', one=False)
>>> f.src
'a\nx\ny\nz\n'
